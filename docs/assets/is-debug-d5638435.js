var rr=Object.defineProperty;var sr=(T,e,r)=>e in T?rr(T,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):T[e]=r;var b=(T,e,r)=>(sr(T,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))h(u);new MutationObserver(u=>{for(const g of u)if(g.type==="childList")for(const w of g.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&h(w)}).observe(document,{childList:!0,subtree:!0});function r(u){const g={};return u.integrity&&(g.integrity=u.integrity),u.referrerpolicy&&(g.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?g.credentials="include":u.crossorigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function h(u){if(u.ep)return;u.ep=!0;const g=r(u);fetch(u.href,g)}})();function nr(T){return T&&T.__esModule&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T}var Qe={},or={get exports(){return Qe},set exports(T){Qe=T}};(function(T,e){(function(r,h){T.exports=h()})(window,function(){return function(r){var h={};function u(g){if(h[g])return h[g].exports;var w=h[g]={i:g,l:!1,exports:{}};return r[g].call(w.exports,w,w.exports,u),w.l=!0,w.exports}return u.m=r,u.c=h,u.d=function(g,w,a){u.o(g,w)||Object.defineProperty(g,w,{enumerable:!0,get:a})},u.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},u.t=function(g,w){if(1&w&&(g=u(g)),8&w||4&w&&typeof g=="object"&&g&&g.__esModule)return g;var a=Object.create(null);if(u.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:g}),2&w&&typeof g!="string")for(var o in g)u.d(a,o,function(k){return g[k]}.bind(null,o));return a},u.n=function(g){var w=g&&g.__esModule?function(){return g.default}:function(){return g};return u.d(w,"a",w),w},u.o=function(g,w){return Object.prototype.hasOwnProperty.call(g,w)},u.p="",u(u.s=1)}([function(r,h,u){var g,w;g=[u(2)],(w=function(a){function o(t){if(o.is(t,"function"))return k?t():a.on("raphael.DOMload",t);if(o.is(t,mt))return o._engine.create[U](o,t.splice(0,3+o.is(t[0],ft))).add(t);var i=Array.prototype.slice.call(arguments,0);if(o.is(i[i.length-1],"function")){var s=i.pop();return k?s.call(o._engine.create[U](o,i)):a.on("raphael.DOMload",function(){s.call(o._engine.create[U](o,i))})}return o._engine.create[U](o,arguments)}o.version="2.3.0",o.eve=a;var k,C,V=/[, ]+/,W={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},lt=/\{(\d+)\}/g,Q="hasOwnProperty",q={doc:document,win:window},J={was:Object.prototype[Q].call(q.win,"Raphael"),is:q.win.Raphael},Ct=function(){this.ca=this.customAttributes={}},U="apply",R="concat",ct="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,rt="",pt=" ",Y=String,tt="split",nt="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[tt](pt),wt={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},at=Y.prototype.toLowerCase,K=Math,st=K.max,it=K.min,_t=K.abs,Lt=K.pow,Dt=K.PI,ft="number",mt="array",Wt=Object.prototype.toString,f=(o._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),d={NaN:1,Infinity:1,"-Infinity":1},c=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,y=K.round,S=parseFloat,E=parseInt,N=Y.prototype.toUpperCase,z=o._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},B=o._availableAnimAttrs={blur:ft,"clip-rect":"csv",cx:ft,cy:ft,fill:"colour","fill-opacity":ft,"font-size":ft,height:ft,opacity:ft,path:"path",r:ft,rx:ft,ry:ft,stroke:"colour","stroke-opacity":ft,"stroke-width":ft,transform:"transform",width:ft,x:ft,y:ft},G=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,j={hs:1,rg:1},et=/,?([achlmqrstvxz]),?/gi,gt=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,yt=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,vt=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,kt=(o._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),Nt=function(t,i){return S(t)-S(i)},St=function(t){return t},ht=o._rectPath=function(t,i,s,n,l){return l?[["M",t+l,i],["l",s-2*l,0],["a",l,l,0,0,1,l,l],["l",0,n-2*l],["a",l,l,0,0,1,-l,l],["l",2*l-s,0],["a",l,l,0,0,1,-l,-l],["l",0,2*l-n],["a",l,l,0,0,1,l,-l],["z"]]:[["M",t,i],["l",s,0],["l",0,n],["l",-s,0],["z"]]},It=function(t,i,s,n){return n==null&&(n=s),[["M",t,i],["m",0,-n],["a",s,n,0,1,1,0,2*n],["a",s,n,0,1,1,0,-2*n],["z"]]},Tt=o._getPath={path:function(t){return t.attr("path")},circle:function(t){var i=t.attrs;return It(i.cx,i.cy,i.r)},ellipse:function(t){var i=t.attrs;return It(i.cx,i.cy,i.rx,i.ry)},rect:function(t){var i=t.attrs;return ht(i.x,i.y,i.width,i.height,i.r)},image:function(t){var i=t.attrs;return ht(i.x,i.y,i.width,i.height)},text:function(t){var i=t._getBBox();return ht(i.x,i.y,i.width,i.height)},set:function(t){var i=t._getBBox();return ht(i.x,i.y,i.width,i.height)}},Mt=o.mapPath=function(t,i){if(!i)return t;var s,n,l,p,m,v,x;for(l=0,m=(t=Ce(t)).length;l<m;l++)for(p=1,v=(x=t[l]).length;p<v;p+=2)s=i.x(x[p],x[p+1]),n=i.y(x[p],x[p+1]),x[p]=s,x[p+1]=n;return t};if(o._g=q,o.type=q.win.SVGAngle||q.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",o.type=="VML"){var Bt,Ot=q.doc.createElement("div");if(Ot.innerHTML='<v:shape adj="1"/>',(Bt=Ot.firstChild).style.behavior="url(#default#VML)",!Bt||typeof Bt.adj!="object")return o.type=rt;Ot=null}function Pt(t){if(typeof t=="function"||Object(t)!==t)return t;var i=new t.constructor;for(var s in t)t[Q](s)&&(i[s]=Pt(t[s]));return i}o.svg=!(o.vml=o.type=="VML"),o._Paper=Ct,o.fn=C=Ct.prototype=o.prototype,o._id=0,o.is=function(t,i){return(i=at.call(i))=="finite"?!d[Q](+t):i=="array"?t instanceof Array:i=="null"&&t===null||i==typeof t&&t!==null||i=="object"&&t===Object(t)||i=="array"&&Array.isArray&&Array.isArray(t)||Wt.call(t).slice(8,-1).toLowerCase()==i},o.angle=function(t,i,s,n,l,p){if(l==null){var m=t-s,v=i-n;return m||v?(180+180*K.atan2(-v,-m)/Dt+360)%360:0}return o.angle(t,i,l,p)-o.angle(s,n,l,p)},o.rad=function(t){return t%360*Dt/180},o.deg=function(t){return Math.round(180*t/Dt%360*1e3)/1e3},o.snapTo=function(t,i,s){if(s=o.is(s,"finite")?s:10,o.is(t,mt)){for(var n=t.length;n--;)if(_t(t[n]-i)<=s)return t[n]}else{var l=i%(t=+t);if(l<s)return i-l;if(l>t-s)return i-l+t}return i};var Ut,Se;o.createUUID=(Ut=/[xy]/g,Se=function(t){var i=16*K.random()|0;return(t=="x"?i:3&i|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(Ut,Se).toUpperCase()}),o.setWindow=function(t){a("raphael.setWindow",o,q.win,t),q.win=t,q.doc=q.win.document,o._engine.initWin&&o._engine.initWin(q.win)};var Kt=function(t){if(o.vml){var i,s=/^\s+|\s+$/g;try{var n=new ActiveXObject("htmlfile");n.write("<body>"),n.close(),i=n.body}catch{i=createPopup().document.body}var l=i.createTextRange();Kt=Rt(function(m){try{i.style.color=Y(m).replace(s,rt);var v=l.queryCommandValue("ForeColor");return"#"+("000000"+(v=(255&v)<<16|65280&v|(16711680&v)>>>16).toString(16)).slice(-6)}catch{return"none"}})}else{var p=q.doc.createElement("i");p.title="Raphaël Colour Picker",p.style.display="none",q.doc.body.appendChild(p),Kt=Rt(function(m){return p.style.color=m,q.doc.defaultView.getComputedStyle(p,rt).getPropertyValue("color")})}return Kt(t)},le=function(){return"hsb("+[this.h,this.s,this.b]+")"},ce=function(){return"hsl("+[this.h,this.s,this.l]+")"},_e=function(){return this.hex},de=function(t,i,s){if(i==null&&o.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(s=t.b,i=t.g,t=t.r),i==null&&o.is(t,"string")){var n=o.getRGB(t);t=n.r,i=n.g,s=n.b}return(t>1||i>1||s>1)&&(t/=255,i/=255,s/=255),[t,i,s]},Te=function(t,i,s,n){var l={r:t*=255,g:i*=255,b:s*=255,hex:o.rgb(t,i,s),toString:_e};return o.is(n,"finite")&&(l.opacity=n),l};function Rt(t,i,s){return function n(){var l=Array.prototype.slice.call(arguments,0),p=l.join("␀"),m=n.cache=n.cache||{},v=n.count=n.count||[];return m[Q](p)?(function(x,_){for(var D=0,H=x.length;D<H;D++)if(x[D]===_)return x.push(x.splice(D,1)[0])}(v,p),s?s(m[p]):m[p]):(v.length>=1e3&&delete m[v.shift()],v.push(p),m[p]=t[U](i,l),s?s(m[p]):m[p])}}o.color=function(t){var i;return o.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(i=o.hsb2rgb(t),t.r=i.r,t.g=i.g,t.b=i.b,t.hex=i.hex):o.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(i=o.hsl2rgb(t),t.r=i.r,t.g=i.g,t.b=i.b,t.hex=i.hex):(o.is(t,"string")&&(t=o.getRGB(t)),o.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(i=o.rgb2hsl(t),t.h=i.h,t.s=i.s,t.l=i.l,i=o.rgb2hsb(t),t.v=i.b):(t={hex:"none"}).r=t.g=t.b=t.h=t.s=t.v=t.l=-1),t.toString=_e,t},o.hsb2rgb=function(t,i,s,n){var l,p,m,v,x;return this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(s=t.b,i=t.s,n=t.o,t=t.h),v=(x=s*i)*(1-_t((t=(t*=360)%360/60)%2-1)),l=p=m=s-x,Te(l+=[x,v,0,0,v,x][t=~~t],p+=[v,x,x,v,0,0][t],m+=[0,0,v,x,x,v][t],n)},o.hsl2rgb=function(t,i,s,n){var l,p,m,v,x;return this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(s=t.l,i=t.s,t=t.h),(t>1||i>1||s>1)&&(t/=360,i/=100,s/=100),v=(x=2*i*(s<.5?s:1-s))*(1-_t((t=(t*=360)%360/60)%2-1)),l=p=m=s-x/2,Te(l+=[x,v,0,0,v,x][t=~~t],p+=[v,x,x,v,0,0][t],m+=[0,0,v,x,x,v][t],n)},o.rgb2hsb=function(t,i,s){var n,l;return t=(s=de(t,i,s))[0],i=s[1],s=s[2],{h:(((l=(n=st(t,i,s))-it(t,i,s))==0?null:n==t?(i-s)/l:n==i?(s-t)/l+2:(t-i)/l+4)+360)%6*60/360,s:l==0?0:l/n,b:n,toString:le}},o.rgb2hsl=function(t,i,s){var n,l,p,m;return t=(s=de(t,i,s))[0],i=s[1],s=s[2],n=((l=st(t,i,s))+(p=it(t,i,s)))/2,{h:(((m=l-p)==0?null:l==t?(i-s)/m:l==i?(s-t)/m+2:(t-i)/m+4)+360)%6*60/360,s:m==0?0:n<.5?m/(2*n):m/(2-2*n),l:n,toString:ce}},o._path2string=function(){return this.join(",").replace(et,"$1")},o._preload=function(t,i){var s=q.doc.createElement("img");s.style.cssText="position:absolute;left:-9999em;top:-9999em",s.onload=function(){i.call(this),this.onload=null,q.doc.body.removeChild(this)},s.onerror=function(){q.doc.body.removeChild(this)},q.doc.body.appendChild(s),s.src=t};function Zt(){return this.hex}function ue(t,i){for(var s=[],n=0,l=t.length;l-2*!i>n;n+=2){var p=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];i?n?l-4==n?p[3]={x:+t[0],y:+t[1]}:l-2==n&&(p[2]={x:+t[0],y:+t[1]},p[3]={x:+t[2],y:+t[3]}):p[0]={x:+t[l-2],y:+t[l-1]}:l-4==n?p[3]=p[2]:n||(p[0]={x:+t[n],y:+t[n+1]}),s.push(["C",(-p[0].x+6*p[1].x+p[2].x)/6,(-p[0].y+6*p[1].y+p[2].y)/6,(p[1].x+6*p[2].x-p[3].x)/6,(p[1].y+6*p[2].y-p[3].y)/6,p[2].x,p[2].y])}return s}o.getRGB=Rt(function(t){if(!t||(t=Y(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Zt};if(t=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:Zt};!j[Q](t.toLowerCase().substring(0,2))&&t.charAt()!="#"&&(t=Kt(t));var i,s,n,l,p,m,v=t.match(f);return v?(v[2]&&(n=E(v[2].substring(5),16),s=E(v[2].substring(3,5),16),i=E(v[2].substring(1,3),16)),v[3]&&(n=E((p=v[3].charAt(3))+p,16),s=E((p=v[3].charAt(2))+p,16),i=E((p=v[3].charAt(1))+p,16)),v[4]&&(m=v[4][tt](G),i=S(m[0]),m[0].slice(-1)=="%"&&(i*=2.55),s=S(m[1]),m[1].slice(-1)=="%"&&(s*=2.55),n=S(m[2]),m[2].slice(-1)=="%"&&(n*=2.55),v[1].toLowerCase().slice(0,4)=="rgba"&&(l=S(m[3])),m[3]&&m[3].slice(-1)=="%"&&(l/=100)),v[5]?(m=v[5][tt](G),i=S(m[0]),m[0].slice(-1)=="%"&&(i*=2.55),s=S(m[1]),m[1].slice(-1)=="%"&&(s*=2.55),n=S(m[2]),m[2].slice(-1)=="%"&&(n*=2.55),(m[0].slice(-3)=="deg"||m[0].slice(-1)=="°")&&(i/=360),v[1].toLowerCase().slice(0,4)=="hsba"&&(l=S(m[3])),m[3]&&m[3].slice(-1)=="%"&&(l/=100),o.hsb2rgb(i,s,n,l)):v[6]?(m=v[6][tt](G),i=S(m[0]),m[0].slice(-1)=="%"&&(i*=2.55),s=S(m[1]),m[1].slice(-1)=="%"&&(s*=2.55),n=S(m[2]),m[2].slice(-1)=="%"&&(n*=2.55),(m[0].slice(-3)=="deg"||m[0].slice(-1)=="°")&&(i/=360),v[1].toLowerCase().slice(0,4)=="hsla"&&(l=S(m[3])),m[3]&&m[3].slice(-1)=="%"&&(l/=100),o.hsl2rgb(i,s,n,l)):((v={r:i,g:s,b:n,toString:Zt}).hex="#"+(16777216|n|s<<8|i<<16).toString(16).slice(1),o.is(l,"finite")&&(v.opacity=l),v)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Zt}},o),o.hsb=Rt(function(t,i,s){return o.hsb2rgb(t,i,s).hex}),o.hsl=Rt(function(t,i,s){return o.hsl2rgb(t,i,s).hex}),o.rgb=Rt(function(t,i,s){function n(l){return l+.5|0}return"#"+(16777216|n(s)|n(i)<<8|n(t)<<16).toString(16).slice(1)}),o.getColor=function(t){var i=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},s=this.hsb2rgb(i.h,i.s,i.b);return i.h+=.075,i.h>1&&(i.h=0,i.s-=.2,i.s<=0&&(this.getColor.start={h:0,s:1,b:i.b})),s.hex},o.getColor.reset=function(){delete this.start},o.parsePathString=function(t){if(!t)return null;var i=Yt(t);if(i.arr)return Ht(i.arr);var s={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[];return o.is(t,mt)&&o.is(t[0],mt)&&(n=Ht(t)),n.length||Y(t).replace(gt,function(l,p,m){var v=[],x=p.toLowerCase();if(m.replace(vt,function(_,D){D&&v.push(+D)}),x=="m"&&v.length>2&&(n.push([p][R](v.splice(0,2))),x="l",p=p=="m"?"l":"L"),x=="r")n.push([p][R](v));else for(;v.length>=s[x]&&(n.push([p][R](v.splice(0,s[x]))),s[x]););}),n.toString=o._path2string,i.arr=Ht(n),n},o.parseTransformString=Rt(function(t){if(!t)return null;var i=[];return o.is(t,mt)&&o.is(t[0],mt)&&(i=Ht(t)),i.length||Y(t).replace(yt,function(s,n,l){var p=[];at.call(n),l.replace(vt,function(m,v){v&&p.push(+v)}),i.push([n][R](p))}),i.toString=o._path2string,i},this,function(t){if(!t)return t;for(var i=[],s=0;s<t.length;s++){for(var n=[],l=0;l<t[s].length;l++)n.push(t[s][l]);i.push(n)}return i});var Yt=function(t){var i=Yt.ps=Yt.ps||{};return i[t]?i[t].sleep=100:i[t]={sleep:100},setTimeout(function(){for(var s in i)i[Q](s)&&s!=t&&(i[s].sleep--,!i[s].sleep&&delete i[s])}),i[t]};function pe(t,i,s,n,l){return t*(t*(-3*i+9*s-9*n+3*l)+6*i-12*s+6*n)-3*i+3*s}function Vt(t,i,s,n,l,p,m,v,x){x==null&&(x=1);for(var _=(x=x>1?1:x<0?0:x)/2,D=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],H=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],M=0,L=0;L<12;L++){var A=_*D[L]+_,F=pe(A,t,s,l,m),P=pe(A,i,n,p,v),I=F*F+P*P;M+=H[L]*K.sqrt(I)}return _*M}function Ee(t,i,s,n,l,p,m,v){if(!(st(t,s)<it(l,m)||it(t,s)>st(l,m)||st(i,n)<it(p,v)||it(i,n)>st(p,v))){var x=(t-s)*(p-v)-(i-n)*(l-m);if(x){var _=((t*n-i*s)*(l-m)-(t-s)*(l*v-p*m))/x,D=((t*n-i*s)*(p-v)-(i-n)*(l*v-p*m))/x,H=+_.toFixed(2),M=+D.toFixed(2);if(!(H<+it(t,s).toFixed(2)||H>+st(t,s).toFixed(2)||H<+it(l,m).toFixed(2)||H>+st(l,m).toFixed(2)||M<+it(i,n).toFixed(2)||M>+st(i,n).toFixed(2)||M<+it(p,v).toFixed(2)||M>+st(p,v).toFixed(2)))return{x:_,y:D}}}}function fe(t,i,s){var n=o.bezierBBox(t),l=o.bezierBBox(i);if(!o.isBBoxIntersect(n,l))return s?0:[];for(var p=Vt.apply(0,t),m=Vt.apply(0,i),v=st(~~(p/5),1),x=st(~~(m/5),1),_=[],D=[],H={},M=s?0:[],L=0;L<v+1;L++){var A=o.findDotsAtSegment.apply(o,t.concat(L/v));_.push({x:A.x,y:A.y,t:L/v})}for(L=0;L<x+1;L++)A=o.findDotsAtSegment.apply(o,i.concat(L/x)),D.push({x:A.x,y:A.y,t:L/x});for(L=0;L<v;L++)for(var F=0;F<x;F++){var P=_[L],I=_[L+1],Z=D[F],O=D[F+1],X=_t(I.x-P.x)<.001?"y":"x",$=_t(O.x-Z.x)<.001?"y":"x",dt=Ee(P.x,P.y,I.x,I.y,Z.x,Z.y,O.x,O.y);if(dt){if(H[dt.x.toFixed(4)]==dt.y.toFixed(4))continue;H[dt.x.toFixed(4)]=dt.y.toFixed(4);var ot=P.t+_t((dt[X]-P[X])/(I[X]-P[X]))*(I.t-P.t),ut=Z.t+_t((dt[$]-Z[$])/(O[$]-Z[$]))*(O.t-Z.t);ot>=0&&ot<=1.001&&ut>=0&&ut<=1.001&&(s?M++:M.push({x:dt.x,y:dt.y,t1:it(ot,1),t2:it(ut,1)}))}}return M}function ke(t,i,s){t=o._path2curve(t),i=o._path2curve(i);for(var n,l,p,m,v,x,_,D,H,M,L=s?0:[],A=0,F=t.length;A<F;A++){var P=t[A];if(P[0]=="M")n=v=P[1],l=x=P[2];else{P[0]=="C"?(H=[n,l].concat(P.slice(1)),n=H[6],l=H[7]):(H=[n,l,n,l,v,x,v,x],n=v,l=x);for(var I=0,Z=i.length;I<Z;I++){var O=i[I];if(O[0]=="M")p=_=O[1],m=D=O[2];else{O[0]=="C"?(M=[p,m].concat(O.slice(1)),p=M[6],m=M[7]):(M=[p,m,p,m,_,D,_,D],p=_,m=D);var X=fe(H,M,s);if(s)L+=X;else{for(var $=0,dt=X.length;$<dt;$++)X[$].segment1=A,X[$].segment2=I,X[$].bez1=H,X[$].bez2=M;L=L.concat(X)}}}}}return L}o.findDotsAtSegment=function(t,i,s,n,l,p,m,v,x){var _=1-x,D=Lt(_,3),H=Lt(_,2),M=x*x,L=M*x,A=D*t+3*H*x*s+3*_*x*x*l+L*m,F=D*i+3*H*x*n+3*_*x*x*p+L*v,P=t+2*x*(s-t)+M*(l-2*s+t),I=i+2*x*(n-i)+M*(p-2*n+i),Z=s+2*x*(l-s)+M*(m-2*l+s),O=n+2*x*(p-n)+M*(v-2*p+n),X=_*t+x*s,$=_*i+x*n,dt=_*l+x*m,ot=_*p+x*v,ut=90-180*K.atan2(P-Z,I-O)/Dt;return(P>Z||I<O)&&(ut+=180),{x:A,y:F,m:{x:P,y:I},n:{x:Z,y:O},start:{x:X,y:$},end:{x:dt,y:ot},alpha:ut}},o.bezierBBox=function(t,i,s,n,l,p,m,v){o.is(t,"array")||(t=[t,i,s,n,l,p,m,v]);var x=Me.apply(null,t);return{x:x.min.x,y:x.min.y,x2:x.max.x,y2:x.max.y,width:x.max.x-x.min.x,height:x.max.y-x.min.y}},o.isPointInsideBBox=function(t,i,s){return i>=t.x&&i<=t.x2&&s>=t.y&&s<=t.y2},o.isBBoxIntersect=function(t,i){var s=o.isPointInsideBBox;return s(i,t.x,t.y)||s(i,t.x2,t.y)||s(i,t.x,t.y2)||s(i,t.x2,t.y2)||s(t,i.x,i.y)||s(t,i.x2,i.y)||s(t,i.x,i.y2)||s(t,i.x2,i.y2)||(t.x<i.x2&&t.x>i.x||i.x<t.x2&&i.x>t.x)&&(t.y<i.y2&&t.y>i.y||i.y<t.y2&&i.y>t.y)},o.pathIntersection=function(t,i){return ke(t,i)},o.pathIntersectionNumber=function(t,i){return ke(t,i,1)},o.isPointInsidePath=function(t,i,s){var n=o.pathBBox(t);return o.isPointInsideBBox(n,i,s)&&ke(t,[["M",i,s],["H",n.x2+10]],1)%2==1},o._removedFactory=function(t){return function(){a("raphael.log",null,"Raphaël: you are calling to method “"+t+"” of removed object",t)}};var Qt=o.pathBBox=function(t){var i=Yt(t);if(i.bbox)return Pt(i.bbox);if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var s,n=0,l=0,p=[],m=[],v=0,x=(t=Ce(t)).length;v<x;v++)if((s=t[v])[0]=="M")n=s[1],l=s[2],p.push(n),m.push(l);else{var _=Me(n,l,s[1],s[2],s[3],s[4],s[5],s[6]);p=p[R](_.min.x,_.max.x),m=m[R](_.min.y,_.max.y),n=s[5],l=s[6]}var D=it[U](0,p),H=it[U](0,m),M=st[U](0,p),L=st[U](0,m),A=M-D,F=L-H,P={x:D,y:H,x2:M,y2:L,width:A,height:F,cx:D+A/2,cy:H+F/2};return i.bbox=Pt(P),P},Ht=function(t){var i=Pt(t);return i.toString=o._path2string,i},si=o._pathToRelative=function(t){var i=Yt(t);if(i.rel)return Ht(i.rel);o.is(t,mt)&&o.is(t&&t[0],mt)||(t=o.parsePathString(t));var s=[],n=0,l=0,p=0,m=0,v=0;t[0][0]=="M"&&(p=n=t[0][1],m=l=t[0][2],v++,s.push(["M",n,l]));for(var x=v,_=t.length;x<_;x++){var D=s[x]=[],H=t[x];if(H[0]!=at.call(H[0]))switch(D[0]=at.call(H[0]),D[0]){case"a":D[1]=H[1],D[2]=H[2],D[3]=H[3],D[4]=H[4],D[5]=H[5],D[6]=+(H[6]-n).toFixed(3),D[7]=+(H[7]-l).toFixed(3);break;case"v":D[1]=+(H[1]-l).toFixed(3);break;case"m":p=H[1],m=H[2];default:for(var M=1,L=H.length;M<L;M++)D[M]=+(H[M]-(M%2?n:l)).toFixed(3)}else{D=s[x]=[],H[0]=="m"&&(p=H[1]+n,m=H[2]+l);for(var A=0,F=H.length;A<F;A++)s[x][A]=H[A]}var P=s[x].length;switch(s[x][0]){case"z":n=p,l=m;break;case"h":n+=+s[x][P-1];break;case"v":l+=+s[x][P-1];break;default:n+=+s[x][P-2],l+=+s[x][P-1]}}return s.toString=o._path2string,i.rel=Ht(s),s},ge=o._pathToAbsolute=function(t){var i=Yt(t);if(i.abs)return Ht(i.abs);if(o.is(t,mt)&&o.is(t&&t[0],mt)||(t=o.parsePathString(t)),!t||!t.length)return[["M",0,0]];var s=[],n=0,l=0,p=0,m=0,v=0;t[0][0]=="M"&&(p=n=+t[0][1],m=l=+t[0][2],v++,s[0]=["M",n,l]);for(var x,_,D=t.length==3&&t[0][0]=="M"&&t[1][0].toUpperCase()=="R"&&t[2][0].toUpperCase()=="Z",H=v,M=t.length;H<M;H++){if(s.push(x=[]),(_=t[H])[0]!=N.call(_[0]))switch(x[0]=N.call(_[0]),x[0]){case"A":x[1]=_[1],x[2]=_[2],x[3]=_[3],x[4]=_[4],x[5]=_[5],x[6]=+(_[6]+n),x[7]=+(_[7]+l);break;case"V":x[1]=+_[1]+l;break;case"H":x[1]=+_[1]+n;break;case"R":for(var L=[n,l][R](_.slice(1)),A=2,F=L.length;A<F;A++)L[A]=+L[A]+n,L[++A]=+L[A]+l;s.pop(),s=s[R](ue(L,D));break;case"M":p=+_[1]+n,m=+_[2]+l;default:for(A=1,F=_.length;A<F;A++)x[A]=+_[A]+(A%2?n:l)}else if(_[0]=="R")L=[n,l][R](_.slice(1)),s.pop(),s=s[R](ue(L,D)),x=["R"][R](_.slice(-2));else for(var P=0,I=_.length;P<I;P++)x[P]=_[P];switch(x[0]){case"Z":n=p,l=m;break;case"H":n=x[1];break;case"V":l=x[1];break;case"M":p=x[x.length-2],m=x[x.length-1];default:n=x[x.length-2],l=x[x.length-1]}}return s.toString=o._path2string,i.abs=Ht(s),s},ve=function(t,i,s,n){return[t,i,s,n,s,n]},Jt=function(t,i,s,n,l,p){return[1/3*t+2/3*s,1/3*i+2/3*n,1/3*l+2/3*s,1/3*p+2/3*n,l,p]},Ie=function(t,i,s,n,l,p,m,v,x,_){var D,H=120*Dt/180,M=Dt/180*(+l||0),L=[],A=Rt(function(Si,_i,ze){return{x:Si*K.cos(ze)-_i*K.sin(ze),y:Si*K.sin(ze)+_i*K.cos(ze)}});if(_)ot=_[0],ut=_[1],$=_[2],dt=_[3];else{t=(D=A(t,i,-M)).x,i=D.y,v=(D=A(v,x,-M)).x,x=D.y;var F=(t-v)/2,P=(i-x)/2,I=F*F/(s*s)+P*P/(n*n);I>1&&(s*=I=K.sqrt(I),n*=I);var Z=s*s,O=n*n,X=(p==m?-1:1)*K.sqrt(_t((Z*O-Z*P*P-O*F*F)/(Z*P*P+O*F*F))),$=X*s*P/n+(t+v)/2,dt=X*-n*F/s+(i+x)/2,ot=K.asin(((i-dt)/n).toFixed(9)),ut=K.asin(((x-dt)/n).toFixed(9));(ot=t<$?Dt-ot:ot)<0&&(ot=2*Dt+ot),(ut=v<$?Dt-ut:ut)<0&&(ut=2*Dt+ut),m&&ot>ut&&(ot-=2*Dt),!m&&ut>ot&&(ut-=2*Dt)}var ye=ut-ot;if(_t(ye)>H){var Le=ut,Ft=v,Xt=x;ut=ot+H*(m&&ut>ot?1:-1),v=$+s*K.cos(ut),x=dt+n*K.sin(ut),L=Ie(v,x,s,n,l,0,m,Ft,Xt,[ut,Le,$,dt])}ye=ut-ot;var xe=K.cos(ot),be=K.sin(ot),Ae=K.cos(ut),qt=K.sin(ut),oe=K.tan(ye/4),Pe=4/3*s*oe,mi=4/3*n*oe,yi=[t,i],we=[t+Pe*be,i-mi*xe],xi=[v+Pe*qt,x-mi*Ae],bi=[v,x];if(we[0]=2*yi[0]-we[0],we[1]=2*yi[1]-we[1],_)return[we,xi,bi][R](L);for(var wi=[],ee=0,ir=(L=[we,xi,bi][R](L).join()[tt](",")).length;ee<ir;ee++)wi[ee]=ee%2?A(L[ee-1],L[ee],M).y:A(L[ee],L[ee+1],M).x;return wi},re=function(t,i,s,n,l,p,m,v,x){var _=1-x;return{x:Lt(_,3)*t+3*Lt(_,2)*x*s+3*_*x*x*l+Lt(x,3)*m,y:Lt(_,3)*i+3*Lt(_,2)*x*n+3*_*x*x*p+Lt(x,3)*v}},Me=Rt(function(t,i,s,n,l,p,m,v){var x,_=l-2*s+t-(m-2*l+s),D=2*(s-t)-2*(l-s),H=t-s,M=(-D+K.sqrt(D*D-4*_*H))/2/_,L=(-D-K.sqrt(D*D-4*_*H))/2/_,A=[i,v],F=[t,m];return _t(M)>"1e12"&&(M=.5),_t(L)>"1e12"&&(L=.5),M>0&&M<1&&(x=re(t,i,s,n,l,p,m,v,M),F.push(x.x),A.push(x.y)),L>0&&L<1&&(x=re(t,i,s,n,l,p,m,v,L),F.push(x.x),A.push(x.y)),_=p-2*n+i-(v-2*p+n),H=i-n,M=(-(D=2*(n-i)-2*(p-n))+K.sqrt(D*D-4*_*H))/2/_,L=(-D-K.sqrt(D*D-4*_*H))/2/_,_t(M)>"1e12"&&(M=.5),_t(L)>"1e12"&&(L=.5),M>0&&M<1&&(x=re(t,i,s,n,l,p,m,v,M),F.push(x.x),A.push(x.y)),L>0&&L<1&&(x=re(t,i,s,n,l,p,m,v,L),F.push(x.x),A.push(x.y)),{min:{x:it[U](0,F),y:it[U](0,A)},max:{x:st[U](0,F),y:st[U](0,A)}}}),Ce=o._path2curve=Rt(function(t,i){var s=!i&&Yt(t);if(!i&&s.curve)return Ht(s.curve);for(var n=ge(t),l=i&&ge(i),p={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},m={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},v=function(X,$,dt){var ot,ut;if(!X)return["C",$.x,$.y,$.x,$.y,$.x,$.y];switch(!(X[0]in{T:1,Q:1})&&($.qx=$.qy=null),X[0]){case"M":$.X=X[1],$.Y=X[2];break;case"A":X=["C"][R](Ie[U](0,[$.x,$.y][R](X.slice(1))));break;case"S":dt=="C"||dt=="S"?(ot=2*$.x-$.bx,ut=2*$.y-$.by):(ot=$.x,ut=$.y),X=["C",ot,ut][R](X.slice(1));break;case"T":dt=="Q"||dt=="T"?($.qx=2*$.x-$.qx,$.qy=2*$.y-$.qy):($.qx=$.x,$.qy=$.y),X=["C"][R](Jt($.x,$.y,$.qx,$.qy,X[1],X[2]));break;case"Q":$.qx=X[1],$.qy=X[2],X=["C"][R](Jt($.x,$.y,X[1],X[2],X[3],X[4]));break;case"L":X=["C"][R](ve($.x,$.y,X[1],X[2]));break;case"H":X=["C"][R](ve($.x,$.y,X[1],$.y));break;case"V":X=["C"][R](ve($.x,$.y,$.x,X[1]));break;case"Z":X=["C"][R](ve($.x,$.y,$.X,$.Y))}return X},x=function(X,$){if(X[$].length>7){X[$].shift();for(var dt=X[$];dt.length;)D[$]="A",l&&(H[$]="A"),X.splice($++,0,["C"][R](dt.splice(0,6)));X.splice($,1),F=st(n.length,l&&l.length||0)}},_=function(X,$,dt,ot,ut){X&&$&&X[ut][0]=="M"&&$[ut][0]!="M"&&($.splice(ut,0,["M",ot.x,ot.y]),dt.bx=0,dt.by=0,dt.x=X[ut][1],dt.y=X[ut][2],F=st(n.length,l&&l.length||0))},D=[],H=[],M="",L="",A=0,F=st(n.length,l&&l.length||0);A<F;A++){n[A]&&(M=n[A][0]),M!="C"&&(D[A]=M,A&&(L=D[A-1])),n[A]=v(n[A],p,L),D[A]!="A"&&M=="C"&&(D[A]="C"),x(n,A),l&&(l[A]&&(M=l[A][0]),M!="C"&&(H[A]=M,A&&(L=H[A-1])),l[A]=v(l[A],m,L),H[A]!="A"&&M=="C"&&(H[A]="C"),x(l,A)),_(n,l,p,m,A),_(l,n,m,p,A);var P=n[A],I=l&&l[A],Z=P.length,O=l&&I.length;p.x=P[Z-2],p.y=P[Z-1],p.bx=S(P[Z-4])||p.x,p.by=S(P[Z-3])||p.y,m.bx=l&&(S(I[O-4])||m.x),m.by=l&&(S(I[O-3])||m.y),m.x=l&&I[O-2],m.y=l&&I[O-1]}return l||(s.curve=Ht(n)),l?[n,l]:n},null,Ht),Re=(o._parseDots=Rt(function(t){for(var i=[],s=0,n=t.length;s<n;s++){var l={},p=t[s].match(/^([^:]*):?([\d\.]*)/);if(l.color=o.getRGB(p[1]),l.color.error)return null;l.opacity=l.color.opacity,l.color=l.color.hex,p[2]&&(l.offset=p[2]+"%"),i.push(l)}for(s=1,n=i.length-1;s<n;s++)if(!i[s].offset){for(var m=S(i[s-1].offset||0),v=0,x=s+1;x<n;x++)if(i[x].offset){v=i[x].offset;break}v||(v=100,x=n);for(var _=((v=S(v))-m)/(x-s+1);s<x;s++)m+=_,i[s].offset=m+"%"}return i}),o._tear=function(t,i){t==i.top&&(i.top=t.prev),t==i.bottom&&(i.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),qi=(o._tofront=function(t,i){i.top!==t&&(Re(t,i),t.next=null,t.prev=i.top,i.top.next=t,i.top=t)},o._toback=function(t,i){i.bottom!==t&&(Re(t,i),t.next=i.bottom,t.prev=null,i.bottom.prev=t,i.bottom=t)},o._insertafter=function(t,i,s){Re(t,s),i==s.top&&(s.top=t),i.next&&(i.next.prev=t),t.next=i.next,t.prev=i,i.next=t},o._insertbefore=function(t,i,s){Re(t,s),i==s.bottom&&(s.bottom=t),i.prev&&(i.prev.next=t),t.prev=i.prev,i.prev=t,t.next=i},o.toMatrix=function(t,i){var s=Qt(t),n={_:{transform:rt},getBBox:function(){return s}};return ni(n,i),n.matrix}),ni=(o.transformPath=function(t,i){return Mt(t,qi(t,i))},o._extractTransform=function(t,i){if(i==null)return t._.transform;i=Y(i).replace(/\.{3}|\u2026/g,t._.transform||rt);var s,n,l=o.parseTransformString(i),p=0,m=1,v=1,x=t._,_=new se;if(x.transform=l||[],l)for(var D=0,H=l.length;D<H;D++){var M,L,A,F,P,I=l[D],Z=I.length,O=Y(I[0]).toLowerCase(),X=I[0]!=O,$=X?_.invert():0;O=="t"&&Z==3?X?(M=$.x(0,0),L=$.y(0,0),A=$.x(I[1],I[2]),F=$.y(I[1],I[2]),_.translate(A-M,F-L)):_.translate(I[1],I[2]):O=="r"?Z==2?(P=P||t.getBBox(1),_.rotate(I[1],P.x+P.width/2,P.y+P.height/2),p+=I[1]):Z==4&&(X?(A=$.x(I[2],I[3]),F=$.y(I[2],I[3]),_.rotate(I[1],A,F)):_.rotate(I[1],I[2],I[3]),p+=I[1]):O=="s"?Z==2||Z==3?(P=P||t.getBBox(1),_.scale(I[1],I[Z-1],P.x+P.width/2,P.y+P.height/2),m*=I[1],v*=I[Z-1]):Z==5&&(X?(A=$.x(I[3],I[4]),F=$.y(I[3],I[4]),_.scale(I[1],I[2],A,F)):_.scale(I[1],I[2],I[3],I[4]),m*=I[1],v*=I[2]):O=="m"&&Z==7&&_.add(I[1],I[2],I[3],I[4],I[5],I[6]),x.dirtyT=1,t.matrix=_}t.matrix=_,x.sx=m,x.sy=v,x.deg=p,x.dx=s=_.e,x.dy=n=_.f,m==1&&v==1&&!p&&x.bbox?(x.bbox.x+=+s,x.bbox.y+=+n):x.dirtyT=1}),oi=function(t){var i=t[0];switch(i.toLowerCase()){case"t":return[i,0,0];case"m":return[i,1,0,0,1,0,0];case"r":return t.length==4?[i,0,t[2],t[3]]:[i,0];case"s":return t.length==5?[i,1,1,t[3],t[4]]:t.length==3?[i,1,1]:[i,1]}},Ui=o._equaliseTransform=function(t,i){i=Y(i).replace(/\.{3}|\u2026/g,t),t=o.parseTransformString(t)||[],i=o.parseTransformString(i)||[];for(var s,n,l,p,m=st(t.length,i.length),v=[],x=[],_=0;_<m;_++){if(l=t[_]||oi(i[_]),p=i[_]||oi(l),l[0]!=p[0]||l[0].toLowerCase()=="r"&&(l[2]!=p[2]||l[3]!=p[3])||l[0].toLowerCase()=="s"&&(l[3]!=p[3]||l[4]!=p[4]))return;for(v[_]=[],x[_]=[],s=0,n=st(l.length,p.length);s<n;s++)s in l&&(v[_][s]=l[s]),s in p&&(x[_][s]=p[s])}return{from:v,to:x}};function se(t,i,s,n,l,p){t!=null?(this.a=+t,this.b=+i,this.c=+s,this.d=+n,this.e=+l,this.f=+p):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}o._getContainer=function(t,i,s,n){var l;if((l=n!=null||o.is(t,"object")?t:q.doc.getElementById(t))!=null)return l.tagName?i==null?{container:l,width:l.style.pixelWidth||l.offsetWidth,height:l.style.pixelHeight||l.offsetHeight}:{container:l,width:i,height:s}:{container:1,x:t,y:i,width:s,height:n}},o.pathToRelative=si,o._engine={},o.path2curve=Ce,o.matrix=function(t,i,s,n,l,p){return new se(t,i,s,n,l,p)},function(t){function i(n){return n[0]*n[0]+n[1]*n[1]}function s(n){var l=K.sqrt(i(n));n[0]&&(n[0]/=l),n[1]&&(n[1]/=l)}t.add=function(n,l,p,m,v,x){var _,D,H,M,L=[[],[],[]],A=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],F=[[n,p,v],[l,m,x],[0,0,1]];for(n&&n instanceof se&&(F=[[n.a,n.c,n.e],[n.b,n.d,n.f],[0,0,1]]),_=0;_<3;_++)for(D=0;D<3;D++){for(M=0,H=0;H<3;H++)M+=A[_][H]*F[H][D];L[_][D]=M}this.a=L[0][0],this.b=L[1][0],this.c=L[0][1],this.d=L[1][1],this.e=L[0][2],this.f=L[1][2]},t.invert=function(){var n=this,l=n.a*n.d-n.b*n.c;return new se(n.d/l,-n.b/l,-n.c/l,n.a/l,(n.c*n.f-n.d*n.e)/l,(n.b*n.e-n.a*n.f)/l)},t.clone=function(){return new se(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(n,l){this.add(1,0,0,1,n,l)},t.scale=function(n,l,p,m){l==null&&(l=n),(p||m)&&this.add(1,0,0,1,p,m),this.add(n,0,0,l,0,0),(p||m)&&this.add(1,0,0,1,-p,-m)},t.rotate=function(n,l,p){n=o.rad(n),l=l||0,p=p||0;var m=+K.cos(n).toFixed(9),v=+K.sin(n).toFixed(9);this.add(m,v,-v,m,l,p),this.add(1,0,0,1,-l,-p)},t.x=function(n,l){return n*this.a+l*this.c+this.e},t.y=function(n,l){return n*this.b+l*this.d+this.f},t.get=function(n){return+this[Y.fromCharCode(97+n)].toFixed(4)},t.toString=function(){return o.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var n={};n.dx=this.e,n.dy=this.f;var l=[[this.a,this.c],[this.b,this.d]];n.scalex=K.sqrt(i(l[0])),s(l[0]),n.shear=l[0][0]*l[1][0]+l[0][1]*l[1][1],l[1]=[l[1][0]-l[0][0]*n.shear,l[1][1]-l[0][1]*n.shear],n.scaley=K.sqrt(i(l[1])),s(l[1]),n.shear/=n.scaley;var p=-l[0][1],m=l[1][1];return m<0?(n.rotate=o.deg(K.acos(m)),p<0&&(n.rotate=360-n.rotate)):n.rotate=o.deg(K.asin(p)),n.isSimple=!(+n.shear.toFixed(9)||n.scalex.toFixed(9)!=n.scaley.toFixed(9)&&n.rotate),n.isSuperSimple=!+n.shear.toFixed(9)&&n.scalex.toFixed(9)==n.scaley.toFixed(9)&&!n.rotate,n.noRotation=!+n.shear.toFixed(9)&&!n.rotate,n},t.toTransformString=function(n){var l=n||this[tt]();return l.isSimple?(l.scalex=+l.scalex.toFixed(4),l.scaley=+l.scaley.toFixed(4),l.rotate=+l.rotate.toFixed(4),(l.dx||l.dy?"t"+[l.dx,l.dy]:rt)+(l.scalex!=1||l.scaley!=1?"s"+[l.scalex,l.scaley,0,0]:rt)+(l.rotate?"r"+[l.rotate,0,0]:rt)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(se.prototype);for(var Ki=function(){this.returnValue=!1},Zi=function(){return this.originalEvent.preventDefault()},Qi=function(){this.cancelBubble=!0},Ji=function(){return this.originalEvent.stopPropagation()},ai=function(t){var i=q.doc.documentElement.scrollTop||q.doc.body.scrollTop,s=q.doc.documentElement.scrollLeft||q.doc.body.scrollLeft;return{x:t.clientX+s,y:t.clientY+i}},tr=q.doc.addEventListener?function(t,i,s,n){var l=function(m){var v=ai(m);return s.call(n,m,v.x,v.y)};if(t.addEventListener(i,l,!1),ct&&wt[i]){var p=function(m){for(var v=ai(m),x=m,_=0,D=m.targetTouches&&m.targetTouches.length;_<D;_++)if(m.targetTouches[_].target==t){(m=m.targetTouches[_]).originalEvent=x,m.preventDefault=Zi,m.stopPropagation=Ji;break}return s.call(n,m,v.x,v.y)};t.addEventListener(wt[i],p,!1)}return function(){return t.removeEventListener(i,l,!1),ct&&wt[i]&&t.removeEventListener(wt[i],p,!1),!0}}:q.doc.attachEvent?function(t,i,s,n){var l=function(p){p=p||q.win.event;var m=q.doc.documentElement.scrollTop||q.doc.body.scrollTop,v=q.doc.documentElement.scrollLeft||q.doc.body.scrollLeft,x=p.clientX+v,_=p.clientY+m;return p.preventDefault=p.preventDefault||Ki,p.stopPropagation=p.stopPropagation||Qi,s.call(n,p,x,_)};return t.attachEvent("on"+i,l),function(){return t.detachEvent("on"+i,l),!0}}:void 0,te=[],Ge=function(t){for(var i,s=t.clientX,n=t.clientY,l=q.doc.documentElement.scrollTop||q.doc.body.scrollTop,p=q.doc.documentElement.scrollLeft||q.doc.body.scrollLeft,m=te.length;m--;){if(i=te[m],ct&&t.touches){for(var v,x=t.touches.length;x--;)if((v=t.touches[x]).identifier==i.el._drag.id){s=v.clientX,n=v.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var _,D=i.el.node,H=D.nextSibling,M=D.parentNode,L=D.style.display;q.win.opera&&M.removeChild(D),D.style.display="none",_=i.el.paper.getElementByPoint(s,n),D.style.display=L,q.win.opera&&(H?M.insertBefore(D,H):M.appendChild(D)),_&&a("raphael.drag.over."+i.el.id,i.el,_),s+=p,n+=l,a("raphael.drag.move."+i.el.id,i.move_scope||i.el,s-i.el._drag.x,n-i.el._drag.y,s,n,t)}},Ve=function(t){o.unmousemove(Ge).unmouseup(Ve);for(var i,s=te.length;s--;)(i=te[s]).el._drag={},a("raphael.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,t);te=[]},Et=o.el={},hi=nt.length;hi--;)(function(t){o[t]=Et[t]=function(i,s){return o.is(i,"function")&&(this.events=this.events||[],this.events.push({name:t,f:i,unbind:tr(this.shape||this.node||q.doc,t,i,s||this)})),this},o["un"+t]=Et["un"+t]=function(i){for(var s=this.events||[],n=s.length;n--;)s[n].name!=t||!o.is(i,"undefined")&&s[n].f!=i||(s[n].unbind(),s.splice(n,1),!s.length&&delete this.events);return this}})(nt[hi]);Et.data=function(t,i){var s=kt[this.id]=kt[this.id]||{};if(arguments.length==0)return s;if(arguments.length==1){if(o.is(t,"object")){for(var n in t)t[Q](n)&&this.data(n,t[n]);return this}return a("raphael.data.get."+this.id,this,s[t],t),s[t]}return s[t]=i,a("raphael.data.set."+this.id,this,i,t),this},Et.removeData=function(t){return t==null?delete kt[this.id]:kt[this.id]&&delete kt[this.id][t],this},Et.getData=function(){return Pt(kt[this.id]||{})},Et.hover=function(t,i,s,n){return this.mouseover(t,s).mouseout(i,n||s)},Et.unhover=function(t,i){return this.unmouseover(t).unmouseout(i)};var me=[];Et.drag=function(t,i,s,n,l,p){function m(v){(v.originalEvent||v).preventDefault();var x=v.clientX,_=v.clientY,D=q.doc.documentElement.scrollTop||q.doc.body.scrollTop,H=q.doc.documentElement.scrollLeft||q.doc.body.scrollLeft;if(this._drag.id=v.identifier,ct&&v.touches){for(var M,L=v.touches.length;L--;)if(M=v.touches[L],this._drag.id=M.identifier,M.identifier==this._drag.id){x=M.clientX,_=M.clientY;break}}this._drag.x=x+H,this._drag.y=_+D,!te.length&&o.mousemove(Ge).mouseup(Ve),te.push({el:this,move_scope:n,start_scope:l,end_scope:p}),i&&a.on("raphael.drag.start."+this.id,i),t&&a.on("raphael.drag.move."+this.id,t),s&&a.on("raphael.drag.end."+this.id,s),a("raphael.drag.start."+this.id,l||n||this,this._drag.x,this._drag.y,v)}return this._drag={},me.push({el:this,start:m}),this.mousedown(m),this},Et.onDragOver=function(t){t?a.on("raphael.drag.over."+this.id,t):a.unbind("raphael.drag.over."+this.id)},Et.undrag=function(){for(var t=me.length;t--;)me[t].el==this&&(this.unmousedown(me[t].start),me.splice(t,1),a.unbind("raphael.drag.*."+this.id));!me.length&&o.unmousemove(Ge).unmouseup(Ve),te=[]},C.circle=function(t,i,s){var n=o._engine.circle(this,t||0,i||0,s||0);return this.__set__&&this.__set__.push(n),n},C.rect=function(t,i,s,n,l){var p=o._engine.rect(this,t||0,i||0,s||0,n||0,l||0);return this.__set__&&this.__set__.push(p),p},C.ellipse=function(t,i,s,n){var l=o._engine.ellipse(this,t||0,i||0,s||0,n||0);return this.__set__&&this.__set__.push(l),l},C.path=function(t){t&&!o.is(t,"string")&&!o.is(t[0],mt)&&(t+=rt);var i=o._engine.path(o.format[U](o,arguments),this);return this.__set__&&this.__set__.push(i),i},C.image=function(t,i,s,n,l){var p=o._engine.image(this,t||"about:blank",i||0,s||0,n||0,l||0);return this.__set__&&this.__set__.push(p),p},C.text=function(t,i,s){var n=o._engine.text(this,t||0,i||0,Y(s));return this.__set__&&this.__set__.push(n),n},C.set=function(t){!o.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var i=new Be(t);return this.__set__&&this.__set__.push(i),i.paper=this,i.type="set",i},C.setStart=function(t){this.__set__=t||this.set()},C.setFinish=function(t){var i=this.__set__;return delete this.__set__,i},C.getSize=function(){var t=this.canvas.parentNode;return{width:t.offsetWidth,height:t.offsetHeight}},C.setSize=function(t,i){return o._engine.setSize.call(this,t,i)},C.setViewBox=function(t,i,s,n,l){return o._engine.setViewBox.call(this,t,i,s,n,l)},C.top=C.bottom=null,C.raphael=o;function li(){return this.x+pt+this.y+pt+this.width+" × "+this.height}C.getElementByPoint=function(t,i){var s,n,l,p,m,v,x,_=this.canvas,D=q.doc.elementFromPoint(t,i);if(q.win.opera&&D.tagName=="svg"){var H=(n=(s=_).getBoundingClientRect(),l=s.ownerDocument,p=l.body,m=l.documentElement,v=m.clientTop||p.clientTop||0,x=m.clientLeft||p.clientLeft||0,{y:n.top+(q.win.pageYOffset||m.scrollTop||p.scrollTop)-v,x:n.left+(q.win.pageXOffset||m.scrollLeft||p.scrollLeft)-x}),M=_.createSVGRect();M.x=t-H.x,M.y=i-H.y,M.width=M.height=1;var L=_.getIntersectionList(M,null);L.length&&(D=L[L.length-1])}if(!D)return null;for(;D.parentNode&&D!=_.parentNode&&!D.raphael;)D=D.parentNode;return D==this.canvas.parentNode&&(D=_),D=D&&D.raphael?this.getById(D.raphaelid):null},C.getElementsByBBox=function(t){var i=this.set();return this.forEach(function(s){o.isBBoxIntersect(s.getBBox(),t)&&i.push(s)}),i},C.getById=function(t){for(var i=this.bottom;i;){if(i.id==t)return i;i=i.next}return null},C.forEach=function(t,i){for(var s=this.bottom;s;){if(t.call(i,s)===!1)return this;s=s.next}return this},C.getElementsByPoint=function(t,i){var s=this.set();return this.forEach(function(n){n.isPointInside(t,i)&&s.push(n)}),s},Et.isPointInside=function(t,i){var s=this.realPath=Tt[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(s=o.transformPath(s,this.attr("transform"))),o.isPointInsidePath(s,t,i)},Et.getBBox=function(t){if(this.removed)return{};var i=this._;return t?(!i.dirty&&i.bboxwt||(this.realPath=Tt[this.type](this),i.bboxwt=Qt(this.realPath),i.bboxwt.toString=li,i.dirty=0),i.bboxwt):((i.dirty||i.dirtyT||!i.bbox)&&(!i.dirty&&this.realPath||(i.bboxwt=0,this.realPath=Tt[this.type](this)),i.bbox=Qt(Mt(this.realPath,this.matrix)),i.bbox.toString=li,i.dirty=i.dirtyT=0),i.bbox)},Et.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},Et.glow=function(t){if(this.type=="text")return null;var i={width:((t=t||{}).width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity==null?.5:t.opacity,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},s=i.width/2,n=this.paper,l=n.set(),p=this.realPath||Tt[this.type](this);p=this.matrix?Mt(p,this.matrix):p;for(var m=1;m<s+1;m++)l.push(n.path(p).attr({stroke:i.color,fill:i.fill?i.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(i.width/s*m).toFixed(3),opacity:+(i.opacity/s).toFixed(3)}));return l.insertBefore(this).translate(i.offsetx,i.offsety)};var Xe=function(t,i,s,n,l,p,m,v,x){return x==null?Vt(t,i,s,n,l,p,m,v):o.findDotsAtSegment(t,i,s,n,l,p,m,v,function(_,D,H,M,L,A,F,P,I){if(!(I<0||Vt(_,D,H,M,L,A,F,P)<I)){var Z,O=.5,X=1-O;for(Z=Vt(_,D,H,M,L,A,F,P,X);_t(Z-I)>.01;)Z=Vt(_,D,H,M,L,A,F,P,X+=(Z<I?1:-1)*(O/=2));return X}}(t,i,s,n,l,p,m,v,x))},We=function(t,i){return function(s,n,l){for(var p,m,v,x,_,D="",H={},M=0,L=0,A=(s=Ce(s)).length;L<A;L++){if((v=s[L])[0]=="M")p=+v[1],m=+v[2];else{if(M+(x=Xe(p,m,v[1],v[2],v[3],v[4],v[5],v[6]))>n){if(i&&!H.start){if(D+=["C"+(_=Xe(p,m,v[1],v[2],v[3],v[4],v[5],v[6],n-M)).start.x,_.start.y,_.m.x,_.m.y,_.x,_.y],l)return D;H.start=D,D=["M"+_.x,_.y+"C"+_.n.x,_.n.y,_.end.x,_.end.y,v[5],v[6]].join(),M+=x,p=+v[5],m=+v[6];continue}if(!t&&!i)return{x:(_=Xe(p,m,v[1],v[2],v[3],v[4],v[5],v[6],n-M)).x,y:_.y,alpha:_.alpha}}M+=x,p=+v[5],m=+v[6]}D+=v.shift()+v}return H.end=D,(_=t?M:i?H:o.findDotsAtSegment(p,m,v[0],v[1],v[2],v[3],v[4],v[5],1)).alpha&&(_={x:_.x,y:_.y,alpha:_.alpha}),_}},ci=We(1),di=We(),je=We(0,1);o.getTotalLength=ci,o.getPointAtLength=di,o.getSubpath=function(t,i,s){if(this.getTotalLength(t)-s<1e-6)return je(t,i).end;var n=je(t,s,1);return i?je(n,i).end:n},Et.getTotalLength=function(){var t=this.getPath();if(t)return this.node.getTotalLength?this.node.getTotalLength():ci(t)},Et.getPointAtLength=function(t){var i=this.getPath();if(i)return di(i,t)},Et.getPath=function(){var t,i=o._getPath[this.type];if(this.type!="text"&&this.type!="set")return i&&(t=i(this)),t},Et.getSubpath=function(t,i){var s=this.getPath();if(s)return o.getSubpath(s,t,i)};var $t=o.easing_formulas={linear:function(t){return t},"<":function(t){return Lt(t,1.7)},">":function(t){return Lt(t,.48)},"<>":function(t){var i=.48-t/1.04,s=K.sqrt(.1734+i*i),n=s-i,l=-s-i,p=Lt(_t(n),1/3)*(n<0?-1:1)+Lt(_t(l),1/3)*(l<0?-1:1)+.5;return 3*(1-p)*p*p+p*p*p},backIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},backOut:function(t){var i=1.70158;return(t-=1)*t*((i+1)*t+i)+1},elastic:function(t){return t==!!t?t:Lt(2,-10*t)*K.sin(2*Dt*(t-.075)/.3)+1},bounce:function(t){var i=7.5625,s=2.75;return t<1/s?i*t*t:t<2/s?i*(t-=1.5/s)*t+.75:t<2.5/s?i*(t-=2.25/s)*t+.9375:i*(t-=2.625/s)*t+.984375}};$t.easeIn=$t["ease-in"]=$t["<"],$t.easeOut=$t["ease-out"]=$t[">"],$t.easeInOut=$t["ease-in-out"]=$t["<>"],$t["back-in"]=$t.backIn,$t["back-out"]=$t.backOut;var xt=[],ui=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},qe=function(){for(var t=+new Date,i=0;i<xt.length;i++){var s=xt[i];if(!s.el.removed&&!s.paused){var n,l,p=t-s.start,m=s.ms,v=s.easing,x=s.from,_=s.diff,D=s.to,H=(s.t,s.el),M={},L={};if(s.initstatus?(p=(s.initstatus*s.anim.top-s.prev)/(s.percent-s.prev)*m,s.status=s.initstatus,delete s.initstatus,s.stop&&xt.splice(i--,1)):s.status=(s.prev+(s.percent-s.prev)*(p/m))/s.anim.top,!(p<0))if(p<m){var A=v(p/m);for(var F in x)if(x[Q](F)){switch(B[F]){case ft:n=+x[F]+A*m*_[F];break;case"colour":n="rgb("+[Ue(y(x[F].r+A*m*_[F].r)),Ue(y(x[F].g+A*m*_[F].g)),Ue(y(x[F].b+A*m*_[F].b))].join(",")+")";break;case"path":n=[];for(var P=0,I=x[F].length;P<I;P++){n[P]=[x[F][P][0]];for(var Z=1,O=x[F][P].length;Z<O;Z++)n[P][Z]=+x[F][P][Z]+A*m*_[F][P][Z];n[P]=n[P].join(pt)}n=n.join(pt);break;case"transform":if(_[F].real)for(n=[],P=0,I=x[F].length;P<I;P++)for(n[P]=[x[F][P][0]],Z=1,O=x[F][P].length;Z<O;Z++)n[P][Z]=x[F][P][Z]+A*m*_[F][P][Z];else{var X=function(dt){return+x[F][dt]+A*m*_[F][dt]};n=[["m",X(0),X(1),X(2),X(3),X(4),X(5)]]}break;case"csv":if(F=="clip-rect")for(n=[],P=4;P--;)n[P]=+x[F][P]+A*m*_[F][P];break;default:var $=[][R](x[F]);for(n=[],P=H.paper.customAttributes[F].length;P--;)n[P]=+$[P]+A*m*_[F][P]}M[F]=n}H.attr(M),function(dt,ot,ut){setTimeout(function(){a("raphael.anim.frame."+dt,ot,ut)})}(H.id,H,s.anim)}else{if(function(dt,ot,ut){setTimeout(function(){a("raphael.anim.frame."+ot.id,ot,ut),a("raphael.anim.finish."+ot.id,ot,ut),o.is(dt,"function")&&dt.call(ot)})}(s.callback,H,s.anim),H.attr(D),xt.splice(i--,1),s.repeat>1&&!s.next){for(l in D)D[Q](l)&&(L[l]=s.totalOrigin[l]);s.el.attr(L),Ne(s.anim,s.el,s.anim.percents[0],null,s.totalOrigin,s.repeat-1)}s.next&&!s.stop&&Ne(s.anim,s.el,s.next,null,s.totalOrigin,s.repeat)}}}xt.length&&ui(qe)},Ue=function(t){return t>255?255:t<0?0:t};function er(t,i,s,n,l,p){var m=3*i,v=3*(n-i)-m,x=1-m-v,_=3*s,D=3*(l-s)-_,H=1-_-D;function M(L){return((x*L+v)*L+m)*L}return function(L,A){var F=function(P,I){var Z,O,X,$,dt,ot;for(X=P,ot=0;ot<8;ot++){if($=M(X)-P,_t($)<I)return X;if(_t(dt=(3*x*X+2*v)*X+m)<1e-6)break;X-=$/dt}if(O=1,(X=P)<(Z=0))return Z;if(X>O)return O;for(;Z<O;){if($=M(X),_t($-P)<I)return X;P>$?Z=X:O=X,X=(O-Z)/2+Z}return X}(L,A);return((H*F+D)*F+_)*F}(t,1/(200*p))}function jt(t,i){var s=[],n={};if(this.ms=i,this.times=1,t){for(var l in t)t[Q](l)&&(n[S(l)]=t[l],s.push(S(l)));s.sort(Nt)}this.anim=n,this.top=s[s.length-1],this.percents=s}function Ne(t,i,s,n,l,p){s=S(s);var m,v,x,_,D,H,M=t.ms,L={},A={},F={};if(n)for(I=0,Z=xt.length;I<Z;I++){var P=xt[I];if(P.el.id==i.id&&P.anim==t){P.percent!=s?(xt.splice(I,1),x=1):v=P,i.attr(P.totalOrigin);break}}else n=+A;for(var I=0,Z=t.percents.length;I<Z;I++){if(t.percents[I]==s||t.percents[I]>n*t.top){s=t.percents[I],D=t.percents[I-1]||0,M=M/t.top*(s-D),_=t.percents[I+1],m=t.anim[s];break}n&&i.attr(t.anim[t.percents[I]])}if(m){if(v)v.initstatus=n,v.start=new Date-v.ms*n;else{for(var O in m)if(m[Q](O)&&(B[Q](O)||i.paper.customAttributes[Q](O)))switch(L[O]=i.attr(O),L[O]==null&&(L[O]=z[O]),A[O]=m[O],B[O]){case ft:F[O]=(A[O]-L[O])/M;break;case"colour":L[O]=o.getRGB(L[O]);var X=o.getRGB(A[O]);F[O]={r:(X.r-L[O].r)/M,g:(X.g-L[O].g)/M,b:(X.b-L[O].b)/M};break;case"path":var $=Ce(L[O],A[O]),dt=$[1];for(L[O]=$[0],F[O]=[],I=0,Z=L[O].length;I<Z;I++){F[O][I]=[0];for(var ot=1,ut=L[O][I].length;ot<ut;ot++)F[O][I][ot]=(dt[I][ot]-L[O][I][ot])/M}break;case"transform":var ye=i._,Le=Ui(ye[O],A[O]);if(Le)for(L[O]=Le.from,A[O]=Le.to,F[O]=[],F[O].real=!0,I=0,Z=L[O].length;I<Z;I++)for(F[O][I]=[L[O][I][0]],ot=1,ut=L[O][I].length;ot<ut;ot++)F[O][I][ot]=(A[O][I][ot]-L[O][I][ot])/M;else{var Ft=i.matrix||new se,Xt={_:{transform:ye.transform},getBBox:function(){return i.getBBox(1)}};L[O]=[Ft.a,Ft.b,Ft.c,Ft.d,Ft.e,Ft.f],ni(Xt,A[O]),A[O]=Xt._.transform,F[O]=[(Xt.matrix.a-Ft.a)/M,(Xt.matrix.b-Ft.b)/M,(Xt.matrix.c-Ft.c)/M,(Xt.matrix.d-Ft.d)/M,(Xt.matrix.e-Ft.e)/M,(Xt.matrix.f-Ft.f)/M]}break;case"csv":var xe=Y(m[O])[tt](V),be=Y(L[O])[tt](V);if(O=="clip-rect")for(L[O]=be,F[O]=[],I=be.length;I--;)F[O][I]=(xe[I]-L[O][I])/M;A[O]=xe;break;default:for(xe=[][R](m[O]),be=[][R](L[O]),F[O]=[],I=i.paper.customAttributes[O].length;I--;)F[O][I]=((xe[I]||0)-(be[I]||0))/M}var Ae=m.easing,qt=o.easing_formulas[Ae];if(!qt)if((qt=Y(Ae).match(c))&&qt.length==5){var oe=qt;qt=function(Pe){return er(Pe,+oe[1],+oe[2],+oe[3],+oe[4],M)}}else qt=St;if(P={anim:t,percent:s,timestamp:H=m.start||t.start||+new Date,start:H+(t.del||0),status:0,initstatus:n||0,stop:!1,ms:M,easing:qt,from:L,diff:F,to:A,el:i,callback:m.callback,prev:D,next:_,repeat:p||t.times,origin:i.attr(),totalOrigin:l},xt.push(P),n&&!v&&!x&&(P.stop=!0,P.start=new Date-M*n,xt.length==1))return qe();x&&(P.start=new Date-P.ms*n),xt.length==1&&ui(qe)}a("raphael.anim.start."+i.id,i,t)}}function pi(t){for(var i=0;i<xt.length;i++)xt[i].el.paper==t&&xt.splice(i--,1)}Et.animateWith=function(t,i,s,n,l,p){if(this.removed)return p&&p.call(this),this;var m=s instanceof jt?s:o.animation(s,n,l,p);Ne(m,this,m.percents[0],null,this.attr());for(var v=0,x=xt.length;v<x;v++)if(xt[v].anim==i&&xt[v].el==t){xt[x-1].start=xt[v].start;break}return this},Et.onAnimation=function(t){return t?a.on("raphael.anim.frame."+this.id,t):a.unbind("raphael.anim.frame."+this.id),this},jt.prototype.delay=function(t){var i=new jt(this.anim,this.ms);return i.times=this.times,i.del=+t||0,i},jt.prototype.repeat=function(t){var i=new jt(this.anim,this.ms);return i.del=this.del,i.times=K.floor(st(t,0))||1,i},o.animation=function(t,i,s,n){if(t instanceof jt)return t;!o.is(s,"function")&&s||(n=n||s||null,s=null),t=Object(t),i=+i||0;var l,p,m={};for(p in t)t[Q](p)&&S(p)!=p&&S(p)+"%"!=p&&(l=!0,m[p]=t[p]);if(l)return s&&(m.easing=s),n&&(m.callback=n),new jt({100:m},i);if(n){var v=0;for(var x in t){var _=E(x);t[Q](x)&&_>v&&(v=_)}!t[v+="%"].callback&&(t[v].callback=n)}return new jt(t,i)},Et.animate=function(t,i,s,n){if(this.removed)return n&&n.call(this),this;var l=t instanceof jt?t:o.animation(t,i,s,n);return Ne(l,this,l.percents[0],null,this.attr()),this},Et.setTime=function(t,i){return t&&i!=null&&this.status(t,it(i,t.ms)/t.ms),this},Et.status=function(t,i){var s,n,l=[],p=0;if(i!=null)return Ne(t,this,-1,it(i,1)),this;for(s=xt.length;p<s;p++)if((n=xt[p]).el.id==this.id&&(!t||n.anim==t)){if(t)return n.status;l.push({anim:n.anim,status:n.status})}return t?0:l},Et.pause=function(t){for(var i=0;i<xt.length;i++)xt[i].el.id!=this.id||t&&xt[i].anim!=t||a("raphael.anim.pause."+this.id,this,xt[i].anim)!==!1&&(xt[i].paused=!0);return this},Et.resume=function(t){for(var i=0;i<xt.length;i++)if(xt[i].el.id==this.id&&(!t||xt[i].anim==t)){var s=xt[i];a("raphael.anim.resume."+this.id,this,s.anim)!==!1&&(delete s.paused,this.status(s.anim,s.status))}return this},Et.stop=function(t){for(var i=0;i<xt.length;i++)xt[i].el.id!=this.id||t&&xt[i].anim!=t||a("raphael.anim.stop."+this.id,this,xt[i].anim)!==!1&&xt.splice(i--,1);return this},a.on("raphael.remove",pi),a.on("raphael.clear",pi),Et.toString=function(){return"Raphaël’s object"};var fi,gi,ne,vi,Be=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var i=0,s=t.length;i<s;i++)!t[i]||t[i].constructor!=Et.constructor&&t[i].constructor!=Be||(this[this.items.length]=this.items[this.items.length]=t[i],this.length++)},At=Be.prototype;for(var Ke in At.push=function(){for(var t,i,s=0,n=arguments.length;s<n;s++)!(t=arguments[s])||t.constructor!=Et.constructor&&t.constructor!=Be||(this[i=this.items.length]=this.items[i]=t,this.length++);return this},At.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},At.forEach=function(t,i){for(var s=0,n=this.items.length;s<n;s++)if(t.call(i,this.items[s],s)===!1)return this;return this},Et)Et[Q](Ke)&&(At[Ke]=function(t){return function(){var i=arguments;return this.forEach(function(s){s[t][U](s,i)})}}(Ke));return At.attr=function(t,i){if(t&&o.is(t,mt)&&o.is(t[0],"object"))for(var s=0,n=t.length;s<n;s++)this.items[s].attr(t[s]);else for(var l=0,p=this.items.length;l<p;l++)this.items[l].attr(t,i);return this},At.clear=function(){for(;this.length;)this.pop()},At.splice=function(t,i,s){t=t<0?st(this.length+t,0):t,i=st(0,it(this.length-t,i));var n,l=[],p=[],m=[];for(n=2;n<arguments.length;n++)m.push(arguments[n]);for(n=0;n<i;n++)p.push(this[t+n]);for(;n<this.length-t;n++)l.push(this[t+n]);var v=m.length;for(n=0;n<v+l.length;n++)this.items[t+n]=this[t+n]=n<v?m[n]:l[n-v];for(n=this.items.length=this.length-=i-v;this[n];)delete this[n++];return new Be(p)},At.exclude=function(t){for(var i=0,s=this.length;i<s;i++)if(this[i]==t)return this.splice(i,1),!0},At.animate=function(t,i,s,n){(o.is(s,"function")||!s)&&(n=s||null);var l,p,m=this.items.length,v=m,x=this;if(!m)return this;n&&(p=function(){!--m&&n.call(x)}),s=o.is(s,"string")?s:p;var _=o.animation(t,i,s,p);for(l=this.items[--v].animate(_);v--;)this.items[v]&&!this.items[v].removed&&this.items[v].animateWith(l,_,_),this.items[v]&&!this.items[v].removed||m--;return this},At.insertAfter=function(t){for(var i=this.items.length;i--;)this.items[i].insertAfter(t);return this},At.getBBox=function(){for(var t=[],i=[],s=[],n=[],l=this.items.length;l--;)if(!this.items[l].removed){var p=this.items[l].getBBox();t.push(p.x),i.push(p.y),s.push(p.x+p.width),n.push(p.y+p.height)}return{x:t=it[U](0,t),y:i=it[U](0,i),x2:s=st[U](0,s),y2:n=st[U](0,n),width:s-t,height:n-i}},At.clone=function(t){t=this.paper.set();for(var i=0,s=this.items.length;i<s;i++)t.push(this.items[i].clone());return t},At.toString=function(){return"Raphaël‘s set"},At.glow=function(t){var i=this.paper.set();return this.forEach(function(s,n){var l=s.glow(t);l!=null&&l.forEach(function(p,m){i.push(p)})}),i},At.isPointInside=function(t,i){var s=!1;return this.forEach(function(n){if(n.isPointInside(t,i))return s=!0,!1}),s},o.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var i={w:t.w,face:{},glyphs:{}},s=t.face["font-family"];for(var n in t.face)t.face[Q](n)&&(i.face[n]=t.face[n]);if(this.fonts[s]?this.fonts[s].push(i):this.fonts[s]=[i],!t.svg){for(var l in i.face["units-per-em"]=E(t.face["units-per-em"],10),t.glyphs)if(t.glyphs[Q](l)){var p=t.glyphs[l];if(i.glyphs[l]={w:p.w,k:{},d:p.d&&"M"+p.d.replace(/[mlcxtrv]/g,function(v){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[v]||"M"})+"z"},p.k)for(var m in p.k)p[Q](m)&&(i.glyphs[l].k[m]=p.k[m])}}return t},C.getFont=function(t,i,s,n){if(n=n||"normal",s=s||"normal",i=+i||{normal:400,bold:700,lighter:300,bolder:800}[i]||400,o.fonts){var l,p=o.fonts[t];if(!p){var m=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,rt)+"(\\s|$)","i");for(var v in o.fonts)if(o.fonts[Q](v)&&m.test(v)){p=o.fonts[v];break}}if(p)for(var x=0,_=p.length;x<_&&((l=p[x]).face["font-weight"]!=i||l.face["font-style"]!=s&&l.face["font-style"]||l.face["font-stretch"]!=n);x++);return l}},C.print=function(t,i,s,n,l,p,m,v){p=p||"middle",m=st(it(m||0,1),-1),v=st(it(v||1,3),1);var x,_=Y(s)[tt](rt),D=0,H=0,M=rt;if(o.is(n,"string")&&(n=this.getFont(n)),n){x=(l||16)/n.face["units-per-em"];for(var L=n.face.bbox[tt](V),A=+L[0],F=L[3]-L[1],P=0,I=+L[1]+(p=="baseline"?F+ +n.face.descent:F/2),Z=0,O=_.length;Z<O;Z++){if(_[Z]==`
`)D=0,$=0,H=0,P+=F*v;else{var X=H&&n.glyphs[_[Z-1]]||{},$=n.glyphs[_[Z]];D+=H?(X.w||n.w)+(X.k&&X.k[_[Z]]||0)+n.w*m:0,H=1}$&&$.d&&(M+=o.transformPath($.d,["t",D*x,P*x,"s",x,x,A,I,"t",(t-A)/x,(i-I)/x]))}}return this.path(M).attr({fill:"#000",stroke:"none"})},C.add=function(t){if(o.is(t,"array"))for(var i,s=this.set(),n=0,l=t.length;n<l;n++)i=t[n]||{},W[Q](i.type)&&s.push(this[i.type]().attr(i));return s},o.format=function(t,i){var s=o.is(i,mt)?[0][R](i):arguments;return t&&o.is(t,"string")&&s.length-1&&(t=t.replace(lt,function(n,l){return s[++l]==null?rt:s[l]})),t||rt},o.fullfill=(fi=/\{([^\}]+)\}/g,gi=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(t,i){return String(t).replace(fi,function(s,n){return function(l,p,m){var v=m;return p.replace(gi,function(x,_,D,H,M){_=_||H,v&&(_ in v&&(v=v[_]),typeof v=="function"&&M&&(v=v()))}),v=(v==null||v==m?l:v)+""}(s,n,i)})}),o.ninja=function(){if(J.was)q.win.Raphael=J.is;else{window.Raphael=void 0;try{delete window.Raphael}catch{}}return o},o.st=At,a.on("raphael.DOMload",function(){k=!0}),(ne=document).readyState==null&&ne.addEventListener&&(ne.addEventListener("DOMContentLoaded",vi=function(){ne.removeEventListener("DOMContentLoaded",vi,!1),ne.readyState="complete"},!1),ne.readyState="loading"),function t(){/in/.test(ne.readyState)?setTimeout(t,9):o.eve("raphael.DOMload")}(),o}.apply(h,g))===void 0||(r.exports=w)},function(r,h,u){var g,w;g=[u(0),u(3),u(4)],(w=function(a){return a}.apply(h,g))===void 0||(r.exports=w)},function(r,h,u){var g,w,a,o,k,C,V,W,lt,Q,q,J,Ct,U;o="hasOwnProperty",k=/[\.\/]/,C=/\s*,\s*/,V=function(R,ct){return R-ct},W={n:{}},lt=function(){for(var R=0,ct=this.length;R<ct;R++)if(this[R]!==void 0)return this[R]},Q=function(){for(var R=this.length;--R;)if(this[R]!==void 0)return this[R]},q=Object.prototype.toString,J=String,Ct=Array.isArray||function(R){return R instanceof Array||q.call(R)=="[object Array]"},(U=function(R,ct){var rt,pt=a,Y=Array.prototype.slice.call(arguments,2),tt=U.listeners(R),nt=0,wt=[],at={},K=[],st=w;K.firstDefined=lt,K.lastDefined=Q,w=R,a=0;for(var it=0,_t=tt.length;it<_t;it++)"zIndex"in tt[it]&&(wt.push(tt[it].zIndex),tt[it].zIndex<0&&(at[tt[it].zIndex]=tt[it]));for(wt.sort(V);wt[nt]<0;)if(rt=at[wt[nt++]],K.push(rt.apply(ct,Y)),a)return a=pt,K;for(it=0;it<_t;it++)if("zIndex"in(rt=tt[it]))if(rt.zIndex==wt[nt]){if(K.push(rt.apply(ct,Y)),a)break;do if((rt=at[wt[++nt]])&&K.push(rt.apply(ct,Y)),a)break;while(rt)}else at[rt.zIndex]=rt;else if(K.push(rt.apply(ct,Y)),a)break;return a=pt,w=st,K})._events=W,U.listeners=function(R){var ct,rt,pt,Y,tt,nt,wt,at,K=Ct(R)?R:R.split(k),st=W,it=[st],_t=[];for(Y=0,tt=K.length;Y<tt;Y++){for(at=[],nt=0,wt=it.length;nt<wt;nt++)for(rt=[(st=it[nt].n)[K[Y]],st["*"]],pt=2;pt--;)(ct=rt[pt])&&(at.push(ct),_t=_t.concat(ct.f||[]));it=at}return _t},U.separator=function(R){R?(R="["+(R=J(R).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",k=new RegExp(R)):k=/[\.\/]/},U.on=function(R,ct){if(typeof ct!="function")return function(){};for(var rt=Ct(R)?Ct(R[0])?R:[R]:J(R).split(C),pt=0,Y=rt.length;pt<Y;pt++)(function(tt){for(var nt,wt=Ct(tt)?tt:J(tt).split(k),at=W,K=0,st=wt.length;K<st;K++)at=(at=at.n).hasOwnProperty(wt[K])&&at[wt[K]]||(at[wt[K]]={n:{}});for(at.f=at.f||[],K=0,st=at.f.length;K<st;K++)if(at.f[K]==ct){nt=!0;break}!nt&&at.f.push(ct)})(rt[pt]);return function(tt){+tt==+tt&&(ct.zIndex=+tt)}},U.f=function(R){var ct=[].slice.call(arguments,1);return function(){U.apply(null,[R,null].concat(ct).concat([].slice.call(arguments,0)))}},U.stop=function(){a=1},U.nt=function(R){var ct=Ct(w)?w.join("."):w;return R?new RegExp("(?:\\.|\\/|^)"+R+"(?:\\.|\\/|$)").test(ct):ct},U.nts=function(){return Ct(w)?w:w.split(k)},U.off=U.unbind=function(R,ct){if(R){var rt=Ct(R)?Ct(R[0])?R:[R]:J(R).split(C);if(rt.length>1)for(var pt=0,Y=rt.length;pt<Y;pt++)U.off(rt[pt],ct);else{rt=Ct(R)?R:J(R).split(k);var tt,nt,wt,at,K,st=[W];for(pt=0,Y=rt.length;pt<Y;pt++)for(at=0;at<st.length;at+=wt.length-2){if(wt=[at,1],tt=st[at].n,rt[pt]!="*")tt[rt[pt]]&&wt.push(tt[rt[pt]]);else for(nt in tt)tt[o](nt)&&wt.push(tt[nt]);st.splice.apply(st,wt)}for(pt=0,Y=st.length;pt<Y;pt++)for(tt=st[pt];tt.n;){if(ct){if(tt.f){for(at=0,K=tt.f.length;at<K;at++)if(tt.f[at]==ct){tt.f.splice(at,1);break}!tt.f.length&&delete tt.f}for(nt in tt.n)if(tt.n[o](nt)&&tt.n[nt].f){var it=tt.n[nt].f;for(at=0,K=it.length;at<K;at++)if(it[at]==ct){it.splice(at,1);break}!it.length&&delete tt.n[nt].f}}else for(nt in delete tt.f,tt.n)tt.n[o](nt)&&tt.n[nt].f&&delete tt.n[nt].f;tt=tt.n}}}else U._events=W={n:{}}},U.once=function(R,ct){var rt=function(){return U.off(R,rt),ct.apply(this,arguments)};return U.on(R,rt)},U.version="0.5.0",U.toString=function(){return"You are running Eve 0.5.0"},r.exports?r.exports=U:(g=function(){return U}.apply(h,[]))===void 0||(r.exports=g)},function(r,h,u){var g,w;g=[u(0)],(w=function(a){if(!a||a.svg){var o="hasOwnProperty",k=String,C=parseFloat,V=parseInt,W=Math,lt=W.max,Q=W.abs,q=W.pow,J=/[, ]+/,Ct=a.eve,U="",R=" ",ct="http://www.w3.org/1999/xlink",rt={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},pt={};a.toString=function(){return`Your browser supports SVG.
You are running Raphaël `+this.version};var Y=function(f,d){if(d)for(var c in typeof f=="string"&&(f=Y(f)),d)d[o](c)&&(c.substring(0,6)=="xlink:"?f.setAttributeNS(ct,c.substring(6),k(d[c])):f.setAttribute(c,k(d[c])));else(f=a._g.doc.createElementNS("http://www.w3.org/2000/svg",f)).style&&(f.style.webkitTapHighlightColor="rgba(0,0,0,0)");return f},tt=function(f,d){var c="linear",y=f.id+d,S=.5,E=.5,N=f.node,z=f.paper,B=N.style,G=a._g.doc.getElementById(y);if(!G){if(d=(d=k(d).replace(a._radial_gradient,function(Nt,St,ht){if(c="radial",St&&ht){S=C(St);var It=2*((E=C(ht))>.5)-1;q(S-.5,2)+q(E-.5,2)>.25&&(E=W.sqrt(.25-q(S-.5,2))*It+.5)&&E!=.5&&(E=E.toFixed(5)-1e-5*It)}return U})).split(/\s*\-\s*/),c=="linear"){var j=d.shift();if(j=-C(j),isNaN(j))return null;var et=[0,0,W.cos(a.rad(j)),W.sin(a.rad(j))],gt=1/(lt(Q(et[2]),Q(et[3]))||1);et[2]*=gt,et[3]*=gt,et[2]<0&&(et[0]=-et[2],et[2]=0),et[3]<0&&(et[1]=-et[3],et[3]=0)}var yt=a._parseDots(d);if(!yt)return null;if(y=y.replace(/[\(\)\s,\xb0#]/g,"_"),f.gradient&&y!=f.gradient.id&&(z.defs.removeChild(f.gradient),delete f.gradient),!f.gradient){G=Y(c+"Gradient",{id:y}),f.gradient=G,Y(G,c=="radial"?{fx:S,fy:E}:{x1:et[0],y1:et[1],x2:et[2],y2:et[3],gradientTransform:f.matrix.invert()}),z.defs.appendChild(G);for(var vt=0,kt=yt.length;vt<kt;vt++)G.appendChild(Y("stop",{offset:yt[vt].offset?yt[vt].offset:vt?"100%":"0%","stop-color":yt[vt].color||"#fff","stop-opacity":isFinite(yt[vt].opacity)?yt[vt].opacity:1}))}}return Y(N,{fill:nt(y),opacity:1,"fill-opacity":1}),B.fill=U,B.opacity=1,B.fillOpacity=1,1},nt=function(f){if((d=document.documentMode)&&(d===9||d===10))return"url('#"+f+"')";var d,c=document.location;return"url('"+(c.protocol+"//"+c.host+c.pathname+c.search)+"#"+f+"')"},wt=function(f){var d=f.getBBox(1);Y(f.pattern,{patternTransform:f.matrix.invert()+" translate("+d.x+","+d.y+")"})},at=function(f,d,c){if(f.type=="path"){for(var y,S,E,N,z,B=k(d).toLowerCase().split("-"),G=f.paper,j=c?"end":"start",et=f.node,gt=f.attrs,yt=gt["stroke-width"],vt=B.length,kt="classic",Nt=3,St=3,ht=5;vt--;)switch(B[vt]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":kt=B[vt];break;case"wide":St=5;break;case"narrow":St=2;break;case"long":Nt=5;break;case"short":Nt=2}if(kt=="open"?(Nt+=2,St+=2,ht+=2,E=1,N=c?4:1,z={fill:"none",stroke:gt.stroke}):(N=E=Nt/2,z={fill:gt.stroke,stroke:"none"}),f._.arrows?c?(f._.arrows.endPath&&pt[f._.arrows.endPath]--,f._.arrows.endMarker&&pt[f._.arrows.endMarker]--):(f._.arrows.startPath&&pt[f._.arrows.startPath]--,f._.arrows.startMarker&&pt[f._.arrows.startMarker]--):f._.arrows={},kt!="none"){var It="raphael-marker-"+kt,Tt="raphael-marker-"+j+kt+Nt+St+"-obj"+f.id;a._g.doc.getElementById(It)?pt[It]++:(G.defs.appendChild(Y(Y("path"),{"stroke-linecap":"round",d:rt[kt],id:It})),pt[It]=1);var Mt,Bt=a._g.doc.getElementById(Tt);Bt?(pt[Tt]++,Mt=Bt.getElementsByTagName("use")[0]):(Bt=Y(Y("marker"),{id:Tt,markerHeight:St,markerWidth:Nt,orient:"auto",refX:N,refY:St/2}),Mt=Y(Y("use"),{"xlink:href":"#"+It,transform:(c?"rotate(180 "+Nt/2+" "+St/2+") ":U)+"scale("+Nt/ht+","+St/ht+")","stroke-width":(1/((Nt/ht+St/ht)/2)).toFixed(4)}),Bt.appendChild(Mt),G.defs.appendChild(Bt),pt[Tt]=1),Y(Mt,z);var Ot=E*(kt!="diamond"&&kt!="oval");c?(y=f._.arrows.startdx*yt||0,S=a.getTotalLength(gt.path)-Ot*yt):(y=Ot*yt,S=a.getTotalLength(gt.path)-(f._.arrows.enddx*yt||0)),(z={})["marker-"+j]="url(#"+Tt+")",(S||y)&&(z.d=a.getSubpath(gt.path,y,S)),Y(et,z),f._.arrows[j+"Path"]=It,f._.arrows[j+"Marker"]=Tt,f._.arrows[j+"dx"]=Ot,f._.arrows[j+"Type"]=kt,f._.arrows[j+"String"]=d}else c?(y=f._.arrows.startdx*yt||0,S=a.getTotalLength(gt.path)-y):(y=0,S=a.getTotalLength(gt.path)-(f._.arrows.enddx*yt||0)),f._.arrows[j+"Path"]&&Y(et,{d:a.getSubpath(gt.path,y,S)}),delete f._.arrows[j+"Path"],delete f._.arrows[j+"Marker"],delete f._.arrows[j+"dx"],delete f._.arrows[j+"Type"],delete f._.arrows[j+"String"];for(z in pt)if(pt[o](z)&&!pt[z]){var Pt=a._g.doc.getElementById(z);Pt&&Pt.parentNode.removeChild(Pt)}}},K={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},st=function(f,d,c){if(d=K[k(d).toLowerCase()]){for(var y=f.attrs["stroke-width"]||"1",S={round:y,square:y,butt:0}[f.attrs["stroke-linecap"]||c["stroke-linecap"]]||0,E=[],N=d.length;N--;)E[N]=d[N]*y+(N%2?1:-1)*S;Y(f.node,{"stroke-dasharray":E.join(",")})}else Y(f.node,{"stroke-dasharray":"none"})},it=function(f,d){var c=f.node,y=f.attrs,S=c.style.visibility;for(var E in c.style.visibility="hidden",d)if(d[o](E)){if(!a._availableAttrs[o](E))continue;var N=d[E];switch(y[E]=N,E){case"blur":f.blur(N);break;case"title":var z=c.getElementsByTagName("title");if(z.length&&(z=z[0]))z.firstChild.nodeValue=N;else{z=Y("title");var B=a._g.doc.createTextNode(N);z.appendChild(B),c.appendChild(z)}break;case"href":case"target":var G=c.parentNode;if(G.tagName.toLowerCase()!="a"){var j=Y("a");G.insertBefore(j,c),j.appendChild(c),G=j}E=="target"?G.setAttributeNS(ct,"show",N=="blank"?"new":N):G.setAttributeNS(ct,E,N);break;case"cursor":c.style.cursor=N;break;case"transform":f.transform(N);break;case"arrow-start":at(f,N);break;case"arrow-end":at(f,N,1);break;case"clip-rect":var et=k(N).split(J);if(et.length==4){f.clip&&f.clip.parentNode.parentNode.removeChild(f.clip.parentNode);var gt=Y("clipPath"),yt=Y("rect");gt.id=a.createUUID(),Y(yt,{x:et[0],y:et[1],width:et[2],height:et[3]}),gt.appendChild(yt),f.paper.defs.appendChild(gt),Y(c,{"clip-path":"url(#"+gt.id+")"}),f.clip=yt}if(!N){var vt=c.getAttribute("clip-path");if(vt){var kt=a._g.doc.getElementById(vt.replace(/(^url\(#|\)$)/g,U));kt&&kt.parentNode.removeChild(kt),Y(c,{"clip-path":U}),delete f.clip}}break;case"path":f.type=="path"&&(Y(c,{d:N?y.path=a._pathToAbsolute(N):"M0,0"}),f._.dirty=1,f._.arrows&&("startString"in f._.arrows&&at(f,f._.arrows.startString),"endString"in f._.arrows&&at(f,f._.arrows.endString,1)));break;case"width":if(c.setAttribute(E,N),f._.dirty=1,!y.fx)break;E="x",N=y.x;case"x":y.fx&&(N=-y.x-(y.width||0));case"rx":if(E=="rx"&&f.type=="rect")break;case"cx":c.setAttribute(E,N),f.pattern&&wt(f),f._.dirty=1;break;case"height":if(c.setAttribute(E,N),f._.dirty=1,!y.fy)break;E="y",N=y.y;case"y":y.fy&&(N=-y.y-(y.height||0));case"ry":if(E=="ry"&&f.type=="rect")break;case"cy":c.setAttribute(E,N),f.pattern&&wt(f),f._.dirty=1;break;case"r":f.type=="rect"?Y(c,{rx:N,ry:N}):c.setAttribute(E,N),f._.dirty=1;break;case"src":f.type=="image"&&c.setAttributeNS(ct,"href",N);break;case"stroke-width":f._.sx==1&&f._.sy==1||(N/=lt(Q(f._.sx),Q(f._.sy))||1),c.setAttribute(E,N),y["stroke-dasharray"]&&st(f,y["stroke-dasharray"],d),f._.arrows&&("startString"in f._.arrows&&at(f,f._.arrows.startString),"endString"in f._.arrows&&at(f,f._.arrows.endString,1));break;case"stroke-dasharray":st(f,N,d);break;case"fill":var Nt=k(N).match(a._ISURL);if(Nt){gt=Y("pattern");var St=Y("image");gt.id=a.createUUID(),Y(gt,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),Y(St,{x:0,y:0,"xlink:href":Nt[1]}),gt.appendChild(St),function(Bt){a._preload(Nt[1],function(){var Ot=this.offsetWidth,Pt=this.offsetHeight;Y(Bt,{width:Ot,height:Pt}),Y(St,{width:Ot,height:Pt})})}(gt),f.paper.defs.appendChild(gt),Y(c,{fill:"url(#"+gt.id+")"}),f.pattern=gt,f.pattern&&wt(f);break}var ht=a.getRGB(N);if(ht.error){if((f.type=="circle"||f.type=="ellipse"||k(N).charAt()!="r")&&tt(f,N)){if("opacity"in y||"fill-opacity"in y){var It=a._g.doc.getElementById(c.getAttribute("fill").replace(/^url\(#|\)$/g,U));if(It){var Tt=It.getElementsByTagName("stop");Y(Tt[Tt.length-1],{"stop-opacity":("opacity"in y?y.opacity:1)*("fill-opacity"in y?y["fill-opacity"]:1)})}}y.gradient=N,y.fill="none";break}}else delete d.gradient,delete y.gradient,!a.is(y.opacity,"undefined")&&a.is(d.opacity,"undefined")&&Y(c,{opacity:y.opacity}),!a.is(y["fill-opacity"],"undefined")&&a.is(d["fill-opacity"],"undefined")&&Y(c,{"fill-opacity":y["fill-opacity"]});ht[o]("opacity")&&Y(c,{"fill-opacity":ht.opacity>1?ht.opacity/100:ht.opacity});case"stroke":ht=a.getRGB(N),c.setAttribute(E,ht.hex),E=="stroke"&&ht[o]("opacity")&&Y(c,{"stroke-opacity":ht.opacity>1?ht.opacity/100:ht.opacity}),E=="stroke"&&f._.arrows&&("startString"in f._.arrows&&at(f,f._.arrows.startString),"endString"in f._.arrows&&at(f,f._.arrows.endString,1));break;case"gradient":(f.type=="circle"||f.type=="ellipse"||k(N).charAt()!="r")&&tt(f,N);break;case"opacity":y.gradient&&!y[o]("stroke-opacity")&&Y(c,{"stroke-opacity":N>1?N/100:N});case"fill-opacity":if(y.gradient){(It=a._g.doc.getElementById(c.getAttribute("fill").replace(/^url\(#|\)$/g,U)))&&(Tt=It.getElementsByTagName("stop"),Y(Tt[Tt.length-1],{"stop-opacity":N}));break}default:E=="font-size"&&(N=V(N,10)+"px");var Mt=E.replace(/(\-.)/g,function(Bt){return Bt.substring(1).toUpperCase()});c.style[Mt]=N,f._.dirty=1,c.setAttribute(E,N)}}_t(f,d),c.style.visibility=S},_t=function(f,d){if(f.type=="text"&&(d[o]("text")||d[o]("font")||d[o]("font-size")||d[o]("x")||d[o]("y"))){var c=f.attrs,y=f.node,S=y.firstChild?V(a._g.doc.defaultView.getComputedStyle(y.firstChild,U).getPropertyValue("font-size"),10):10;if(d[o]("text")){for(c.text=d.text;y.firstChild;)y.removeChild(y.firstChild);for(var E,N=k(d.text).split(`
`),z=[],B=0,G=N.length;B<G;B++)E=Y("tspan"),B&&Y(E,{dy:1.2*S,x:c.x}),E.appendChild(a._g.doc.createTextNode(N[B])),y.appendChild(E),z[B]=E}else for(B=0,G=(z=y.getElementsByTagName("tspan")).length;B<G;B++)B?Y(z[B],{dy:1.2*S,x:c.x}):Y(z[0],{dy:0});Y(y,{x:c.x,y:c.y}),f._.dirty=1;var j=f._getBBox(),et=c.y-(j.y+j.height/2);et&&a.is(et,"finite")&&Y(z[0],{dy:et})}},Lt=function(f){return f.parentNode&&f.parentNode.tagName.toLowerCase()==="a"?f.parentNode:f},Dt=function(f,d){this[0]=this.node=f,f.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),f.raphaelid=this.id,this.matrix=a.matrix(),this.realPath=null,this.paper=d,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!d.bottom&&(d.bottom=this),this.prev=d.top,d.top&&(d.top.next=this),d.top=this,this.next=null},ft=a.el;Dt.prototype=ft,ft.constructor=Dt,a._engine.path=function(f,d){var c=Y("path");d.canvas&&d.canvas.appendChild(c);var y=new Dt(c,d);return y.type="path",it(y,{fill:"none",stroke:"#000",path:f}),y},ft.rotate=function(f,d,c){if(this.removed)return this;if((f=k(f).split(J)).length-1&&(d=C(f[1]),c=C(f[2])),f=C(f[0]),c==null&&(d=c),d==null||c==null){var y=this.getBBox(1);d=y.x+y.width/2,c=y.y+y.height/2}return this.transform(this._.transform.concat([["r",f,d,c]])),this},ft.scale=function(f,d,c,y){if(this.removed)return this;if((f=k(f).split(J)).length-1&&(d=C(f[1]),c=C(f[2]),y=C(f[3])),f=C(f[0]),d==null&&(d=f),y==null&&(c=y),c==null||y==null)var S=this.getBBox(1);return c=c??S.x+S.width/2,y=y??S.y+S.height/2,this.transform(this._.transform.concat([["s",f,d,c,y]])),this},ft.translate=function(f,d){return this.removed?this:((f=k(f).split(J)).length-1&&(d=C(f[1])),f=C(f[0])||0,d=+d||0,this.transform(this._.transform.concat([["t",f,d]])),this)},ft.transform=function(f){var d=this._;if(f==null)return d.transform;if(a._extractTransform(this,f),this.clip&&Y(this.clip,{transform:this.matrix.invert()}),this.pattern&&wt(this),this.node&&Y(this.node,{transform:this.matrix}),d.sx!=1||d.sy!=1){var c=this.attrs[o]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":c})}return this},ft.hide=function(){return this.removed||(this.node.style.display="none"),this},ft.show=function(){return this.removed||(this.node.style.display=""),this},ft.remove=function(){var f=Lt(this.node);if(!this.removed&&f.parentNode){var d=this.paper;for(var c in d.__set__&&d.__set__.exclude(this),Ct.unbind("raphael.*.*."+this.id),this.gradient&&d.defs.removeChild(this.gradient),a._tear(this,d),f.parentNode.removeChild(f),this.removeData(),this)this[c]=typeof this[c]=="function"?a._removedFactory(c):null;this.removed=!0}},ft._getBBox=function(){if(this.node.style.display=="none"){this.show();var f=!0}var d,c=!1;this.paper.canvas.parentElement?d=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(d=this.paper.canvas.parentNode.style),d&&d.display=="none"&&(c=!0,d.display="");var y={};try{y=this.node.getBBox()}catch{y={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{y=y||{},c&&(d.display="none")}return f&&this.hide(),y},ft.attr=function(f,d){if(this.removed)return this;if(f==null){var c={};for(var y in this.attrs)this.attrs[o](y)&&(c[y]=this.attrs[y]);return c.gradient&&c.fill=="none"&&(c.fill=c.gradient)&&delete c.gradient,c.transform=this._.transform,c}if(d==null&&a.is(f,"string")){if(f=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(f=="transform")return this._.transform;for(var S=f.split(J),E={},N=0,z=S.length;N<z;N++)(f=S[N])in this.attrs?E[f]=this.attrs[f]:a.is(this.paper.customAttributes[f],"function")?E[f]=this.paper.customAttributes[f].def:E[f]=a._availableAttrs[f];return z-1?E:E[S[0]]}if(d==null&&a.is(f,"array")){for(E={},N=0,z=f.length;N<z;N++)E[f[N]]=this.attr(f[N]);return E}if(d!=null){var B={};B[f]=d}else f!=null&&a.is(f,"object")&&(B=f);for(var G in B)Ct("raphael.attr."+G+"."+this.id,this,B[G]);for(G in this.paper.customAttributes)if(this.paper.customAttributes[o](G)&&B[o](G)&&a.is(this.paper.customAttributes[G],"function")){var j=this.paper.customAttributes[G].apply(this,[].concat(B[G]));for(var et in this.attrs[G]=B[G],j)j[o](et)&&(B[et]=j[et])}return it(this,B),this},ft.toFront=function(){if(this.removed)return this;var f=Lt(this.node);f.parentNode.appendChild(f);var d=this.paper;return d.top!=this&&a._tofront(this,d),this},ft.toBack=function(){if(this.removed)return this;var f=Lt(this.node),d=f.parentNode;return d.insertBefore(f,d.firstChild),a._toback(this,this.paper),this.paper,this},ft.insertAfter=function(f){if(this.removed||!f)return this;var d=Lt(this.node),c=Lt(f.node||f[f.length-1].node);return c.nextSibling?c.parentNode.insertBefore(d,c.nextSibling):c.parentNode.appendChild(d),a._insertafter(this,f,this.paper),this},ft.insertBefore=function(f){if(this.removed||!f)return this;var d=Lt(this.node),c=Lt(f.node||f[0].node);return c.parentNode.insertBefore(d,c),a._insertbefore(this,f,this.paper),this},ft.blur=function(f){var d=this;if(+f!=0){var c=Y("filter"),y=Y("feGaussianBlur");d.attrs.blur=f,c.id=a.createUUID(),Y(y,{stdDeviation:+f||1.5}),c.appendChild(y),d.paper.defs.appendChild(c),d._blur=c,Y(d.node,{filter:"url(#"+c.id+")"})}else d._blur&&(d._blur.parentNode.removeChild(d._blur),delete d._blur,delete d.attrs.blur),d.node.removeAttribute("filter");return d},a._engine.circle=function(f,d,c,y){var S=Y("circle");f.canvas&&f.canvas.appendChild(S);var E=new Dt(S,f);return E.attrs={cx:d,cy:c,r:y,fill:"none",stroke:"#000"},E.type="circle",Y(S,E.attrs),E},a._engine.rect=function(f,d,c,y,S,E){var N=Y("rect");f.canvas&&f.canvas.appendChild(N);var z=new Dt(N,f);return z.attrs={x:d,y:c,width:y,height:S,rx:E||0,ry:E||0,fill:"none",stroke:"#000"},z.type="rect",Y(N,z.attrs),z},a._engine.ellipse=function(f,d,c,y,S){var E=Y("ellipse");f.canvas&&f.canvas.appendChild(E);var N=new Dt(E,f);return N.attrs={cx:d,cy:c,rx:y,ry:S,fill:"none",stroke:"#000"},N.type="ellipse",Y(E,N.attrs),N},a._engine.image=function(f,d,c,y,S,E){var N=Y("image");Y(N,{x:c,y,width:S,height:E,preserveAspectRatio:"none"}),N.setAttributeNS(ct,"href",d),f.canvas&&f.canvas.appendChild(N);var z=new Dt(N,f);return z.attrs={x:c,y,width:S,height:E,src:d},z.type="image",z},a._engine.text=function(f,d,c,y){var S=Y("text");f.canvas&&f.canvas.appendChild(S);var E=new Dt(S,f);return E.attrs={x:d,y:c,"text-anchor":"middle",text:y,"font-family":a._availableAttrs["font-family"],"font-size":a._availableAttrs["font-size"],stroke:"none",fill:"#000"},E.type="text",it(E,E.attrs),E},a._engine.setSize=function(f,d){return this.width=f||this.width,this.height=d||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},a._engine.create=function(){var f=a._getContainer.apply(0,arguments),d=f&&f.container;if(!d)throw new Error("SVG container not found.");var c,y=f.x,S=f.y,E=f.width,N=f.height,z=Y("svg"),B="overflow:hidden;";return y=y||0,S=S||0,Y(z,{height:N=N||342,version:1.1,width:E=E||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),d==1?(z.style.cssText=B+"position:absolute;left:"+y+"px;top:"+S+"px",a._g.doc.body.appendChild(z),c=1):(z.style.cssText=B+"position:relative",d.firstChild?d.insertBefore(z,d.firstChild):d.appendChild(z)),(d=new a._Paper).width=E,d.height=N,d.canvas=z,d.clear(),d._left=d._top=0,c&&(d.renderfix=function(){}),d.renderfix(),d},a._engine.setViewBox=function(f,d,c,y,S){Ct("raphael.setViewBox",this,this._viewBox,[f,d,c,y,S]);var E,N,z=this.getSize(),B=lt(c/z.width,y/z.height),G=this.top,j=S?"xMidYMid meet":"xMinYMin";for(f==null?(this._vbSize&&(B=1),delete this._vbSize,E="0 0 "+this.width+R+this.height):(this._vbSize=B,E=f+R+d+R+c+R+y),Y(this.canvas,{viewBox:E,preserveAspectRatio:j});B&&G;)N="stroke-width"in G.attrs?G.attrs["stroke-width"]:1,G.attr({"stroke-width":N}),G._.dirty=1,G._.dirtyT=1,G=G.prev;return this._viewBox=[f,d,c,y,!!S],this},a.prototype.renderfix=function(){var f,d=this.canvas,c=d.style;try{f=d.getScreenCTM()||d.createSVGMatrix()}catch{f=d.createSVGMatrix()}var y=-f.e%1,S=-f.f%1;(y||S)&&(y&&(this._left=(this._left+y)%1,c.left=this._left+"px"),S&&(this._top=(this._top+S)%1,c.top=this._top+"px"))},a.prototype.clear=function(){a.eve("raphael.clear",this);for(var f=this.canvas;f.firstChild;)f.removeChild(f.firstChild);this.bottom=this.top=null,(this.desc=Y("desc")).appendChild(a._g.doc.createTextNode("Created with Raphaël "+a.version)),f.appendChild(this.desc),f.appendChild(this.defs=Y("defs"))},a.prototype.remove=function(){for(var f in Ct("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[f]=typeof this[f]=="function"?a._removedFactory(f):null};var mt=a.st;for(var Wt in ft)ft[o](Wt)&&!mt[o](Wt)&&(mt[Wt]=function(f){return function(){var d=arguments;return this.forEach(function(c){c[f].apply(c,d)})}}(Wt))}}.apply(h,g))===void 0||(r.exports=w)},function(r,h,u){var g,w;g=[u(0)],(w=function(a){if(!a||a.vml){var o="hasOwnProperty",k=String,C=parseFloat,V=Math,W=V.round,lt=V.max,Q=V.min,q=V.abs,J=/[, ]+/,Ct=a.eve,U=" ",R="",ct={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},rt=/([clmz]),?([^clmz]*)/gi,pt=/ progid:\S+Blur\([^\)]+\)/g,Y=/-?[^,\s-]+/g,tt="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",nt=21600,wt={path:1,rect:1,image:1},at={circle:1,ellipse:1},K=function(d,c,y){var S=a.matrix();return S.rotate(-d,.5,.5),{dx:S.x(c,y),dy:S.y(c,y)}},st=function(d,c,y,S,E,N){var z=d._,B=d.matrix,G=z.fillpos,j=d.node,et=j.style,gt=1,yt="",vt=nt/c,kt=nt/y;if(et.visibility="hidden",c&&y){if(j.coordsize=q(vt)+U+q(kt),et.rotation=N*(c*y<0?-1:1),N){var Nt=K(N,S,E);S=Nt.dx,E=Nt.dy}if(c<0&&(yt+="x"),y<0&&(yt+=" y")&&(gt=-1),et.flip=yt,j.coordorigin=S*-vt+U+E*-kt,G||z.fillsize){var St=j.getElementsByTagName("fill");St=St&&St[0],j.removeChild(St),G&&(Nt=K(N,B.x(G[0],G[1]),B.y(G[0],G[1])),St.position=Nt.dx*gt+U+Nt.dy*gt),z.fillsize&&(St.size=z.fillsize[0]*q(c)+U+z.fillsize[1]*q(y)),j.appendChild(St)}et.visibility="visible"}};a.toString=function(){return`Your browser doesn’t support SVG. Falling down to VML.
You are running Raphaël `+this.version};var it,_t=function(d,c,y){for(var S=k(c).toLowerCase().split("-"),E=y?"end":"start",N=S.length,z="classic",B="medium",G="medium";N--;)switch(S[N]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":z=S[N];break;case"wide":case"narrow":G=S[N];break;case"long":case"short":B=S[N]}var j=d.node.getElementsByTagName("stroke")[0];j[E+"arrow"]=z,j[E+"arrowlength"]=B,j[E+"arrowwidth"]=G},Lt=function(d,c){d.attrs=d.attrs||{};var y=d.node,S=d.attrs,E=y.style,N=wt[d.type]&&(c.x!=S.x||c.y!=S.y||c.width!=S.width||c.height!=S.height||c.cx!=S.cx||c.cy!=S.cy||c.rx!=S.rx||c.ry!=S.ry||c.r!=S.r),z=at[d.type]&&(S.cx!=c.cx||S.cy!=c.cy||S.r!=c.r||S.rx!=c.rx||S.ry!=c.ry),B=d;for(var G in c)c[o](G)&&(S[G]=c[G]);if(N&&(S.path=a._getPath[d.type](d),d._.dirty=1),c.href&&(y.href=c.href),c.title&&(y.title=c.title),c.target&&(y.target=c.target),c.cursor&&(E.cursor=c.cursor),"blur"in c&&d.blur(c.blur),(c.path&&d.type=="path"||N)&&(y.path=function(Rt){var Zt=/[ahqstv]/gi,ue=a._pathToAbsolute;if(k(Rt).match(Zt)&&(ue=a._path2curve),Zt=/[clmz]/g,ue==a._pathToAbsolute&&!k(Rt).match(Zt)){var Yt=k(Rt).replace(rt,function(si,ge,ve){var Jt=[],Ie=ge.toLowerCase()=="m",re=ct[ge];return ve.replace(Y,function(Me){Ie&&Jt.length==2&&(re+=Jt+ct[ge=="m"?"l":"L"],Jt=[]),Jt.push(W(Me*nt))}),re+Jt});return Yt}var pe,Vt,Ee=ue(Rt);Yt=[];for(var fe=0,ke=Ee.length;fe<ke;fe++){pe=Ee[fe],(Vt=Ee[fe][0].toLowerCase())=="z"&&(Vt="x");for(var Qt=1,Ht=pe.length;Qt<Ht;Qt++)Vt+=W(pe[Qt]*nt)+(Qt!=Ht-1?",":R);Yt.push(Vt)}return Yt.join(U)}(~k(S.path).toLowerCase().indexOf("r")?a._pathToAbsolute(S.path):S.path),d._.dirty=1,d.type=="image"&&(d._.fillpos=[S.x,S.y],d._.fillsize=[S.width,S.height],st(d,1,1,0,0,0))),"transform"in c&&d.transform(c.transform),z){var j=+S.cx,et=+S.cy,gt=+S.rx||+S.r||0,yt=+S.ry||+S.r||0;y.path=a.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",W((j-gt)*nt),W((et-yt)*nt),W((j+gt)*nt),W((et+yt)*nt),W(j*nt)),d._.dirty=1}if("clip-rect"in c){var vt=k(c["clip-rect"]).split(J);if(vt.length==4){vt[2]=+vt[2]+ +vt[0],vt[3]=+vt[3]+ +vt[1];var kt=y.clipRect||a._g.doc.createElement("div"),Nt=kt.style;Nt.clip=a.format("rect({1}px {2}px {3}px {0}px)",vt),y.clipRect||(Nt.position="absolute",Nt.top=0,Nt.left=0,Nt.width=d.paper.width+"px",Nt.height=d.paper.height+"px",y.parentNode.insertBefore(kt,y),kt.appendChild(y),y.clipRect=kt)}c["clip-rect"]||y.clipRect&&(y.clipRect.style.clip="auto")}if(d.textpath){var St=d.textpath.style;c.font&&(St.font=c.font),c["font-family"]&&(St.fontFamily='"'+c["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,R)+'"'),c["font-size"]&&(St.fontSize=c["font-size"]),c["font-weight"]&&(St.fontWeight=c["font-weight"]),c["font-style"]&&(St.fontStyle=c["font-style"])}if("arrow-start"in c&&_t(B,c["arrow-start"]),"arrow-end"in c&&_t(B,c["arrow-end"],1),c.opacity!=null||c.fill!=null||c.src!=null||c.stroke!=null||c["stroke-width"]!=null||c["stroke-opacity"]!=null||c["fill-opacity"]!=null||c["stroke-dasharray"]!=null||c["stroke-miterlimit"]!=null||c["stroke-linejoin"]!=null||c["stroke-linecap"]!=null){var ht=y.getElementsByTagName("fill");if(!(ht=ht&&ht[0])&&(ht=it("fill")),d.type=="image"&&c.src&&(ht.src=c.src),c.fill&&(ht.on=!0),ht.on!=null&&c.fill!="none"&&c.fill!==null||(ht.on=!1),ht.on&&c.fill){var It=k(c.fill).match(a._ISURL);if(It){ht.parentNode==y&&y.removeChild(ht),ht.rotate=!0,ht.src=It[1],ht.type="tile";var Tt=d.getBBox(1);ht.position=Tt.x+U+Tt.y,d._.fillpos=[Tt.x,Tt.y],a._preload(It[1],function(){d._.fillsize=[this.offsetWidth,this.offsetHeight]})}else ht.color=a.getRGB(c.fill).hex,ht.src=R,ht.type="solid",a.getRGB(c.fill).error&&(B.type in{circle:1,ellipse:1}||k(c.fill).charAt()!="r")&&Dt(B,c.fill,ht)&&(S.fill="none",S.gradient=c.fill,ht.rotate=!1)}if("fill-opacity"in c||"opacity"in c){var Mt=((+S["fill-opacity"]+1||2)-1)*((+S.opacity+1||2)-1)*((+a.getRGB(c.fill).o+1||2)-1);Mt=Q(lt(Mt,0),1),ht.opacity=Mt,ht.src&&(ht.color="none")}y.appendChild(ht);var Bt=y.getElementsByTagName("stroke")&&y.getElementsByTagName("stroke")[0],Ot=!1;!Bt&&(Ot=Bt=it("stroke")),(c.stroke&&c.stroke!="none"||c["stroke-width"]||c["stroke-opacity"]!=null||c["stroke-dasharray"]||c["stroke-miterlimit"]||c["stroke-linejoin"]||c["stroke-linecap"])&&(Bt.on=!0),(c.stroke=="none"||c.stroke===null||Bt.on==null||c.stroke==0||c["stroke-width"]==0)&&(Bt.on=!1);var Pt=a.getRGB(c.stroke);Bt.on&&c.stroke&&(Bt.color=Pt.hex),Mt=((+S["stroke-opacity"]+1||2)-1)*((+S.opacity+1||2)-1)*((+Pt.o+1||2)-1);var Ut=.75*(C(c["stroke-width"])||1);if(Mt=Q(lt(Mt,0),1),c["stroke-width"]==null&&(Ut=S["stroke-width"]),c["stroke-width"]&&(Bt.weight=Ut),Ut&&Ut<1&&(Mt*=Ut)&&(Bt.weight=1),Bt.opacity=Mt,c["stroke-linejoin"]&&(Bt.joinstyle=c["stroke-linejoin"]||"miter"),Bt.miterlimit=c["stroke-miterlimit"]||8,c["stroke-linecap"]&&(Bt.endcap=c["stroke-linecap"]=="butt"?"flat":c["stroke-linecap"]=="square"?"square":"round"),"stroke-dasharray"in c){var Se={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};Bt.dashstyle=Se[o](c["stroke-dasharray"])?Se[c["stroke-dasharray"]]:R}Ot&&y.appendChild(Bt)}if(B.type=="text"){B.paper.canvas.style.display=R;var Kt=B.paper.span,le=S.font&&S.font.match(/\d+(?:\.\d*)?(?=px)/);E=Kt.style,S.font&&(E.font=S.font),S["font-family"]&&(E.fontFamily=S["font-family"]),S["font-weight"]&&(E.fontWeight=S["font-weight"]),S["font-style"]&&(E.fontStyle=S["font-style"]),le=C(S["font-size"]||le&&le[0])||10,E.fontSize=100*le+"px",B.textpath.string&&(Kt.innerHTML=k(B.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var ce=Kt.getBoundingClientRect();B.W=S.w=(ce.right-ce.left)/100,B.H=S.h=(ce.bottom-ce.top)/100,B.X=S.x,B.Y=S.y+B.H/2,("x"in c||"y"in c)&&(B.path.v=a.format("m{0},{1}l{2},{1}",W(S.x*nt),W(S.y*nt),W(S.x*nt)+1));for(var _e=["x","y","text","font","font-family","font-weight","font-style","font-size"],de=0,Te=_e.length;de<Te;de++)if(_e[de]in c){B._.dirty=1;break}switch(S["text-anchor"]){case"start":B.textpath.style["v-text-align"]="left",B.bbx=B.W/2;break;case"end":B.textpath.style["v-text-align"]="right",B.bbx=-B.W/2;break;default:B.textpath.style["v-text-align"]="center",B.bbx=0}B.textpath.style["v-text-kern"]=!0}},Dt=function(d,c,y){d.attrs=d.attrs||{},d.attrs;var S=Math.pow,E="linear",N=".5 .5";if(d.attrs.gradient=c,c=(c=k(c).replace(a._radial_gradient,function(gt,yt,vt){return E="radial",yt&&vt&&(yt=C(yt),vt=C(vt),S(yt-.5,2)+S(vt-.5,2)>.25&&(vt=V.sqrt(.25-S(yt-.5,2))*(2*(vt>.5)-1)+.5),N=yt+U+vt),R})).split(/\s*\-\s*/),E=="linear"){var z=c.shift();if(z=-C(z),isNaN(z))return null}var B=a._parseDots(c);if(!B)return null;if(d=d.shape||d.node,B.length){d.removeChild(y),y.on=!0,y.method="none",y.color=B[0].color,y.color2=B[B.length-1].color;for(var G=[],j=0,et=B.length;j<et;j++)B[j].offset&&G.push(B[j].offset+U+B[j].color);y.colors=G.length?G.join():"0% "+y.color,E=="radial"?(y.type="gradientTitle",y.focus="100%",y.focussize="0 0",y.focusposition=N,y.angle=0):(y.type="gradient",y.angle=(270-z)%360),d.appendChild(y)}return 1},ft=function(d,c){this[0]=this.node=d,d.raphael=!0,this.id=a._oid++,d.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=c,this.matrix=a.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},mt=a.el;ft.prototype=mt,mt.constructor=ft,mt.transform=function(d){if(d==null)return this._.transform;var c,y=this.paper._viewBoxShift,S=y?"s"+[y.scale,y.scale]+"-1-1t"+[y.dx,y.dy]:R;y&&(c=d=k(d).replace(/\.{3}|\u2026/g,this._.transform||R)),a._extractTransform(this,S+d);var E,N=this.matrix.clone(),z=this.skew,B=this.node,G=~k(this.attrs.fill).indexOf("-"),j=!k(this.attrs.fill).indexOf("url(");if(N.translate(1,1),j||G||this.type=="image")if(z.matrix="1 0 0 1",z.offset="0 0",E=N.split(),G&&E.noRotation||!E.isSimple){B.style.filter=N.toFilter();var et=this.getBBox(),gt=this.getBBox(1),yt=et.x-gt.x,vt=et.y-gt.y;B.coordorigin=yt*-nt+U+vt*-nt,st(this,1,1,yt,vt,0)}else B.style.filter=R,st(this,E.scalex,E.scaley,E.dx,E.dy,E.rotate);else B.style.filter=R,z.matrix=k(N),z.offset=N.offset();return c!==null&&(this._.transform=c,a._extractTransform(this,c)),this},mt.rotate=function(d,c,y){if(this.removed)return this;if(d!=null){if((d=k(d).split(J)).length-1&&(c=C(d[1]),y=C(d[2])),d=C(d[0]),y==null&&(c=y),c==null||y==null){var S=this.getBBox(1);c=S.x+S.width/2,y=S.y+S.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",d,c,y]])),this}},mt.translate=function(d,c){return this.removed?this:((d=k(d).split(J)).length-1&&(c=C(d[1])),d=C(d[0])||0,c=+c||0,this._.bbox&&(this._.bbox.x+=d,this._.bbox.y+=c),this.transform(this._.transform.concat([["t",d,c]])),this)},mt.scale=function(d,c,y,S){if(this.removed)return this;if((d=k(d).split(J)).length-1&&(c=C(d[1]),y=C(d[2]),S=C(d[3]),isNaN(y)&&(y=null),isNaN(S)&&(S=null)),d=C(d[0]),c==null&&(c=d),S==null&&(y=S),y==null||S==null)var E=this.getBBox(1);return y=y??E.x+E.width/2,S=S??E.y+E.height/2,this.transform(this._.transform.concat([["s",d,c,y,S]])),this._.dirtyT=1,this},mt.hide=function(){return!this.removed&&(this.node.style.display="none"),this},mt.show=function(){return!this.removed&&(this.node.style.display=R),this},mt.auxGetBBox=a.el.getBBox,mt.getBBox=function(){var d=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var c={},y=1/this.paper._viewBoxShift.scale;return c.x=d.x-this.paper._viewBoxShift.dx,c.x*=y,c.y=d.y-this.paper._viewBoxShift.dy,c.y*=y,c.width=d.width*y,c.height=d.height*y,c.x2=c.x+c.width,c.y2=c.y+c.height,c}return d},mt._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},mt.remove=function(){if(!this.removed&&this.node.parentNode){for(var d in this.paper.__set__&&this.paper.__set__.exclude(this),a.eve.unbind("raphael.*.*."+this.id),a._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[d]=typeof this[d]=="function"?a._removedFactory(d):null;this.removed=!0}},mt.attr=function(d,c){if(this.removed)return this;if(d==null){var y={};for(var S in this.attrs)this.attrs[o](S)&&(y[S]=this.attrs[S]);return y.gradient&&y.fill=="none"&&(y.fill=y.gradient)&&delete y.gradient,y.transform=this._.transform,y}if(c==null&&a.is(d,"string")){if(d=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;for(var E=d.split(J),N={},z=0,B=E.length;z<B;z++)(d=E[z])in this.attrs?N[d]=this.attrs[d]:a.is(this.paper.customAttributes[d],"function")?N[d]=this.paper.customAttributes[d].def:N[d]=a._availableAttrs[d];return B-1?N:N[E[0]]}if(this.attrs&&c==null&&a.is(d,"array")){for(N={},z=0,B=d.length;z<B;z++)N[d[z]]=this.attr(d[z]);return N}var G;for(var j in c!=null&&((G={})[d]=c),c==null&&a.is(d,"object")&&(G=d),G)Ct("raphael.attr."+j+"."+this.id,this,G[j]);if(G){for(j in this.paper.customAttributes)if(this.paper.customAttributes[o](j)&&G[o](j)&&a.is(this.paper.customAttributes[j],"function")){var et=this.paper.customAttributes[j].apply(this,[].concat(G[j]));for(var gt in this.attrs[j]=G[j],et)et[o](gt)&&(G[gt]=et[gt])}G.text&&this.type=="text"&&(this.textpath.string=G.text),Lt(this,G)}return this},mt.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&a._tofront(this,this.paper),this},mt.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),a._toback(this,this.paper)),this)},mt.insertAfter=function(d){return this.removed?this:(d.constructor==a.st.constructor&&(d=d[d.length-1]),d.node.nextSibling?d.node.parentNode.insertBefore(this.node,d.node.nextSibling):d.node.parentNode.appendChild(this.node),a._insertafter(this,d,this.paper),this)},mt.insertBefore=function(d){return this.removed?this:(d.constructor==a.st.constructor&&(d=d[0]),d.node.parentNode.insertBefore(this.node,d.node),a._insertbefore(this,d,this.paper),this)},mt.blur=function(d){var c=this.node.runtimeStyle,y=c.filter;return y=y.replace(pt,R),+d!=0?(this.attrs.blur=d,c.filter=y+U+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+d||1.5)+")",c.margin=a.format("-{0}px 0 0 -{0}px",W(+d||1.5))):(c.filter=y,c.margin=0,delete this.attrs.blur),this},a._engine.path=function(d,c){var y=it("shape");y.style.cssText=tt,y.coordsize=nt+U+nt,y.coordorigin=c.coordorigin;var S=new ft(y,c),E={fill:"none",stroke:"#000"};d&&(E.path=d),S.type="path",S.path=[],S.Path=R,Lt(S,E),c.canvas&&c.canvas.appendChild(y);var N=it("skew");return N.on=!0,y.appendChild(N),S.skew=N,S.transform(R),S},a._engine.rect=function(d,c,y,S,E,N){var z=a._rectPath(c,y,S,E,N),B=d.path(z),G=B.attrs;return B.X=G.x=c,B.Y=G.y=y,B.W=G.width=S,B.H=G.height=E,G.r=N,G.path=z,B.type="rect",B},a._engine.ellipse=function(d,c,y,S,E){var N=d.path();return N.attrs,N.X=c-S,N.Y=y-E,N.W=2*S,N.H=2*E,N.type="ellipse",Lt(N,{cx:c,cy:y,rx:S,ry:E}),N},a._engine.circle=function(d,c,y,S){var E=d.path();return E.attrs,E.X=c-S,E.Y=y-S,E.W=E.H=2*S,E.type="circle",Lt(E,{cx:c,cy:y,r:S}),E},a._engine.image=function(d,c,y,S,E,N){var z=a._rectPath(y,S,E,N),B=d.path(z).attr({stroke:"none"}),G=B.attrs,j=B.node,et=j.getElementsByTagName("fill")[0];return G.src=c,B.X=G.x=y,B.Y=G.y=S,B.W=G.width=E,B.H=G.height=N,G.path=z,B.type="image",et.parentNode==j&&j.removeChild(et),et.rotate=!0,et.src=c,et.type="tile",B._.fillpos=[y,S],B._.fillsize=[E,N],j.appendChild(et),st(B,1,1,0,0,0),B},a._engine.text=function(d,c,y,S){var E=it("shape"),N=it("path"),z=it("textpath");c=c||0,y=y||0,S=S||"",N.v=a.format("m{0},{1}l{2},{1}",W(c*nt),W(y*nt),W(c*nt)+1),N.textpathok=!0,z.string=k(S),z.on=!0,E.style.cssText=tt,E.coordsize=nt+U+nt,E.coordorigin="0 0";var B=new ft(E,d),G={fill:"#000",stroke:"none",font:a._availableAttrs.font,text:S};B.shape=E,B.path=N,B.textpath=z,B.type="text",B.attrs.text=k(S),B.attrs.x=c,B.attrs.y=y,B.attrs.w=1,B.attrs.h=1,Lt(B,G),E.appendChild(z),E.appendChild(N),d.canvas.appendChild(E);var j=it("skew");return j.on=!0,E.appendChild(j),B.skew=j,B.transform(R),B},a._engine.setSize=function(d,c){var y=this.canvas.style;return this.width=d,this.height=c,d==+d&&(d+="px"),c==+c&&(c+="px"),y.width=d,y.height=c,y.clip="rect(0 "+d+" "+c+" 0)",this._viewBox&&a._engine.setViewBox.apply(this,this._viewBox),this},a._engine.setViewBox=function(d,c,y,S,E){a.eve("raphael.setViewBox",this,this._viewBox,[d,c,y,S,E]);var N,z,B=this.getSize(),G=B.width,j=B.height;return E&&(y*(N=j/S)<G&&(d-=(G-y*N)/2/N),S*(z=G/y)<j&&(c-=(j-S*z)/2/z)),this._viewBox=[d,c,y,S,!!E],this._viewBoxShift={dx:-d,dy:-c,scale:B},this.forEach(function(et){et.transform("...")}),this},a._engine.initWin=function(d){var c=d.document;c.styleSheets.length<31?c.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):c.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!c.namespaces.rvml&&c.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),it=function(y){return c.createElement("<rvml:"+y+' class="rvml">')}}catch{it=function(S){return c.createElement("<"+S+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},a._engine.initWin(a._g.win),a._engine.create=function(){var d=a._getContainer.apply(0,arguments),c=d.container,y=d.height,S=d.width,E=d.x,N=d.y;if(!c)throw new Error("VML container not found.");var z=new a._Paper,B=z.canvas=a._g.doc.createElement("div"),G=B.style;return E=E||0,N=N||0,S=S||512,y=y||342,z.width=S,z.height=y,S==+S&&(S+="px"),y==+y&&(y+="px"),z.coordsize=216e5+U+216e5,z.coordorigin="0 0",z.span=a._g.doc.createElement("span"),z.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",B.appendChild(z.span),G.cssText=a.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",S,y),c==1?(a._g.doc.body.appendChild(B),G.left=E+"px",G.top=N+"px",G.position="absolute"):c.firstChild?c.insertBefore(B,c.firstChild):c.appendChild(B),z.renderfix=function(){},z},a.prototype.clear=function(){a.eve("raphael.clear",this),this.canvas.innerHTML=R,this.span=a._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},a.prototype.remove=function(){for(var d in a.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[d]=typeof this[d]=="function"?a._removedFactory(d):null;return!0};var Wt=a.st;for(var f in mt)mt[o](f)&&!Wt[o](f)&&(Wt[f]=function(d){return function(){var c=arguments;return this.forEach(function(y){y[d].apply(y,c)})}}(f))}}.apply(h,g))===void 0||(r.exports=w)}])})})(or);const Hi=nr(Qe),Fi="mindmap-graph";class ar{constructor(e){b(this,"containerDom");b(this,"wrapperDom");b(this,"svgDom");b(this,"paper");const r=this.initGraphElement(e);this.containerDom=r.containerDom,this.wrapperDom=r.wrapperDom;const{clientWidth:h,clientHeight:u}=this.wrapperDom;this.paper=new Hi(this.wrapperDom,h,u),this.svgDom=document.querySelector("svg")||null}getPaper(){return this.paper}getWrapperDom(){return this.wrapperDom}getContainerDom(){return this.containerDom}getSvgDom(){return this.svgDom}getSize(){return{width:this.wrapperDom.clientWidth,height:this.wrapperDom.clientHeight}}clear(){this.paper.clear(),this.wrapperDom.remove()}initGraphElement(e){const r=typeof e=="string"?document.querySelector(e):e;if(!r)throw new Error("container is not exist");if(r.clientWidth===0||r.clientHeight===0)throw new Error("The width or height of Container is not more than 0");const h=document.createElement("div");h.className="mindmap-graph-background";const u=document.createElement("div");return u.className=Fi,r.appendChild(u),r.appendChild(h),{containerDom:r,wrapperDom:u}}}var bt=(T=>(T[T.LEFT=-1]="LEFT",T[T.NONE=0]="NONE",T[T.RIGHT=1]="RIGHT",T))(bt||{}),zt=(T=>(T[T.root=0]="root",T[T.firstLevel=1]="firstLevel",T[T.grandchild=2]="grandchild",T))(zt||{});function ae(T){return T===0?0:T===1?1:2}function ei(){function T(){return((1+Math.random())*65536|0).toString(16).substring(1)}return`${T()}${T()}-${T()}${T()}${T()}`}const hr=40,lr=25,cr=24,dr=15;function ii(T){return ae(T)===zt.firstLevel?lr:dr}function Oi(T){return ae(T)===zt.firstLevel?hr:cr}class ur{constructor(){b(this,"areaHeightMap",{})}getAreaHeight(e,r){const h=e.getBBox().height;if(!e.isExpand)return h;const u=`${e.id}_${r}`;if(this.areaHeightMap[u])return this.areaHeightMap[u];let g=0;const w=e.getDirectionChildren(r);if(w.length===0)g=h;else{const a=w.reduce((k,C)=>{const V=this.getAreaHeight(C,r);return k+V},0),o=ii(e.depth+1);if(g=a+(w.length-1)*o,g<h)return h}return this.areaHeightMap[e.id]=g,g}}class ri{constructor(e){b(this,"root");this.root=e===void 0?null:e}init(e){this.root=e}reset(e){if(!this.root)throw new Error("Position is called without root.");const r=new ur;e===bt.LEFT||e===bt.RIGHT?this.resetInner({node:this.root,direction:e,areaHeightHandler:r}):(this.resetInner({node:this.root,direction:bt.LEFT,areaHeightHandler:r}),this.resetInner({node:this.root,direction:bt.RIGHT,areaHeightHandler:r}))}resetInner({node:e,direction:r,areaHeightHandler:h}){if(!e.isExpand)return;const u=e.depth+1;let g=h.getAreaHeight(e,r);const w=ii(u),a=e.getBBox();let o=a.cy-g/2;const k=e.getDirectionChildren(r);k.forEach(C=>{const V=h.getAreaHeight(C,r);let W=k.length===1?g:V;const lt=C.getBBox(),Q=Oi(u),q=r===bt.RIGHT?a.x2+Q:a.x-Q-lt.width,J=o+W/2-lt.height/2;C.translateTo(q,J),this.resetInner({node:C,direction:r,areaHeightHandler:h}),o+=W+w})}}class pr{constructor({root:e,position:r,createNode:h}){b(this,"root");b(this,"position");b(this,"createNode");this.root=e,this.position=r,this.createNode=h}render(e){e&&(this.renderWithRelativeNode({nodeDataMap:e,sourceId:this.root.id,relativeNode:this.root,depth:0}),this.position.reset())}renderWithRelativeNode({nodeDataMap:e,sourceId:r,relativeNode:h,depth:u}){const g=h,w=e[r];w.label!==g.label&&g.setLabel(w.label,!1),w.isExpand!==g.isExpand&&g.changeExpand(w.isExpand,!1);const a=g.children;return g.clearChild(),w.children.forEach(o=>{if(!e[o])return;const C=a.findIndex(lt=>lt.id===o);let V=null;C>-1&&(V=a.splice(C,1)[0]);const W=V!==null?this.renderWithRelativeNode({nodeDataMap:e,sourceId:o,relativeNode:V,depth:u+1}):this.renderNew({nodeDataMap:e,sourceId:o,depth:u+1,father:g});g.pushChild(W)}),a.forEach(o=>{o.remove()}),g}renderNew({nodeDataMap:e,sourceId:r,depth:h,father:u}){const g=e[r],w=this.createNode({id:r,depth:h,label:g.label,direction:g.direction,father:u,isExpand:g.isExpand});return g.children.forEach(a=>{if(!e[a])return;const k=this.renderNew({nodeDataMap:e,sourceId:a,depth:h+1,father:w});w.pushChild(k)}),w}}class fr{constructor({data:e,viewport:r,selection:h,nodeCreator:u}){b(this,"root");b(this,"position");b(this,"selection");b(this,"treeRenderer");b(this,"nodeCreator");this.selection=h,this.nodeCreator=u,this.root=this.createRoot(e,r),this.position=new ri(this.root),this.treeRenderer=new pr({root:this.root,position:this.position,createNode:u.createNode}),this.render(e)}getRoot(){return this.root}clear(){this.root.remove()}render(e){this.treeRenderer.render(e)}createRoot(e={},r){let h=Object.keys(e).find(V=>e[V].isRoot===!0);const u=e[h],g=this.nodeCreator.createNode({id:h,depth:0,label:u.label,direction:u.direction}),{width:w,height:a}=r.getViewbox(),o=g.getBBox(),k=(w-o.width)/2,C=(a-o.height)/2;return g.translateTo(k,C),g}}class gr{constructor({position:e,selection:r,dataProxy:h,createNode:u}){b(this,"position");b(this,"selection");b(this,"dataProxy");b(this,"createNode");b(this,"changeFather",({newFather:e,direction:r,nodes:h,childIndex:u})=>{this.dataProxy.addSnapshot();const g=h.map(a=>this.cloneNode(a,e,r)),w=u===void 0?e.getDirectionChildren(r).length:u;e.spliceChild(w,0,r,g),e.changeExpand(!0),h.forEach(a=>a.remove()),this.selection.select(g),this.position.reset(),this.dataProxy.resetData()});this.position=e,this.selection=r,this.dataProxy=h,this.createNode=u}cloneNode(e,r,h){const u=this.createNode({id:ei(),depth:r.depth+1,label:e.label,direction:h,father:r,isExpand:e.isExpand});return e.children.forEach(g=>{const w=this.cloneNode(g,u,h);u.pushChild(w)}),u}}const Ei="Main Topic",ki="Subtopic";class vr{constructor({root:e,selection:r,dataProxy:h,nodeCreator:u}){b(this,"position");b(this,"selection");b(this,"dataProxy");b(this,"nodeCreator");b(this,"changeFatherOperation");b(this,"changeFather",e=>{this.changeFatherOperation.changeFather(e)});this.position=new ri(e),this.dataProxy=h,this.selection=r,this.nodeCreator=u,this.changeFatherOperation=new gr({position:this.position,selection:r,dataProxy:h,createNode:this.nodeCreator.createNode})}addChildNode(){var g;const e=this.selection.getSingleSelectNode();if(!e)return;let r=e.direction;if(e.isRoot()){const w=(g=e.children)==null?void 0:g.reduce((a,o)=>(o.direction===bt.LEFT?a[0]+=1:a[1]+=1,a),[0,0]);r=w[1]>w[0]?bt.LEFT:bt.RIGHT}const h=e.depth+1,u=this.nodeCreator.createNode({depth:h,label:ae(h)===zt.firstLevel?Ei:ki,direction:r,father:e});this.dataProxy.addSnapshot(),e.pushChild(u),e.changeExpand(!0),this.position.reset(r),this.selection.select([u]),this.dataProxy.resetData()}addBrotherNode(){const e=this.selection.getSingleSelectNode();if(!e)return;if(e.isRoot()){this.addChildNode();return}const r=e.direction,h=e.father,u=e.depth,g=this.nodeCreator.createNode({depth:u,label:ae(u)===zt.firstLevel?Ei:ki,direction:r,father:h});this.dataProxy.addSnapshot(),h.insertAfterChild(e,g),this.position.reset(r),this.selection.select([g]),this.dataProxy.resetData()}removeNode(){const e=this.selection.getTopNodes();if(e.length===0)return;const r=this.selection.getRemoveNextNode();this.dataProxy.addSnapshot(),e.forEach(h=>{h.remove()}),this.position.reset(),this.selection.select(r!==null?[r]:[]),this.dataProxy.resetData()}}var ie={},mr={get exports(){return ie},set exports(T){ie=T}};(function(T){var e=Object.prototype.hasOwnProperty,r="~";function h(){}Object.create&&(h.prototype=Object.create(null),new h().__proto__||(r=!1));function u(o,k,C){this.fn=o,this.context=k,this.once=C||!1}function g(o,k,C,V,W){if(typeof C!="function")throw new TypeError("The listener must be a function");var lt=new u(C,V||o,W),Q=r?r+k:k;return o._events[Q]?o._events[Q].fn?o._events[Q]=[o._events[Q],lt]:o._events[Q].push(lt):(o._events[Q]=lt,o._eventsCount++),o}function w(o,k){--o._eventsCount===0?o._events=new h:delete o._events[k]}function a(){this._events=new h,this._eventsCount=0}a.prototype.eventNames=function(){var k=[],C,V;if(this._eventsCount===0)return k;for(V in C=this._events)e.call(C,V)&&k.push(r?V.slice(1):V);return Object.getOwnPropertySymbols?k.concat(Object.getOwnPropertySymbols(C)):k},a.prototype.listeners=function(k){var C=r?r+k:k,V=this._events[C];if(!V)return[];if(V.fn)return[V.fn];for(var W=0,lt=V.length,Q=new Array(lt);W<lt;W++)Q[W]=V[W].fn;return Q},a.prototype.listenerCount=function(k){var C=r?r+k:k,V=this._events[C];return V?V.fn?1:V.length:0},a.prototype.emit=function(k,C,V,W,lt,Q){var q=r?r+k:k;if(!this._events[q])return!1;var J=this._events[q],Ct=arguments.length,U,R;if(J.fn){switch(J.once&&this.removeListener(k,J.fn,void 0,!0),Ct){case 1:return J.fn.call(J.context),!0;case 2:return J.fn.call(J.context,C),!0;case 3:return J.fn.call(J.context,C,V),!0;case 4:return J.fn.call(J.context,C,V,W),!0;case 5:return J.fn.call(J.context,C,V,W,lt),!0;case 6:return J.fn.call(J.context,C,V,W,lt,Q),!0}for(R=1,U=new Array(Ct-1);R<Ct;R++)U[R-1]=arguments[R];J.fn.apply(J.context,U)}else{var ct=J.length,rt;for(R=0;R<ct;R++)switch(J[R].once&&this.removeListener(k,J[R].fn,void 0,!0),Ct){case 1:J[R].fn.call(J[R].context);break;case 2:J[R].fn.call(J[R].context,C);break;case 3:J[R].fn.call(J[R].context,C,V);break;case 4:J[R].fn.call(J[R].context,C,V,W);break;default:if(!U)for(rt=1,U=new Array(Ct-1);rt<Ct;rt++)U[rt-1]=arguments[rt];J[R].fn.apply(J[R].context,U)}}return!0},a.prototype.on=function(k,C,V){return g(this,k,C,V,!1)},a.prototype.once=function(k,C,V){return g(this,k,C,V,!0)},a.prototype.removeListener=function(k,C,V,W){var lt=r?r+k:k;if(!this._events[lt])return this;if(!C)return w(this,lt),this;var Q=this._events[lt];if(Q.fn)Q.fn===C&&(!W||Q.once)&&(!V||Q.context===V)&&w(this,lt);else{for(var q=0,J=[],Ct=Q.length;q<Ct;q++)(Q[q].fn!==C||W&&!Q[q].once||V&&Q[q].context!==V)&&J.push(Q[q]);J.length?this._events[lt]=J.length===1?J[0]:J:w(this,lt)}return this},a.prototype.removeAllListeners=function(k){var C;return k?(C=r?r+k:k,this._events[C]&&w(this,C)):(this._events=new h,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,T.exports=a})(mr);class $i{constructor(e){b(this,"eventArgs",{});this.shape=e}on(e,...r){e&&(this.eventArgs[e]===void 0&&(this.eventArgs[e]=[]),this.eventArgs[e].push(r),this.shape[e](...r))}removeAllListeners(){Object.keys(this.eventArgs).forEach(r=>{const h=this.eventArgs[r];h==null||h.forEach(u=>{this.shape[`un${r}`](...u)})})}}const Ye=5,He=3,Je=2,Ci=Ye*2+Je+3;class yr{constructor({paper:e,nodeBBox:r,isExpand:h,direction:u}){b(this,"paper");b(this,"circleShape");b(this,"horizontalShape");b(this,"verticalShape");b(this,"shapeSet");b(this,"shapeEventEmitter");b(this,"isExpand");this.paper=e,this.isExpand=h,this.shapeSet=e.set();const{x:g,y:w}=this.getPosition(r,u);this.circleShape=e.circle(g,w,Ye),this.circleShape.attr({fill:"#fff","fill-opacity":1}),this.circleShape.node.style.cursor="pointer";const{cx:a,cy:o}=this.circleShape.getBBox();this.horizontalShape=e.path([`M${a-He} ${o}`,`L${a+He} ${o}`].join(" ")),this.verticalShape=this.paper.path([`M${a} ${o-He}`,`L${a} ${o+He}`].join(" ")),this.shapeSet.push(this.circleShape).push(this.horizontalShape).push(this.verticalShape),h&&this.verticalShape.hide(),this.shapeSet.attr({stroke:"#000","stroke-opacity":.7}),this.shapeSet.toFront(),this.shapeEventEmitter=new $i(this.shapeSet),this.initHover()}on(e,...r){this.shapeEventEmitter.on(e,...r)}changeExpand(e){this.isExpand!==e&&(e?this.verticalShape.hide():this.verticalShape.show(),this.isExpand=e)}translateTo(e,r){const{x:h,y:u}=this.getPosition(e,r),{cx:g,cy:w}=this.getBBox(),a=h-g,o=u-w;a===0&&o===0||this.shapeSet.translate(a,o)}getBBox(){return this.circleShape.getBBox()}remove(){this.shapeSet.remove(),this.shapeEventEmitter.removeAllListeners()}setStyle(e){switch(e){case"disable":{this.setStyle("base"),this.shapeSet.attr({opacity:.4});break}case"hover":{this.setStyle("base"),this.circleShape.attr({fill:"#E7E7E7","fill-opacity":1});break}case"base":default:{this.shapeSet.attr({opacity:1}),this.circleShape.attr({fill:"#fff","fill-opacity":1});break}}}getPosition(e,r){let h=0;const u=e.cy;return r===bt.RIGHT?h=e.x2+Ye+Je:h=e.x-Ye-Je,{x:h,y:u}}initHover(){this.shapeEventEmitter.on("hover",()=>{this.setStyle("hover")},()=>{this.setStyle("base")})}}class xr{constructor({paper:e,position:r,node:h,nodeShape:u,isExpand:g,traverse:w}){b(this,"paper");b(this,"position");b(this,"node");b(this,"nodeShape");b(this,"eventEmitter");b(this,"traverse");b(this,"expanderShape",null);b(this,"isExpand");this.paper=e,this.position=r,this.node=h,this.nodeShape=u,this.isExpand=g,this.traverse=w,this.eventEmitter=new ie}getIsExpand(){return this.isExpand}changeExpand(e,r=!0){var h;if(this.isExpand!==e){if(this.node.children.length===0){this.remove();return}(h=this.expanderShape)==null||h.changeExpand(e),this.isExpand=e,e||this.node.children.forEach(u=>{this.traverse(u,this.hideNode)}),r&&this.position.reset(this.node.direction)}}create(){this.createShape(),this.translateShape()}remove(){var e;(e=this.expanderShape)==null||e.remove(),this.expanderShape=null,this.eventEmitter.removeAllListeners()}on(e,r){this.eventEmitter.on(e,r)}setStyle(e){var r;(r=this.expanderShape)==null||r.setStyle(e)}createShape(){var e;this.node.isRoot()||this.expanderShape!==null||this.node.children.length===0||this.nodeShape.getIsHide()||(this.expanderShape=new yr({paper:this.paper,nodeBBox:this.node.getBBox(),isExpand:this.isExpand,direction:this.node.direction}),(e=this.expanderShape)==null||e.on("mousedown",r=>{r.stopPropagation();const h=!this.isExpand;this.changeExpand(h),this.eventEmitter.emit("mousedownExpander",h)}))}translateShape(){var e;(e=this.expanderShape)==null||e.translateTo(this.node.getBBox(),this.node.direction)}hideNode({nodeShape:e,expander:r,removeEdgeShape:h}){e.hide(),r.remove(),h()}}const Yi=({paper:T,sourceBBox:e,targetBBox:r,direction:h})=>{const u=e.cx,g=e.cy,w=h===bt.LEFT?r.x2:r.x,a=r.cy,o=.8,k=.2,C=w-o*(w-u),V=a-k*(a-g);return T.path(`M${u} ${g}Q${C} ${V} ${w} ${a}`)},Gi=({paper:T,sourceBBox:e,targetBBox:r,direction:h,targetDepth:u,hasUnder:g=!1})=>{let w=0,a=0,o=0,k=0,C=0,V=0,W=0,lt=0;h===bt.RIGHT?(w=e.x2,o=w+Ci,C=r.x,W=r.x2):(w=e.x,o=w-Ci,C=r.x2,W=r.x),u===2?a=e.cy:a=e.y2,k=a,V=g?r.y2:r.cy,lt=V;const Q=br(o,k,C,V);let q=`M${w} ${a} L${o} ${k} ${Q}`;return g&&(q+=` M ${C} ${V} L${W} ${lt}`),T.path(q)},br=(T,e,r,h)=>{const w=T+.3*(r-T),a=e+.76*(h-e),o=.5,k=0,C=r-o*(r-T),V=h-k*(h-e);return`M${T} ${e}C${w} ${a} ${C} ${V} ${r} ${h}`},wr=55,Sr=14,Ze=50,Ni=13,Bi=3;class Li{constructor({paper:e,sourceBBox:r,targetBBox1:h,targetBBox2:u,targetDepth:g,direction:w}){b(this,"paper");b(this,"shapeSet");this.paper=e;const a=h||u,o=g===1?wr:Sr;let k=0;if(a!==null)k=w===bt.RIGHT?a.x:a.x2-Ze;else{const Q=Oi(g);k=w===bt.RIGHT?r.x2+Q:r.x-Q-Ze}let C=0;h!==null&&u!==null?C=(u.y+h.y2)/2:h!==null&&u===null?(C=h.y2+o,g>1&&(C+=Bi)):h===null&&u!==null?(C=u.y-o,g>1&&(C+=Bi)):C=r.cy;const V=C-Ni/2,W=this.drawRect({x:k,y:V}),lt=this.drawPath({sourceBBox:r,targetBBox:W.getBBox(),targetDepth:g,direction:w});this.shapeSet=e.set().push(W).push(lt)}remove(){this.shapeSet.remove()}drawRect({x:e,y:r}){const h=this.paper.rect(e,r,Ze,Ni,6);return h.attr({fill:"#E74C3C","stroke-opacity":0,opacity:.8}),h}drawPath({sourceBBox:e,targetBBox:r,targetDepth:h,direction:u}){const g=h===1?Yi({paper:this.paper,sourceBBox:e,targetBBox:r,direction:u}):Gi({paper:this.paper,sourceBBox:e,targetBBox:r,direction:u,targetDepth:h});return g.attr({stroke:"#E74C3C","stroke-width":2,opacity:.6}),g}}class _r{constructor(e,r){b(this,"shape",null);this.paper=e,this.node=r}draw(e){var r,h,u;if((r=this.shape)==null||r.remove(),e===null)this.shape=null;else{const{father:g,childIndex:w,isOwnArea:a,direction:o}=e,k=this.node.getBBox(),C=g.getBBox();if(a)this.shape=new Li({paper:this.paper,sourceBBox:C,targetBBox1:k,targetBBox2:k,targetDepth:g.depth+1,direction:o});else{const V=g.getDirectionChildren(o),W=((h=V[w-1])==null?void 0:h.getBBox())||null,lt=((u=V[w])==null?void 0:u.getBBox())||null;this.shape=new Li({paper:this.paper,sourceBBox:C,targetBBox1:W,targetBBox2:lt,targetDepth:g.depth+1,direction:o})}g.isRoot()&&g.nodeShapeToFront()}}clear(){var e;(e=this.shape)==null||e.remove(),this.shape=null}}let ti={isDebug:!1};const Er=T=>{ti={...ti,...T}},Di=()=>ti;class kr{constructor(e){b(this,"shapeSet",null);this.paper=e}draw(e){const{isDebug:r}=Di();r&&(this.shapeSet=this.paper.set(),e.forEach(({node:h,areaBox:u,childrenYList:g})=>{var W,lt;let w="green";h.children.length===0?w="red":h.depth===0&&(w="orange");const{x:a,y:o,x2:k,y2:C}=u,V=this.paper.rect(a,o,k-a,C-o).attr({"stroke-opacity":0,fill:w,opacity:.2});(W=this.shapeSet)==null||W.push(V),g==null||g.forEach(Q=>{var J;const q=this.paper.path(`M${a} ${Q}L${k} ${Q}`).attr({stroke:w,opacity:.6});(J=this.shapeSet)==null||J.push(q)}),(lt=this.shapeSet)==null||lt.toBack()}))}clear(){var r;const{isDebug:e}=Di();e&&((r=this.shapeSet)==null||r.remove())}}const Cr=80,Ti=100;class Nr{constructor(e,r){b(this,"root");b(this,"drawDragArea",null);b(this,"dragTemp");b(this,"areaList",[]);b(this,"hitArea",null);this.node=r,this.dragTemp=new _r(e,r),this.drawDragArea=new kr(e),this.root=r.getRoot()}drawTemp(e,r){const h=this.getHitArea(e,r);this.isSameHitArea(this.hitArea,h)||(this.dragTemp.draw(h),this.hitArea=h)}init(){var e;this.areaList=this.getAreaList(this.root),(e=this.drawDragArea)==null||e.draw(this.areaList)}clear(){var e;this.areaList=[],(e=this.drawDragArea)==null||e.clear(),this.dragTemp.clear()}getCurrentHitArea(){return this.hitArea}getHitArea(e,r){for(let h=0;h<this.areaList.length;h++){const{node:u,areaBox:g,childrenYList:w,direction:a}=this.areaList[h];if(e>=g.x&&e<=g.x2&&r>=g.y&&r<=g.y2){if(!w||w.length===0)return{father:u,childIndex:0,isOwnArea:this.isOwnArea(u,0,a),direction:a};for(let o=0;o<w.length-1;o++)if(r>=w[o]&&r<w[o+1])return{father:u,childIndex:o,isOwnArea:this.isOwnArea(u,o,a),direction:a}}}return null}isOwnArea(e,r,h){var w,a;const u=(w=this.node.father)==null?void 0:w.getDirectionChildren(h),g=u==null?void 0:u.findIndex(o=>o.id===this.node.id);return(e==null?void 0:e.id)===((a=this.node.father)==null?void 0:a.id)&&g!==void 0&&g>-1&&(r===g||r===g+1)}isSameHitArea(e,r){return(e==null?void 0:e.father.id)===(r==null?void 0:r.father.id)&&(e==null?void 0:e.childIndex)===(r==null?void 0:r.childIndex)&&(e==null?void 0:e.direction)===(r==null?void 0:r.direction)}getAreaList(e){const r=[],h=[{node:e,direction:bt.RIGHT},{node:e,direction:bt.LEFT}];for(;h.length>0;){const u=h.length;for(let g=0;g<u;g++){const{node:w,direction:a}=h.shift();if(this.node.id===w.id)continue;const o=this.getArea(w,a);r.unshift(o),w.getDirectionChildren(a).forEach(k=>h.push({node:k,direction:a}))}}return r}getArea(e,r){const h={x:0,y:0,x2:0,y2:0},u=e.getBBox(),g=e.getDirectionChildren(r);let w=0,a=0;if(g.length===0)w=u.y,a=u.y2;else{const V=g[0],W=g[g.length-1];w=V.getBBox().y,a=W.getBBox().y2}const o=this.getNodeYGap(e);w-=o,a+=o;const k=this.getChildBoundaryX(e,r);h.y=w,h.y2=a,e.isRoot()?(h.x=r===bt.RIGHT?u.cx:k,h.x2=r===bt.RIGHT?k:u.cx):(h.x=r===bt.RIGHT?u.x2:k,h.x2=r===bt.RIGHT?k:u.x);const C=this.getChildrenYList(g,h);return{node:e,areaBox:h,direction:r,childrenYList:C}}getChildrenYList(e,r){const h=[r.y];return e.forEach(u=>{const g=u.getBBox();h.push(g.cy)}),h.push(r.y2),h}getNodeYGap(e){const r=e.isRoot()?Cr:0;return(ii(e.depth)+r)/2}getChildBoundaryX(e,r){const h=e.getDirectionChildren(r);if(h.length===0){const a=e.getBBox();return r===bt.RIGHT?a.x2+Ti:a.x-Ti}let u=h[0],g=u.getBBox().width;for(let a=1;a<h.length;a++){const o=h[a],k=o.getBBox();k.width>g&&(g=k.width,u=o)}const w=u.getBBox();return r===bt.RIGHT?w.x2:w.x}}class Br{constructor(e){b(this,"clonedNodeShape",null);this.originNodeShape=e}init(){this.clonedNodeShape=this.originNodeShape.clone(),this.clonedNodeShape.setStyle("disable")}translate(e,r){var h;(h=this.clonedNodeShape)==null||h.translate(e,r)}clear(){var e;(e=this.clonedNodeShape)==null||e.remove()}}const Ii=2;class Lr{constructor({paper:e,node:r,nodeShape:h,viewport:u,traverse:g}){b(this,"node");b(this,"viewport");b(this,"paper");b(this,"dragArea");b(this,"dragClonedNode");b(this,"eventEmitter");b(this,"hitFather",null);b(this,"traverse");b(this,"isStart",!1);b(this,"isMoveInited",!1);b(this,"startX",0);b(this,"startY",0);b(this,"lastDx",0);b(this,"lastDy",0);b(this,"styleTypeMap",{});b(this,"start",(e,r,h)=>{h.stopPropagation(),this.isStart=!0;const u=this.viewport.getViewportPosition(e,r);this.startX=u.x,this.startY=u.y});b(this,"move",(e,r)=>{var w,a;const h=this.viewport.getScale(),u=e/h,g=r/h;if(this.isStart){if(!this.isMoveInited&&(Math.abs(e)>Ii||Math.abs(r)>Ii)&&(this.dragArea.init(),this.dragClonedNode.init(),this.dragClonedNode.translate(this.lastDx,this.lastDy),this.traverse(this.node,({node:o,nodeShape:k,expander:C,edgeShape:V})=>{this.styleTypeMap[o.id]=k.getStyle(),k.setStyle("disable"),C.setStyle("disable"),V==null||V.setStyle("disable")}),this.isMoveInited=!0,document.body.style.cursor="grabbing"),this.isMoveInited){const o=this.startX+u,k=this.startY+g;this.dragArea.drawTemp(o,k);const C=u-this.lastDx,V=g-this.lastDy;this.dragClonedNode.translate(C,V);const W=this.dragArea.getCurrentHitArea();(W==null?void 0:W.father.id)!==((w=this.hitFather)==null?void 0:w.id)&&(W==null||W.father.setStyle("overlay"),(a=this.hitFather)==null||a.setStyle("base")),this.hitFather=(W==null?void 0:W.father)||null}this.lastDx=u,this.lastDy=g}});b(this,"end",()=>{var r;if(this.isStart=!1,this.startX=0,this.startY=0,!this.isMoveInited)return;this.isMoveInited=!1,this.lastDx=0,this.lastDy=0,(r=this.hitFather)==null||r.setStyle("base"),this.hitFather=null;const e=this.dragArea.getCurrentHitArea();this.eventEmitter.emit("dragEnd",e),this.dragArea.clear(),this.dragClonedNode.clear(),document.body.style.cursor="default",this.traverse(this.node,({node:h,nodeShape:u,expander:g,edgeShape:w})=>{const a=this.styleTypeMap[h.id];u.setStyle(a),g.setStyle("base"),w==null||w.setStyle("base")}),this.styleTypeMap={}});this.paper=e,this.node=r,this.viewport=u,this.traverse=g,this.dragArea=new Nr(this.paper,r),this.dragClonedNode=new Br(h),this.eventEmitter=new ie,h.on("drag",this.move,this.start,this.end)}clear(){this.eventEmitter.removeAllListeners()}on(e,r){this.eventEmitter.on(e,r)}}const Dr={"font-size":16,fill:"#000",opacity:1},Tr={"fill-opacity":0,stroke:"#808080","stroke-opacity":1,opacity:1},Ir={stroke:"#fff","stroke-width":2,fill:"#fff","fill-opacity":0,opacity:0};class Mr{constructor({shapeSet:e,labelShape:r,borderShape:h,rectShape:u,labelBaseAttr:g,rectBaseAttr:w,borderBaseAttr:a}){b(this,"shapeSet");b(this,"borderShape");b(this,"labelShape");b(this,"rectShape");b(this,"labelBaseAttr");b(this,"rectBaseAttr");b(this,"borderBaseAttr");b(this,"styleType","base");this.shapeSet=e,this.labelShape=r,this.borderShape=h,this.rectShape=u,this.labelBaseAttr={...Dr,...g},this.rectBaseAttr={...Tr,...w},this.borderBaseAttr={...Ir,...a}}setBaseStyle(){this.labelShape.attr(this.labelBaseAttr),this.borderShape.attr(this.borderBaseAttr),this.rectShape.attr(this.rectBaseAttr)}setStyle(e){switch(e){case"select":{this.setBaseStyle(),this.borderShape.attr({stroke:"#3498DB",opacity:1});break}case"overlay":{this.setBaseStyle(),this.borderShape.attr({stroke:"#E74C3C",opacity:.8});break}case"disable":{this.shapeSet.attr({opacity:.4});break}case"hover":{this.setBaseStyle(),this.borderShape.attr({stroke:"#3498DB",opacity:.5});break}case"base":default:{this.setBaseStyle();break}}this.styleType=e}getStyle(){return this.styleType}getBaseAttr(){return{labelBaseAttr:this.labelBaseAttr,borderBaseAttr:this.borderBaseAttr,rectBaseAttr:this.rectBaseAttr}}}const Rr=-999999,Ar=-999999,Pr=40,zr=37,Fe=6;class De{constructor({paper:e,x:r,y:h,label:u,paddingWidth:g=Pr,rectHeight:w=zr,labelBaseAttr:a,rectBaseAttr:o,borderBaseAttr:k}){b(this,"paper");b(this,"shapeSet");b(this,"borderShape");b(this,"labelShape");b(this,"rectShape");b(this,"paddingWidth");b(this,"rectHeight");b(this,"shapeEventEmitter");b(this,"nodeShapeStyle");b(this,"label");b(this,"isHide",!1);b(this,"isHoverInCalled",!1);this.paper=e,this.label=u,this.paddingWidth=g,this.rectHeight=w;const C=r!==void 0&&h!==void 0,V=C?r:Rr,W=C?h:Ar;this.labelShape=e.text(V,W,u),this.borderShape=e.rect(V,W,0,0,4),this.rectShape=e.rect(V,W,0,0,4),this.shapeSet=e.set().push(this.labelShape).push(this.borderShape).push(this.rectShape),this.nodeShapeStyle=new Mr({shapeSet:this.shapeSet,labelShape:this.labelShape,borderShape:this.borderShape,rectShape:this.rectShape,labelBaseAttr:a,rectBaseAttr:o,borderBaseAttr:k}),this.nodeShapeStyle.setBaseStyle(),this.labelShape.toFront(),this.labelShape.node.style["user-select"]="none",this.setPosition(V,W),this.shapeEventEmitter=new $i(this.shapeSet),C||this.hide(),this.initHover()}getBBox(){return this.rectShape.getBBox()}setLabel(e,r){const h=this.labelShape.getBBox();this.labelShape.attr({text:e});const u=this.labelShape.getBBox(),g=this.getBBox(),w=u.width-h.width;this.setPosition(g.x,g.y),r!==bt.RIGHT&&r!==bt.LEFT&&this.shapeSet.translate(-w/2,0),this.label=e}translateTo(e,r){const{x:h,y:u}=this.getBBox(),g=e-h,w=r-u;this.show(),!(g===0&&w===0)&&this.shapeSet.translate(g,w)}translate(e,r){this.shapeSet.translate(e,r)}setStyle(e){this.nodeShapeStyle.setStyle(e)}getStyle(){return this.nodeShapeStyle.getStyle()}clone(){const{x:e,y:r}=this.getBBox();return new De({paper:this.paper,x:e,y:r,label:this.label,paddingWidth:this.paddingWidth,rectHeight:this.rectHeight,...this.nodeShapeStyle.getBaseAttr()})}remove(){this.shapeSet.remove(),this.shapeEventEmitter.removeAllListeners()}on(e,...r){this.shapeEventEmitter.on(e,...r)}show(){this.shapeSet.show(),this.isHide=!1}hide(){this.shapeSet.hide(),this.isHide=!0}getIsHide(){return this.isHide}toFront(){this.borderShape.toFront(),this.rectShape.toFront(),this.labelShape.toFront()}shapeTranslateTo(e,r,h){const{x:u,y:g}=e.getBBox(),w=r-u,a=h-g;w===0&&a===0||e.translate(w,a)}setPosition(e,r){const{labelShape:h,borderShape:u,rectShape:g,paddingWidth:w,rectHeight:a}=this,o=h.getBBox(),k=o.width+w;g.attr({width:k,height:a}),u.attr({width:k+Fe,height:a+Fe});const C=g.getBBox();this.shapeTranslateTo(h,e+(C.width-o.width)/2,r+(C.height-o.height)/2),this.shapeTranslateTo(g,e,r),this.shapeTranslateTo(u,e-Fe/2,r-Fe/2)}initHover(){this.shapeEventEmitter.on("hover",()=>{const e=this.nodeShapeStyle.getStyle();e!=="select"&&e!=="disable"&&(this.nodeShapeStyle.setStyle("hover"),this.isHoverInCalled=!0)},()=>{const e=this.nodeShapeStyle.getStyle();this.isHoverInCalled&&e!=="select"&&e!=="disable"&&(this.nodeShapeStyle.setStyle("base"),this.isHoverInCalled=!1)})}}const Vi=16,Hr=40,Fr=37;function Or(T){return new De({...T,labelBaseAttr:{"font-size":Vi},rectBaseAttr:{fill:"#eee","fill-opacity":1,stroke:"#808080","stroke-opacity":0},paddingWidth:Hr,rectHeight:Fr})}const Xi=13,$r=20,Yr=21;function Gr(T){return new De({...T,labelBaseAttr:{"font-size":Xi},rectBaseAttr:{"stroke-opacity":0},paddingWidth:$r,rectHeight:Yr})}const Wi=25,Vr=42,Xr=52;function Wr(T){return new De({...T,labelBaseAttr:{"font-size":Wi,fill:"#fff","fill-opacity":1},rectBaseAttr:{fill:"#3F89DE","fill-opacity":1,"stroke-opacity":0},paddingWidth:Vr,rectHeight:Xr})}class jr{constructor({paper:e,sourceBBox:r,targetBBox:h,direction:u}){b(this,"shape");this.shape=Yi({paper:e,sourceBBox:r,targetBBox:h,direction:u}),this.shape.attr({stroke:"#000","stroke-width":2}),this.shape.toBack()}setStyle(e){switch(e){case"disable":{this.shape.attr({opacity:.4});break}case"base":default:{this.shape.attr({opacity:1});break}}}remove(){this.shape.remove()}}function qr(T){return new jr(T)}class Ur{constructor({paper:e,sourceBBox:r,targetBBox:h,direction:u,targetDepth:g}){b(this,"shape");this.shape=Gi({paper:e,sourceBBox:r,targetBBox:h,direction:u,targetDepth:g,hasUnder:!0}),this.shape.attr({stroke:"#000","stroke-width":1.5}),this.shape.toBack()}setStyle(e){switch(e){case"disable":{this.shape.attr({opacity:.4});break}case"base":default:{this.shape.attr({opacity:1});break}}}remove(){this.shape.remove()}}function Kr(T){return new Ur(T)}class Zr{constructor({paper:e,depth:r,label:h,direction:u,father:g}){b(this,"paper");b(this,"depth");b(this,"label");b(this,"father",null);b(this,"direction");this.paper=e,this.depth=r,this.label=h,this.father=g,this.direction=u}createNode(e,r){const{paper:h,depth:u,label:g}=this,w={paper:h,x:e,y:r,label:g},a=ae(u);return a===zt.root?Wr(w):a===zt.firstLevel?Or(w):Gr(w)}createEdge(e){const{father:r,direction:h,depth:u}=this;if(!r||!h)return null;const g=ae(u);return g===zt.firstLevel?qr({paper:this.paper,sourceBBox:r.getBBox(),targetBBox:e.getBBox(),direction:h}):g===zt.grandchild?Kr({paper:this.paper,sourceBBox:r.getBBox(),targetBBox:e.getBBox(),direction:h,targetDepth:this.depth}):null}}class Qr{constructor({paper:e,id:r,depth:h,label:u,direction:g,x:w,y:a,father:o=null,isExpand:k,viewport:C}){b(this,"position");b(this,"shapeGenerator");b(this,"_id");b(this,"_depth");b(this,"_direction");b(this,"_father",null);b(this,"nodeShape");b(this,"expander");b(this,"drag",null);b(this,"_label");b(this,"_children");b(this,"edgeShape",null);b(this,"removeEdgeShape",()=>{var e;(e=this.edgeShape)==null||e.remove(),this.edgeShape=null});this._id=r,this._depth=h,this._direction=g,this._father=o||null,this._label=u,this._children=[],this.shapeGenerator=new Zr({paper:e,depth:h,label:u,direction:g,father:o}),this.nodeShape=this.shapeGenerator.createNode(w,a),(w!==void 0||a!==void 0)&&(this.edgeShape=this.shapeGenerator.createEdge(this.nodeShape)),this.isRoot()||(this.drag=new Lr({paper:e,node:this,viewport:C,nodeShape:this.nodeShape,traverse:this.traverse})),this.position=new ri(this.getRoot()),this.expander=new xr({paper:e,position:this.position,node:this,nodeShape:this.nodeShape,isExpand:k===void 0?!0:k,traverse:this.traverse})}get id(){return this._id}get depth(){return this._depth}get direction(){return this._direction}get father(){return this._father}get label(){return this._label}get children(){return this._children}get isExpand(){return this.expander.getIsExpand()}getDirectionChildren(e){var r;return((r=this.children)==null?void 0:r.filter(h=>h.direction===e))||[]}getBBox(){return this.nodeShape.getBBox()}getDepthType(){return ae(this.depth)}getRoot(){let e=this;for(;e&&e.getDepthType()!==zt.root;)e=e.father;return e}isRoot(){return this.getDepthType()===zt.root}on(e,...r){var w;const h=["mousedown","click","dblclick","drag"],u=["mousedownExpander"],g=["dragEnd"];if(h.includes(e)){if(e==="drag"&&!this.isRoot())return;this.nodeShape.on(e,...r)}else u.includes(e)?this.expander.on(e,...r):g.includes(e)&&((w=this.drag)==null||w.on(e,...r))}clearChild(){this._children=[]}pushChild(e){this.children.push(e)}insertAfterChild(e,r){const h=this.children.findIndex(u=>u.id===e.id);h>-1&&this.children.splice(h+1,0,r)}spliceChild(e,r,h,u){if(this.isRoot()){let g=-1,w=0,a=0;for(a=0;a<this.children.length;a++)if(this.children[a].direction===h){if(e===w){g=a;break}w++}g===-1&&(g=a),this.children.splice(g,r,...u)}else this.children.splice(e,r,...u)}changeExpand(e,r=!0){e!==void 0&&this.expander.changeExpand(e,r)}translateTo(e,r){var h;this.nodeShape.translateTo(e,r),this.removeEdgeShape(),this.edgeShape=this.shapeGenerator.createEdge(this.nodeShape),(h=this.father)==null||h.expander.create(),this.expander.create()}remove(){var e,r;if(!this.isRoot()){const h=(e=this.father)==null?void 0:e.children;if(!h)return;const u=h==null?void 0:h.findIndex(g=>this.id===g.id);u>-1&&h.splice(u,1),h.length===0&&((r=this.father)==null||r.expander.remove())}this.traverse(this,({node:h})=>{var u;h.nodeShape.remove(),h.removeEdgeShape(),h.expander.remove(),(u=h.drag)==null||u.clear()})}setLabel(e,r=!0){this._label=e,this.nodeShape.setLabel(e,this.direction),r&&this.position.reset(this.direction)}setStyle(e){this.nodeShape.setStyle(e)}nodeShapeToFront(){this.nodeShape.toFront()}traverse(e,r){r({node:e,nodeShape:e.nodeShape,expander:e.expander,edgeShape:e.edgeShape,removeEdgeShape:e.removeEdgeShape}),e.children.forEach(h=>this.traverse(h,r))}}const Jr=["mousedown","click","dblclick","mousedownExpander","dragEnd"];class ts{constructor({paper:e,viewport:r}){b(this,"paper");b(this,"viewport");b(this,"eventEmitter");b(this,"createNode",({id:e,depth:r,label:h,direction:u,x:g,y:w,father:a,isExpand:o})=>{const k=new Qr({paper:this.paper,id:e||ei(),depth:r,label:h,direction:u,x:g,y:w,father:a,isExpand:o,viewport:this.viewport});return Jr.forEach(C=>{k.on(C,(...V)=>{this.eventEmitter.emit(C,k,...V)})}),k});this.paper=e,this.viewport=r,this.eventEmitter=new ie}on(e,r){this.eventEmitter.on(e,r)}clear(){this.eventEmitter.removeAllListeners()}}class es{constructor({nodeCreator:e,selection:r,textEditor:h,dataProxy:u,treeOperation:g}){e.on("mousedown",w=>{r.selectSingle(w)}),e.on("dblclick",()=>{h.showBySelectionLabel()}),e.on("dragEnd",(w,a)=>{var o;a!==null&&!a.isOwnArea&&((o=g.changeFather)==null||o.call(g,{newFather:a.father,direction:a.direction,nodes:[w],childIndex:a.childIndex}))}),e.on("mousedownExpander",(w,a)=>{u.setData(w.id,{isExpand:a}),r.select([w])})}}const Oe=3,$e=.25;class is{constructor(e,r=1){b(this,"paper");b(this,"eventEmitter");b(this,"viewbox",{x:0,y:0,width:0,height:0});b(this,"wrapperWidth");b(this,"wrapperHeight");this.paperWrapper=e,this.scale=r,this.paper=this.paperWrapper.getPaper();const h=this.paperWrapper.getSize();this.wrapperWidth=h.width,this.wrapperHeight=h.height,this.eventEmitter=new ie,r>Oe?r=Oe:r<$e&&(r=$e),this.setScale(r)}getViewbox(){return this.viewbox}getScale(){return this.scale}setScale(e){e>Oe?e=Oe:e<$e&&(e=$e);const r=this.viewbox;r.width=this.wrapperWidth/e,r.height=this.wrapperHeight/e,r.x=this.getScalePosition(this.scale,e,r.x,this.wrapperWidth),r.y=this.getScalePosition(this.scale,e,r.y,this.wrapperHeight),this.scale=e,this.setViewBox(),this.eventEmitter.emit("changeScale",this.scale)}addScale(e){const r=this.scale+e;this.setScale(r)}on(e,r){this.eventEmitter.on(e,r)}translate(e,r){const h=this.viewbox;h.x=h.x+e/this.scale,h.y=h.y+r/this.scale,this.setViewBox()}translateTo(e,r){const h=this.viewbox;h.x=e,h.y=r,this.setViewBox()}resize(e,r){const h=this.viewbox;h.width=e/this.wrapperWidth*h.width,h.height=r/this.wrapperHeight*h.height,this.setViewBox(),this.wrapperWidth=e,this.wrapperHeight=r}getViewportPosition(e,r){const u=this.paperWrapper.getWrapperDom().getBoundingClientRect();return{x:this.viewbox.x+(e-u.x)/this.scale,y:this.viewbox.y+(r-u.y)/this.scale}}getOffsetPosition(e,r){return{offsetX:(e-this.viewbox.x)*this.scale,offsetY:(r-this.viewbox.y)*this.scale}}getScalePosition(e,r,h,u){return h+u*(1/e-1/r)/2}setViewBox(){const e=this.viewbox;this.paper.setViewBox(e.x,e.y,e.width,e.height,!0)}}const Mi=2;class rs{constructor(e){b(this,"isStart",!1);b(this,"lastClientX",0);b(this,"lastClientY",0);b(this,"isMoveInited",!1);b(this,"handleMousedown",(e,r)=>{this.isStart=!0,this.lastClientX=e,this.lastClientY=r});b(this,"handleMousemove",(e,r)=>{if(!this.isStart)return;const h=this.lastClientX-e,u=this.lastClientY-r;!this.isMoveInited&&(Math.abs(h)>Mi||Math.abs(u)>Mi)&&(this.isMoveInited=!0),this.isMoveInited&&this.viewport.translate(h,u),this.lastClientX=e,this.lastClientY=r});b(this,"handleMouseup",()=>{this.isStart=!1,this.isMoveInited=!1,this.lastClientX=0,this.lastClientY=0});this.viewport=e}}class ss{constructor(e,r){b(this,"isStart",!1);b(this,"start",(e,r,h)=>{h.stopPropagation(),this.isStart=!0,this.dragViewportHandler.handleMousedown.call(this.dragViewportHandler,e,r)});b(this,"move",(e,r,h,u)=>{this.isStart&&this.dragViewportHandler.handleMousemove.call(this.dragViewportHandler,h,u)});b(this,"end",()=>{this.isStart=!1,this.dragViewportHandler.handleMouseup.call(this.dragViewportHandler)});this.root=e,this.dragViewportHandler=r,e.on("drag",this.move,this.start,this.end),this.dragViewportHandler=r}}class ns{constructor(e,r){b(this,"able",!1);b(this,"handleMousedown",e=>{this.able&&this.dragViewportHandler.handleMousedown(e.clientX,e.clientY)});b(this,"handleMousemove",e=>{this.dragViewportHandler.handleMousemove(e.clientX,e.clientY)});b(this,"handleMouseup",()=>{this.dragViewportHandler.handleMouseup()});var h,u,g;this.svgDom=e,this.dragViewportHandler=r,this.svgDom=e,(h=this.svgDom)==null||h.addEventListener("mousedown",this.handleMousedown),(u=this.svgDom)==null||u.addEventListener("mousemove",this.handleMousemove),(g=this.svgDom)==null||g.addEventListener("mouseup",this.handleMouseup)}disable(){this.able=!1}enable(){this.able=!0}clear(){var e,r,h;(e=this.svgDom)==null||e.removeEventListener("mousedown",this.handleMousedown),(r=this.svgDom)==null||r.removeEventListener("mousemove",this.handleMousemove),(h=this.svgDom)==null||h.removeEventListener("mouseup",this.handleMouseup)}}class os{constructor(e,r){b(this,"isMoveZoom",!1);b(this,"wheelCallback",e=>{if(e.preventDefault(),e.stopPropagation(),`${e.deltaY}`.includes(".")||this.isMoveZoom){const u=-Math.floor(e.deltaY)*.02;this.viewport.addScale(u)}else{const u=e.deltaX*.6,g=e.deltaY*.6;this.viewport.translate(u,g)}});this.viewport=e,this.wrapperDom=r,r.addEventListener("wheel",this.wheelCallback)}clear(){this.wrapperDom.removeEventListener("wheel",this.wheelCallback)}enableMoveScale(){this.isMoveZoom=!0}disableMoveScale(){this.isMoveZoom=!1}}class as{constructor(e,r){b(this,"resizeObserver");b(this,"wrapperDom");const h=e.getWrapperDom(),u=e.getSvgDom();this.wrapperDom=h,this.resizeObserver=new ResizeObserver(g=>{for(const w of g)if(w.target.className.includes(Fi)){const{clientWidth:a,clientHeight:o}=w.target;u==null||u.setAttribute("width",`${a}`),u==null||u.setAttribute("height",`${o}`),r.resize(a,o);break}}),this.resizeObserver.observe(h)}clear(){this.resizeObserver.unobserve(this.wrapperDom)}}const Ri=.25;class hs{constructor(e){b(this,"viewport");b(this,"root");b(this,"dragRoot");b(this,"dragBackground");b(this,"viewportWheel");b(this,"viewportResize");b(this,"disableBackgroundDrag",()=>this.dragBackground.disable());b(this,"enableBackgroundDrag",()=>this.dragBackground.enable());b(this,"enableMoveScale",()=>this.viewportWheel.enableMoveScale());b(this,"disableMoveScale",()=>this.viewportWheel.disableMoveScale());const{paperWrapper:r,viewport:h,root:u}=e;this.viewport=h,this.root=u;const g=this.initDrag(e);this.dragRoot=g.dragRoot,this.dragBackground=g.dragBackground;const w=r.getWrapperDom();this.viewportWheel=new os(h,w),this.viewportResize=new as(r,h)}zoomIn(){this.viewport.addScale(Ri)}zoomOut(){this.viewport.addScale(-Ri)}translateToCenter(){const e=this.root.getBBox(),r=this.viewport.getViewbox(),h=e.cx-r.width/2,u=e.cy-r.height/2;this.viewport.translateTo(h,u)}clear(){this.dragBackground.clear(),this.viewportWheel.clear(),this.viewportResize.clear()}initDrag({paperWrapper:e,viewport:r,root:h}){const u=new rs(r),g=e.getSvgDom(),w=new ss(h,u),a=new ns(g,u);return{dragRoot:w,dragBackground:a}}}const Ai={[zt.root]:Wi,[zt.firstLevel]:Vi,[zt.grandchild]:Xi};class ls{constructor({viewport:e,selection:r,dataProxy:h,paperWrapper:u}){b(this,"editorWrapperDom");b(this,"editorDom");b(this,"viewport");b(this,"dataProxy");b(this,"isShow",!1);b(this,"node",null);this.viewport=e,this.dataProxy=h;const g=this.initTextEditorElement(u);this.editorWrapperDom=g.editorWrapperDom,this.editorDom=g.editorDom,r.on("select",()=>{var a;const w=r.getSelectNodes();w.length===1&&((a=this.node)==null?void 0:a.id)!==w[0].id?(this.setLabel(),this.editorDom.focus(),this.editorDom.innerText="",this.hide(),this.node=w[0],this.translate()):this.node!==null&&(w.length!==1||w[0].id!==this.node.id)&&(this.setLabel(),this.editorDom.innerText="",this.editorDom.blur(),this.hide(),this.node=null)}),this.editorDom.addEventListener("compositionstart",()=>{this.isShow||this.show()}),this.editorDom.addEventListener("input",w=>{const a=w.data;console.log("input",a,this.isEditableKey(a)),this.isShow||(this.isEditableKey(a)?this.show():this.editorDom.innerText="")})}showBySelectionLabel(){var e;this.show(),this.editorDom.innerText=((e=this.node)==null?void 0:e.label)||"",document.execCommand("selectAll",!1,null),document.getSelection().collapseToEnd()}isShowing(){return this.isShow}finishEdit(){this.setLabel(),this.editorDom.innerText="",this.hide()}show(){if(this.node===null)return;const e=this.viewport.getScale(),r=Ai[this.node.getDepthType()]*e;this.editorWrapperDom.style.zIndex="3",this.editorDom.style.fontSize=`${r}px`,this.translate(),this.editorDom.focus(),this.isShow=!0}hide(){this.editorWrapperDom.style.zIndex="-9999",this.isShow=!1}initTextEditorElement(e){const r=document.createElement("div");r.className="node-edit-text-wrapper";const h=document.createElement("div");h.className="node-edit-text",h.setAttribute("contenteditable","true");const u=e.getContainerDom();return r.appendChild(h),u.appendChild(r),{editorWrapperDom:r,editorDom:h}}isEditableKey(e){const r=["`","-","=","[","]","\\",";","'",",",".","/"];return/^[\w\s]$/.test(e)||r.includes(e)}translate(){if(this.node===null)return;const{cx:e,cy:r}=this.node.getBBox(),{offsetX:h,offsetY:u}=this.viewport.getOffsetPosition(e,r),g=this.viewport.getScale(),a=(1.4*Ai[this.node.getDepthType()]+6)*g;this.editorWrapperDom.style.left=`${h-300}px`,this.editorWrapperDom.style.top=`${u-a/2}px`}setLabel(){const e=this.editorDom.innerText;this.node!==null&&this.isShow&&e!==this.node.label&&(this.node.setLabel(e),this.dataProxy.setData(this.node.id,{label:e},[this.node.id]))}}class cs{constructor(){}getArrowNextNode(e,r){let h=null;switch(r){case"ArrowUp":{h=this.getVeriticalNext(e,!0);break}case"ArrowRight":{h=this.getHorizontal(e,bt.RIGHT);break}case"ArrowDown":{h=this.getVeriticalNext(e,!1);break}case"ArrowLeft":{h=this.getHorizontal(e,bt.LEFT);break}}return h}getHorizontal(e,r){if(e.direction!==bt.NONE&&e.direction!==r)return e.father;const u=e.getDirectionChildren(r),g=Math.floor((u.length-1)/2);return u[g]||null}getVeriticalNext(e,r){if(e.isRoot()){const w=e.getDirectionChildren(bt.RIGHT),a=e.getDirectionChildren(bt.LEFT),o=w.length>0?w:a,k=o[0]||null,C=o[o.length-1]||null;return r?k:C}let h=0,u=e,g=null;for(;u!==null&&!(u!=null&&u.isRoot());){const w=this.getNextBrothers(u,r);for(let a=0;a<w.length;a++){const o=this.findTargetDepthNode(w[a],h,0,r);if(o){g=o;break}}if(g)break;u=u==null?void 0:u.father,h+=1}return g}findTargetDepthNode(e,r,h,u){if(r===h)return e;let g=null,w=e.getDirectionChildren(e.direction);u&&(w=w.reverse());for(let a=0;a<w.length;a++){const o=w[a],k=this.findTargetDepthNode(o,r,h+1,u);if(k){g=k;break}}return g}getNextBrothers(e,r){var w;const h=[];let u=((w=e==null?void 0:e.father)==null?void 0:w.getDirectionChildren(e.direction))||[];r&&(u=u.reverse());let g=!1;for(let a=0;a<u.length;a++)g&&h.push(u[a]),u[a].id===e.id&&(g=!0);return h}}class ds{constructor(){}getRemoveNextNode(e){if(e.length===0)return null;for(let r=e.length-1;r>=0;r--){const h=e[r],u=this.getTopNode(h,e);if(u.isRoot())return null;const g=u.father.getDirectionChildren(u.direction),w=g.findIndex(W=>W.id===u.id);let a=w-1,o=g[a];for(;e.includes(o)&&o;)a-=1,o=g[a];if(o)return o;let k=w+1,C=g[k];for(;e.includes(C)&&C;)k+=1,C=g[k];if(C)return C;if(u.getDepthType()===zt.firstLevel){const W=u.direction===bt.RIGHT?bt.LEFT:bt.RIGHT,lt=u.father.getDirectionChildren(W),Q=lt[lt.length-1];if(Q&&!e.includes(Q))return Q}const V=u.father;if(!V.isRoot())return V}return null}getTopNode(e,r){let h=e,u=e;for(;u!==null;)r.includes(u)&&(h=u),u=u.father;return h}}class us{constructor(){b(this,"selectNodes",[]);b(this,"selectionArrowNext");b(this,"selectionRemoveNext");b(this,"eventEmitter");b(this,"isMultiClickMode",!1);b(this,"getTopNodes",()=>{if(this.selectNodes.length===0)return[];const e=this.selectNodes.reduce((h,u)=>(h[u.id]=u,h),{}),r=this.selectNodes[0].getRoot();return!r||e[r.id]?[]:this.getTopNodesInner(r,e)});this.selectionArrowNext=new cs,this.selectionRemoveNext=new ds,this.eventEmitter=new ie}setIsMultiClickMode(e){this.isMultiClickMode=e}select(e){const r=[...e];this.selectNodes.forEach(h=>h.setStyle("base")),r.forEach(h=>h.setStyle("select")),this.selectNodes=r,this.eventEmitter.emit("select",this.selectNodes)}selectSingle(e){if(!this.isMultiClickMode){this.select([e]);return}const r=this.selectNodes.findIndex(h=>h.id===e.id);r>=0?(e.setStyle("base"),this.selectNodes.splice(r,1)):(e.setStyle("select"),this.selectNodes.push(e)),this.eventEmitter.emit("select",this.selectNodes)}selectArrowNext(e){const r=this.selectNodes[this.selectNodes.length-1];if(!r)return;const h=this.selectionArrowNext.getArrowNextNode(r,e);h&&this.select([h])}empty(){this.select([])}on(e,r){this.eventEmitter.on(e,r)}getSelectNodes(){return this.selectNodes}getSelectIds(){return this.selectNodes.map(e=>e.id)}getSingleSelectNode(){return this.selectNodes.length!==1?null:this.selectNodes[0]}getRemoveNextNode(){return this.selectionRemoveNext.getRemoveNextNode(this.selectNodes)}getTopNodesInner(e,r){if(!e.isRoot()&&r[e.id])return[e];let h=[];return e.children&&e.children.forEach(u=>{const g=this.getTopNodesInner(u,r);g.length>0&&(h=h.concat(g))}),h}}class ps{constructor(e){b(this,"startX",0);b(this,"startY",0);b(this,"isInit",!1);b(this,"rectShape",null);this.paper=e}init(e,r){this.startX=e,this.startY=r,this.isInit=!0}resize(e,r){if(!this.isInit)return;const{startX:h,startY:u}=this,g=h<e?h:e,w=u<r?u:r,a=Math.abs(h-e),o=Math.abs(u-r);this.rectShape===null?(this.rectShape=this.paper.rect(g,w,a,o),this.rectShape.attr({stroke:"#73a1bf",fill:"rgba(153,124,255,0.1)",opacity:.8})):this.rectShape.attr({x:g,y:w,width:a,height:o})}hide(){var e;this.isInit=!1,(e=this.rectShape)==null||e.remove(),this.rectShape=null}getBBox(){var e;return(e=this.rectShape)==null?void 0:e.getBBox()}}const Pi=2;class fs{constructor({paperWrapper:e,viewport:r,toolOperation:h,selection:u}){b(this,"multiSelectShape");b(this,"viewport");b(this,"selection");b(this,"svgDom");b(this,"toolOperation");b(this,"allNodes",[]);b(this,"preSelectNodes",[]);b(this,"able",!0);b(this,"isStart",!1);b(this,"isMoveInited",!1);b(this,"lastClientX",0);b(this,"lastClientY",0);b(this,"handleMousedown",e=>{this.able&&(this.isStart=!0,this.lastClientX=e.clientX,this.lastClientY=e.clientY,this.selection.empty())});b(this,"handleMousemove",e=>{if(!this.isStart)return;const{clientX:r,clientY:h}=e,u=this.lastClientX-r,g=this.lastClientY-h;if(!this.isMoveInited&&(Math.abs(u)>Pi||Math.abs(g)>Pi)){const w=this.viewport.getViewportPosition(e.clientX,e.clientY);this.multiSelectShape.init(w.x,w.y);const a=this.toolOperation.getNodeMap();this.allNodes=Object.keys(a).map(o=>a[o]),this.isMoveInited=!0}if(this.isMoveInited){const w=this.viewport.getViewportPosition(e.clientX,e.clientY);this.multiSelectShape.resize(w.x,w.y);const a=this.allNodes.filter(k=>Hi.isBBoxIntersect(this.multiSelectShape.getBBox(),k.getBBox()))||[],o=[];for(let k=0;k<this.preSelectNodes.length;k++)a.includes(this.preSelectNodes[k])&&o.push(this.preSelectNodes[k]);for(let k=0;k<a.length;k++)o.includes(a[k])||o.push(a[k]);this.selection.select(o),this.preSelectNodes=o}this.lastClientX=r,this.lastClientY=h});b(this,"handleMouseup",()=>{this.isStart&&(this.multiSelectShape.hide(),this.allNodes=[],this.preSelectNodes=[],this.isStart=!1,this.isMoveInited=!1,this.lastClientX=0,this.lastClientY=0)});var w,a,o;const g=e.getPaper();this.svgDom=e.getSvgDom(),this.multiSelectShape=new ps(g),this.viewport=r,this.selection=u,this.toolOperation=h,(w=this.svgDom)==null||w.addEventListener("mousedown",this.handleMousedown),(a=this.svgDom)==null||a.addEventListener("mousemove",this.handleMousemove),(o=this.svgDom)==null||o.addEventListener("mouseup",this.handleMouseup)}disable(){this.able=!1}enable(){this.able=!0}clear(){var e,r,h;(e=this.svgDom)==null||e.removeEventListener("mousedown",this.handleMousedown),(r=this.svgDom)==null||r.removeEventListener("mousemove",this.handleMousemove),(h=this.svgDom)==null||h.removeEventListener("mouseup",this.handleMouseup)}}class gs{constructor(){b(this,"allKeydownCallback");b(this,"allKeyupCallback");b(this,"allKeypressCallback");b(this,"keydownCallbacks",[]);b(this,"keyupCallbacks",[]);b(this,"keypressCallbacks",[]);this.allKeydownCallback=e=>{this.keydownCallbacks.forEach(r=>r(e))},document.addEventListener("keydown",this.allKeydownCallback),this.allKeyupCallback=e=>{this.keyupCallbacks.forEach(r=>r(e))},document.addEventListener("keyup",this.allKeyupCallback),this.allKeypressCallback=e=>{this.keypressCallbacks.forEach(r=>r(e))},document.addEventListener("keypress",this.allKeypressCallback)}on(e,r){e==="keydown"?this.keydownCallbacks.push(r):e==="keyup"?this.keyupCallbacks.push(r):e==="keypress"&&this.keypressCallbacks.push(r)}off(e,r){e==="keydown"?this.removeCallback(this.keydownCallbacks,r):e==="keyup"?this.removeCallback(this.keyupCallbacks,r):e==="keypress"&&this.removeCallback(this.keypressCallbacks,r)}clear(){document.removeEventListener("keydown",this.allKeydownCallback),document.removeEventListener("keyup",this.allKeyupCallback),document.removeEventListener("keypress",this.allKeypressCallback)}removeCallback(e,r){const h=e.findIndex(u=>u===r);h>-1&&e.splice(h,1)}}class vs{constructor(e){b(this,"keyboardEvents");b(this,"handleKeydown",(e,{toolOperation:r,textEditor:h,selection:u,multiSelect:g,viewportInteraction:w})=>{const{key:a,ctrlKey:o,shiftKey:k,metaKey:C}=e;if(h.isShowing()){switch(a){case"Tab":case"Enter":{h.finishEdit();break}}return}if(C&&k)switch(a){case"z":{r.redo();break}}else if(C&&!k)switch(a){case"z":{r.undo();break}case"=":{e.preventDefault(),w.zoomIn();break}case"-":{e.preventDefault(),w.zoomOut();break}case"Meta":{u.setIsMultiClickMode(!0),g.disable(),w.enableBackgroundDrag(),w.enableMoveScale();break}}else if(!C&&!k&&!o)switch(a){case"Enter":{r.addBrotherNode();break}case"Tab":{u.getSelectNodes().length>0&&e.preventDefault(),r.addChildNode();break}case"Backspace":{r.removeNode();break}case"ArrowUp":case"ArrowRight":case"ArrowDown":case"ArrowLeft":{u.selectArrowNext(a);break}}});b(this,"handleKeyup",(e,{selection:r,multiSelect:h,viewportInteraction:u})=>{switch(e.key){case"Meta":{r.setIsMultiClickMode(!1),h.enable(),u.disableBackgroundDrag(),u.disableMoveScale();break}}});this.keyboardEvents=new gs,this.keyboardEvents.on("keydown",r=>{this.handleKeydown(r,e)}),this.keyboardEvents.on("keyup",r=>{this.handleKeyup(r,e)})}clear(){this.keyboardEvents.clear()}}const ms=100;class ys{constructor(){b(this,"past",[]);b(this,"future",[])}add(e){this.past.length>=ms&&this.past.shift(),this.past.push(JSON.stringify(e)),this.future=[]}canUndo(){return this.past.length>0}canRedo(){return this.future.length>0}undo(e){return this.canUndo()?(this.future.unshift(JSON.stringify(e)),JSON.parse(this.past.pop())):null}redo(e){return this.canRedo()?(this.past.push(JSON.stringify(e)),JSON.parse(this.future.shift())):null}}const ji=T=>{const e=T||{[ei()]:{children:[],label:"Central Topic",direction:bt.NONE,isRoot:!0}};return Object.keys(e).forEach(r=>{const h=e[r].isExpand;e[r].isExpand=h===void 0?!0:h}),e};class xs{constructor({data:e,selection:r,root:h}){b(this,"snapshot");b(this,"selection");b(this,"root");b(this,"eventEmitter");b(this,"data");b(this,"canUndo",()=>this.snapshot.canUndo());b(this,"canRedo",()=>this.snapshot.canRedo());b(this,"getData",()=>this.data);this.snapshot=new ys,this.root=h,this.selection=r,this.data=ji(e),this.eventEmitter=new ie}undo(){if(!this.snapshot.canUndo())return null;const e=this.snapshot.undo({data:this.data,selectIds:this.selection.getSelectIds()});return this.data=e.data,this.eventEmitter.emit("changeData"),e}redo(){if(!this.snapshot.canRedo())return null;const e=this.snapshot.redo({data:this.data,selectIds:this.selection.getSelectIds()});return this.data=e.data,this.eventEmitter.emit("changeData"),e}on(e,r){this.eventEmitter.on(e,r)}setData(e,r,h){this.data[e]&&(this.addSnapshot(h),this.data[e]={...this.data[e],...r})}resetData(){const e={};this.resetDataInner(this.root,e),this.data=e}addSnapshot(e){this.snapshot.add({data:this.data,selectIds:e||this.selection.getSelectIds()})}resetDataInner(e,r){r[e.id]={children:e.children.map(h=>h.id),label:e.label,direction:e.direction,isRoot:e.isRoot(),isExpand:e.isExpand},e.children.forEach(h=>{this.resetDataInner(h,r)})}}class bs{constructor({root:e,tree:r,selection:h,dataProxy:u,treeOperation:g}){b(this,"root");b(this,"tree");b(this,"selection");b(this,"dataProxy");b(this,"treeOperation");this.root=e,this.tree=r,this.selection=h,this.dataProxy=u,this.treeOperation=g}undo(){const{data:e,selectIds:r}=this.dataProxy.undo()||{};this.tree.render(e),this.selectByIds(r)}redo(){const{data:e,selectIds:r}=this.dataProxy.redo()||{};this.tree.render(e),this.selectByIds(r)}addChildNode(){this.treeOperation.addChildNode()}addBrotherNode(){this.treeOperation.addBrotherNode()}removeNode(){this.treeOperation.removeNode()}getNodeMap(){const e={};return this.setNodeMapInner(this.root,e),e}selectByIds(e){if(!e)return;const r=this.getNodeMap(),h=e.reduce((u,g)=>(r[g]&&u.push(r[g]),u),[]);this.selection.select(h)}setNodeMapInner(e,r){r[e.id]=e,e.children.forEach(h=>this.setNodeMapInner(h,r))}}class ws{constructor(e,r=""){b(this,"dom");typeof e=="string"?(this.dom=document.createElement(e),this.dom.className=r):this.dom=e}getDom(){return this.dom}setChildren(...e){return e.forEach(r=>this.setChild(r)),this}setChild(e){const r=typeof e=="string"?document.createTextNode(e):e.dom;return this.dom.appendChild(r),this}setClassName(e){return this.dom.className=e,this}addClass(e){return this.dom.classList.add(e),this}hasClass(e){return this.dom.classList.contains(e)}removeClass(e){return this.dom.classList.remove(e),this}setHtml(e){return this.dom.innerHTML=e,this}setCss(e){return Object.keys(e).forEach(r=>{this.dom.style[r]=e[r]}),this}addEventListener(...e){this.dom.addEventListener(...e)}removeEventListener(...e){this.dom.removeEventListener(...e)}}const Gt=(T,e="")=>new ws(T,e),he=({iconName:T,tipLabel:e,isDisabled:r=!0})=>{const h=Gt("div",`toolbar-btn${r?" disabled":""}`).setChild(Gt("div",`toolbar-icon ${T}-icon`));return{el:Gt("div","toolbar-item").setChildren(h,Gt("div","toolbar-tip").setChild(e)),btnEl:h}};class Ss{constructor({dataProxy:e,toolOperation:r}){b(this,"el");b(this,"btnEl");b(this,"toolOperation");b(this,"dataProxy");this.dataProxy=e,this.toolOperation=r;const h=this.element();this.el=h.el,this.btnEl=h.btnEl}setState(){this.dataProxy.canUndo()?this.btnEl.removeClass("disabled"):this.btnEl.addClass("disabled")}element(){const{el:e,btnEl:r}=he({iconName:"undo",tipLabel:"Undo"});return r.addEventListener("click",()=>{this.toolOperation.undo()},!1),{el:e,btnEl:r}}}class _s{constructor({toolOperation:e,dataProxy:r}){b(this,"el");b(this,"btnEl");b(this,"dataProxy");b(this,"toolOperation");this.toolOperation=e,this.dataProxy=r;const h=this.element();this.el=h.el,this.btnEl=h.btnEl}setState(){this.dataProxy.canRedo()?this.btnEl.removeClass("disabled"):this.btnEl.addClass("disabled")}element(){const{el:e,btnEl:r}=he({iconName:"redo",tipLabel:"Redo"});return r.addEventListener("click",()=>{this.toolOperation.redo()},!1),{el:e,btnEl:r}}}let Es=class{constructor({toolOperation:e,selection:r}){b(this,"el");b(this,"btnEl");b(this,"toolOperation");b(this,"selection");this.toolOperation=e,this.selection=r;const h=this.element();this.el=h.el,this.btnEl=h.btnEl}setState(){this.selection.getSelectNodes().length===1?this.btnEl.removeClass("disabled"):this.btnEl.addClass("disabled")}element(){const{el:e,btnEl:r}=he({iconName:"add-child",tipLabel:"Add Subtopic"});return r.addEventListener("click",()=>{this.toolOperation.addChildNode()},!1),{el:e,btnEl:r}}};class ks{constructor({toolOperation:e,selection:r}){b(this,"el");b(this,"btnEl");b(this,"toolOperation");b(this,"selection");this.toolOperation=e,this.selection=r;const h=this.element();this.el=h.el,this.btnEl=h.btnEl}setState(){this.selection.getSelectNodes().length===1?this.btnEl.removeClass("disabled"):this.btnEl.addClass("disabled")}element(){const{el:e,btnEl:r}=he({iconName:"add-brother",tipLabel:"Add Topic"});return r.addEventListener("click",()=>{this.toolOperation.addBrotherNode()},!1),{el:e,btnEl:r}}}class Cs{constructor({textEditor:e,selection:r}){b(this,"el");b(this,"btnEl");b(this,"textEditor");b(this,"selection");this.textEditor=e,this.selection=r;const h=this.element();this.el=h.el,this.btnEl=h.btnEl}setState(){this.selection.getSelectNodes().length===1?this.btnEl.removeClass("disabled"):this.btnEl.addClass("disabled")}element(){const{el:e,btnEl:r}=he({iconName:"edit",tipLabel:"Edit Text"});return r.addEventListener("click",()=>{this.textEditor.showBySelectionLabel()},!1),{el:e,btnEl:r}}}class Ns{constructor({toolOperation:e,selection:r}){b(this,"el");b(this,"btnEl");b(this,"toolOperation");b(this,"selection");this.toolOperation=e,this.selection=r;const h=this.element();this.el=h.el,this.btnEl=h.btnEl}setState(){this.selection.getTopNodes().length>0?this.btnEl.removeClass("disabled"):this.btnEl.addClass("disabled")}element(){const{el:e,btnEl:r}=he({iconName:"delete",tipLabel:"Delete"});return r.addEventListener("click",()=>{this.toolOperation.removeNode()},!1),{el:e,btnEl:r}}}class Bs{constructor({viewportInteraction:e}){b(this,"el");b(this,"btnEl");b(this,"viewportInteraction");this.viewportInteraction=e;const r=this.element();this.el=r.el,this.btnEl=r.btnEl}element(){const{el:e,btnEl:r}=he({iconName:"target",tipLabel:"Locate to center",isDisabled:!1});return r.addEventListener("click",()=>{this.viewportInteraction.translateToCenter()},!1),{el:e,btnEl:r}}}class Ls{constructor({paperWrapper:e,toolOperation:r,selection:h,dataProxy:u,textEditor:g,viewportInteraction:w}){b(this,"undo");b(this,"redo");b(this,"addChildNode");b(this,"addBrotherNode");b(this,"edit");b(this,"delete");b(this,"target");this.undo=new Ss({toolOperation:r,dataProxy:u}),this.redo=new _s({toolOperation:r,dataProxy:u}),this.addChildNode=new Es({toolOperation:r,selection:h}),this.addBrotherNode=new ks({toolOperation:r,selection:h}),this.edit=new Cs({textEditor:g,selection:h}),this.delete=new Ns({toolOperation:r,selection:h}),this.target=new Bs({viewportInteraction:w});const a=[this.undo.el,this.redo.el,this.buildDivider(),this.addChildNode.el,this.addBrotherNode.el,this.buildDivider(),this.edit.el,this.delete.el,this.buildDivider(),this.target.el],o=e.getWrapperDom(),k=Gt("div","toolbar");a.forEach(C=>{k.setChildren(C)}),o.appendChild(k.getDom()),h.on("select",()=>{this.setState()}),u.on("changeData",()=>{this.setState()})}buildDivider(){return Gt("div","toolbar-divider")}setState(){this.undo.setState(),this.redo.setState(),this.addChildNode.setState(),this.addBrotherNode.setState(),this.edit.setState(),this.delete.setState()}}const zi=.25;class Ds{constructor({paperWrapper:e,viewport:r}){b(this,"viewport");b(this,"el");b(this,"scaleLabelEl");this.viewport=r;const h=this.element();this.el=h.el,this.scaleLabelEl=h.scaleLabelEl,e.getWrapperDom().appendChild(this.el.getDom()),r.on("changeScale",g=>{this.scaleLabelEl.setHtml(this.getScalePercent(g))})}element(){const e=this.viewport.getScale(),r=Gt("div","scale-btn").setChild(Gt("div","scale-btn-icon zoom-out")),h=Gt("div","scale-btn").setChild(Gt("div","scale-btn-icon zoom-in")),u=Gt("div","scale-label").setChild(this.getScalePercent(e)),g=Gt("div","viewport-scale-controller").setChildren(r,u,h);return r.addEventListener("click",()=>{this.viewport.addScale(-zi)},!1),h.addEventListener("click",()=>{this.viewport.addScale(zi)},!1),u.addEventListener("click",()=>{this.viewport.setScale(1)},!1),{el:g,scaleLabelEl:u}}getScalePercent(e){return`${Math.floor(e*100)}%`}}class Rs{constructor({container:e,data:r,isDebug:h=!1}){b(this,"paperWrapper");b(this,"viewportInteraction");b(this,"tree");b(this,"keyboard");b(this,"multiSelect");b(this,"nodeCreator");Er({isDebug:h}),this.paperWrapper=new ar(e);const u=this.paperWrapper.getPaper(),g=new is(this.paperWrapper),w=new us;this.nodeCreator=new ts({paper:u,viewport:g});const a=ji(r);this.tree=new fr({viewport:g,data:a,selection:w,nodeCreator:this.nodeCreator});const o=this.tree.getRoot(),k=new xs({data:a,selection:w,root:o}),C=new vr({root:o,selection:w,dataProxy:k,nodeCreator:this.nodeCreator}),V=new ls({viewport:g,selection:w,dataProxy:k,paperWrapper:this.paperWrapper});new es({nodeCreator:this.nodeCreator,selection:w,textEditor:V,dataProxy:k,treeOperation:C}),this.viewportInteraction=new hs({paperWrapper:this.paperWrapper,viewport:g,root:o});const W=new bs({root:o,tree:this.tree,selection:w,dataProxy:k,treeOperation:C});this.multiSelect=new fs({paperWrapper:this.paperWrapper,viewport:g,selection:w,toolOperation:W}),this.keyboard=new vs({toolOperation:W,selection:w,textEditor:V,multiSelect:this.multiSelect,viewportInteraction:this.viewportInteraction}),new Ls({paperWrapper:this.paperWrapper,toolOperation:W,selection:w,dataProxy:k,textEditor:V,viewportInteraction:this.viewportInteraction}),new Ds({paperWrapper:this.paperWrapper,viewport:g})}clear(){this.paperWrapper.clear(),this.nodeCreator.clear(),this.tree.clear(),this.viewportInteraction.clear(),this.multiSelect.clear(),this.keyboard.clear()}}const Ts=T=>{const e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries())[T]||""},As=Ts("debug")==="1";export{Rs as M,As as i};
