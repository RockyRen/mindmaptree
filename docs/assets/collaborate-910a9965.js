import{O as ze,g as ve,m as St,l as Rt,s as Me,c as Tt,f as rt,o as At,v as kt,t as it,a as Lt,b as Ot,d as ue,e as It,w as Z,h as xt,i as he,j as Nt,r as Oe,k as Ie,n as Dt,p as st,q as ot,u as ne,x as je,y as re,z as Be,A as Ge,B as et,C as Ke,D as Mt,E as Pt,F as Ut,G as at,H as Ft,I as jt,J as Bt,K as ct,L as qt,M as le,U as xe,N as ut,P as lt,Q as Wt,R as Ht}from"./common-06d36266.js";const Yt=1200,Vt=2500,Pe=3e4,He=m=>{if(m.shouldConnect&&m.ws===null){const R=new WebSocket(m.url),L=m.binaryType;let F=null;L&&(R.binaryType=L),m.ws=R,m.connecting=!0,m.connected=!1,R.onmessage=O=>{m.lastMessageReceived=ve();const g=O.data,a=typeof g=="string"?JSON.parse(g):g;a&&a.type==="pong"&&(clearTimeout(F),F=setTimeout(v,Pe/2)),m.emit("message",[a,m])};const P=O=>{m.ws!==null&&(m.ws=null,m.connecting=!1,m.connected?(m.connected=!1,m.emit("disconnect",[{type:"disconnect",error:O},m])):m.unsuccessfulReconnects++,setTimeout(He,St(Rt(m.unsuccessfulReconnects+1)*Yt,Vt),m)),clearTimeout(F)},v=()=>{m.ws===R&&m.send({type:"ping"})};R.onclose=()=>P(null),R.onerror=O=>P(O),R.onopen=()=>{m.lastMessageReceived=ve(),m.connecting=!1,m.connected=!0,m.unsuccessfulReconnects=0,m.emit("connect",[{type:"connect"},m]),F=setTimeout(v,Pe/2)}}};class zt extends ze{constructor(R,{binaryType:L}={}){super(),this.url=R,this.ws=null,this.binaryType=L||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&Pe<ve()-this.lastMessageReceived&&this.ws.close()},Pe/2),He(this)}send(R){this.ws&&this.ws.send(JSON.stringify(R))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&He(this)}}const ht=new Map;class Gt{constructor(R){this.room=R,this.onmessage=null,this._onChange=L=>L.key===R&&this.onmessage!==null&&this.onmessage({data:rt(L.newValue||"")}),At(this._onChange)}postMessage(R){kt.setItem(this.room,it(Lt(R)))}close(){Ot(this._onChange)}}const Kt=typeof BroadcastChannel>"u"?Gt:BroadcastChannel,$e=m=>Me(ht,m,()=>{const R=Tt(),L=new Kt(m);return L.onmessage=F=>R.forEach(P=>P(F.data,"broadcastchannel")),{bc:L,subs:R}}),$t=(m,R)=>($e(m).subs.add(R),R),Jt=(m,R)=>{const L=$e(m),F=L.subs.delete(R);return F&&L.subs.size===0&&(L.bc.close(),ht.delete(m)),F},Xt=(m,R,L=null)=>{const F=$e(m);F.bc.postMessage(R),F.subs.forEach(P=>P(R,L))},Qt=()=>{let m=!0;return(R,L)=>{if(m){m=!1;try{R()}finally{m=!0}}else L!==void 0&&L()}};function De(m){throw new Error('Could not dynamically require "'+m+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ft={exports:{}};(function(m,R){(function(L){m.exports=L()})(function(){var L=Math.floor,F=Math.abs,P=Math.pow;return function(){function v(O,g,a){function S(c,d){if(!g[c]){if(!O[c]){var o=typeof De=="function"&&De;if(!d&&o)return o(c,!0);if(I)return I(c,!0);var y=new Error("Cannot find module '"+c+"'");throw y.code="MODULE_NOT_FOUND",y}var x=g[c]={exports:{}};O[c][0].call(x.exports,function(T){var N=O[c][1][T];return S(N||T)},x,x.exports,v,O,g,a)}return g[c].exports}for(var I=typeof De=="function"&&De,r=0;r<a.length;r++)S(a[r]);return S}return v}()({1:[function(v,O,g){function a(u){var l=u.length;if(0<l%4)throw new Error("Invalid string. Length must be a multiple of 4");var _=u.indexOf("=");_===-1&&(_=l);var f=_===l?0:4-_%4;return[_,f]}function S(u,l,_){return 3*(l+_)/4-_}function I(u){var l,_,f=a(u),C=f[0],D=f[1],p=new x(S(u,C,D)),w=0,M=0<D?C-4:C;for(_=0;_<M;_+=4)l=y[u.charCodeAt(_)]<<18|y[u.charCodeAt(_+1)]<<12|y[u.charCodeAt(_+2)]<<6|y[u.charCodeAt(_+3)],p[w++]=255&l>>16,p[w++]=255&l>>8,p[w++]=255&l;return D===2&&(l=y[u.charCodeAt(_)]<<2|y[u.charCodeAt(_+1)]>>4,p[w++]=255&l),D===1&&(l=y[u.charCodeAt(_)]<<10|y[u.charCodeAt(_+1)]<<4|y[u.charCodeAt(_+2)]>>2,p[w++]=255&l>>8,p[w++]=255&l),p}function r(u){return o[63&u>>18]+o[63&u>>12]+o[63&u>>6]+o[63&u]}function c(u,l,_){for(var f,C=[],D=l;D<_;D+=3)f=(16711680&u[D]<<16)+(65280&u[D+1]<<8)+(255&u[D+2]),C.push(r(f));return C.join("")}function d(u){for(var l,_=u.length,f=_%3,C=[],D=16383,p=0,w=_-f;p<w;p+=D)C.push(c(u,p,p+D>w?w:p+D));return f===1?(l=u[_-1],C.push(o[l>>2]+o[63&l<<4]+"==")):f===2&&(l=(u[_-2]<<8)+u[_-1],C.push(o[l>>10]+o[63&l>>4]+o[63&l<<2]+"=")),C.join("")}g.byteLength=function(u){var l=a(u),_=l[0],f=l[1];return 3*(_+f)/4-f},g.toByteArray=I,g.fromByteArray=d;for(var o=[],y=[],x=typeof Uint8Array>"u"?Array:Uint8Array,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=0,i=T.length;N<i;++N)o[N]=T[N],y[T.charCodeAt(N)]=N;y[45]=62,y[95]=63},{}],2:[function(){},{}],3:[function(v,O,g){(function(){(function(){var a=String.fromCharCode,S=Math.min;function I(e){if(2147483647<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=r.prototype,t}function r(e,t,n){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(e)}return c(e,t,n)}function c(e,t,n){if(typeof e=="string")return x(e,t);if(ArrayBuffer.isView(e))return T(e);if(e==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(E(e,ArrayBuffer)||e&&E(e.buffer,ArrayBuffer))return N(e,t,n);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var h=e.valueOf&&e.valueOf();if(h!=null&&h!==e)return r.from(h,t,n);var b=i(e);if(b)return b;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return r.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(0>e)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function o(e,t,n){return d(e),0>=e||t===void 0?I(e):typeof n=="string"?I(e).fill(t,n):I(e).fill(t)}function y(e){return d(e),I(0>e?0:0|u(e))}function x(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!r.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|l(e,t),h=I(n),b=h.write(e,t);return b!==n&&(h=h.slice(0,b)),h}function T(e){for(var t=0>e.length?0:0|u(e.length),n=I(t),h=0;h<t;h+=1)n[h]=255&e[h];return n}function N(e,t,n){if(0>t||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var h;return h=t===void 0&&n===void 0?new Uint8Array(e):n===void 0?new Uint8Array(e,t):new Uint8Array(e,t,n),h.__proto__=r.prototype,h}function i(e){if(r.isBuffer(e)){var t=0|u(e.length),n=I(t);return n.length===0||e.copy(n,0,0,t),n}return e.length===void 0?e.type==="Buffer"&&Array.isArray(e.data)?T(e.data):void 0:typeof e.length!="number"||A(e.length)?I(0):T(e)}function u(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|e}function l(e,t){if(r.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||E(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,h=2<arguments.length&&arguments[2]===!0;if(!h&&n===0)return 0;for(var b=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return me(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return oe(e).length;default:if(b)return h?-1:me(e).length;t=(""+t).toLowerCase(),b=!0}}function _(e,t,n){var h=!1;if((t===void 0||0>t)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),0>=n)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return ie(this,t,n);case"utf8":case"utf-8":return Q(this,t,n);case"ascii":return W(this,t,n);case"latin1":case"binary":return Ee(this,t,n);case"base64":return K(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,t,n);default:if(h)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),h=!0}}function f(e,t,n){var h=e[t];e[t]=e[n],e[n]=h}function C(e,t,n,h,b){if(e.length===0)return-1;if(typeof n=="string"?(h=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,A(n)&&(n=b?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(b)return-1;n=e.length-1}else if(0>n)if(b)n=0;else return-1;if(typeof t=="string"&&(t=r.from(t,h)),r.isBuffer(t))return t.length===0?-1:D(e,t,n,h,b);if(typeof t=="number")return t&=255,typeof Uint8Array.prototype.indexOf=="function"?b?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):D(e,[t],n,h,b);throw new TypeError("val must be string, number or Buffer")}function D(e,t,n,h,b){function k(Ce,Le){return B===1?Ce[Le]:Ce.readUInt16BE(Le*B)}var B=1,z=e.length,J=t.length;if(h!==void 0&&(h=(h+"").toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(2>e.length||2>t.length)return-1;B=2,z/=2,J/=2,n/=2}var G;if(b){var V=-1;for(G=n;G<z;G++)if(k(e,G)!==k(t,V===-1?0:G-V))V!==-1&&(G-=G-V),V=-1;else if(V===-1&&(V=G),G-V+1===J)return V*B}else for(n+J>z&&(n=z-J),G=n;0<=G;G--){for(var ee=!0,_e=0;_e<J;_e++)if(k(e,G+_e)!==k(t,_e)){ee=!1;break}if(ee)return G}return-1}function p(e,t,n,h){n=+n||0;var b=e.length-n;h?(h=+h,h>b&&(h=b)):h=b;var k=t.length;h>k/2&&(h=k/2);for(var B,z=0;z<h;++z){if(B=parseInt(t.substr(2*z,2),16),A(B))return z;e[n+z]=B}return z}function w(e,t,n,h){return ae(me(t,e.length-n),e,n,h)}function M(e,t,n,h){return ae(ke(t),e,n,h)}function j(e,t,n,h){return M(e,t,n,h)}function H(e,t,n,h){return ae(oe(t),e,n,h)}function Y(e,t,n,h){return ae(ge(t,e.length-n),e,n,h)}function K(e,t,n){return t===0&&n===e.length?U.fromByteArray(e):U.fromByteArray(e.slice(t,n))}function Q(e,t,n){n=S(e.length,n);for(var h=[],b=t;b<n;){var k=e[b],B=null,z=239<k?4:223<k?3:191<k?2:1;if(b+z<=n){var J,G,V,ee;z===1?128>k&&(B=k):z===2?(J=e[b+1],(192&J)==128&&(ee=(31&k)<<6|63&J,127<ee&&(B=ee))):z===3?(J=e[b+1],G=e[b+2],(192&J)==128&&(192&G)==128&&(ee=(15&k)<<12|(63&J)<<6|63&G,2047<ee&&(55296>ee||57343<ee)&&(B=ee))):z===4&&(J=e[b+1],G=e[b+2],V=e[b+3],(192&J)==128&&(192&G)==128&&(192&V)==128&&(ee=(15&k)<<18|(63&J)<<12|(63&G)<<6|63&V,65535<ee&&1114112>ee&&(B=ee)))}B===null?(B=65533,z=1):65535<B&&(B-=65536,h.push(55296|1023&B>>>10),B=56320|1023&B),h.push(B),b+=z}return te(h)}function te(e){var t=e.length;if(t<=4096)return a.apply(String,e);for(var n="",h=0;h<t;)n+=a.apply(String,e.slice(h,h+=4096));return n}function W(e,t,n){var h="";n=S(e.length,n);for(var b=t;b<n;++b)h+=a(127&e[b]);return h}function Ee(e,t,n){var h="";n=S(e.length,n);for(var b=t;b<n;++b)h+=a(e[b]);return h}function ie(e,t,n){var h=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>h)&&(n=h);for(var b="",k=t;k<n;++k)b+=be(e[k]);return b}function fe(e,t,n){for(var h=e.slice(t,n),b="",k=0;k<h.length;k+=2)b+=a(h[k]+256*h[k+1]);return b}function X(e,t,n){if(e%1!=0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function $(e,t,n,h,b,k){if(!r.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>b||t<k)throw new RangeError('"value" argument is out of bounds');if(n+h>e.length)throw new RangeError("Index out of range")}function se(e,t,n,h){if(n+h>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function de(e,t,n,h,b){return t=+t,n>>>=0,b||se(e,t,n,4),q.write(e,t,n,h,23,4),n+4}function pe(e,t,n,h,b){return t=+t,n>>>=0,b||se(e,t,n,8),q.write(e,t,n,h,52,8),n+8}function Ae(e){if(e=e.split("=")[0],e=e.trim().replace(s,""),2>e.length)return"";for(;e.length%4!=0;)e+="=";return e}function be(e){return 16>e?"0"+e.toString(16):e.toString(16)}function me(e,t){t=t||1/0;for(var n,h=e.length,b=null,k=[],B=0;B<h;++B){if(n=e.charCodeAt(B),55295<n&&57344>n){if(!b){if(56319<n){-1<(t-=3)&&k.push(239,191,189);continue}else if(B+1===h){-1<(t-=3)&&k.push(239,191,189);continue}b=n;continue}if(56320>n){-1<(t-=3)&&k.push(239,191,189),b=n;continue}n=(b-55296<<10|n-56320)+65536}else b&&-1<(t-=3)&&k.push(239,191,189);if(b=null,128>n){if(0>(t-=1))break;k.push(n)}else if(2048>n){if(0>(t-=2))break;k.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(t-=3))break;k.push(224|n>>12,128|63&n>>6,128|63&n)}else if(1114112>n){if(0>(t-=4))break;k.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}else throw new Error("Invalid code point")}return k}function ke(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function ge(e,t){for(var n,h,b,k=[],B=0;B<e.length&&!(0>(t-=2));++B)n=e.charCodeAt(B),h=n>>8,b=n%256,k.push(b),k.push(h);return k}function oe(e){return U.toByteArray(Ae(e))}function ae(e,t,n,h){for(var b=0;b<h&&!(b+n>=t.length||b>=e.length);++b)t[b+n]=e[b];return b}function E(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function A(e){return e!==e}var U=v("base64-js"),q=v("ieee754");g.Buffer=r,g.SlowBuffer=function(e){return+e!=e&&(e=0),r.alloc(+e)},g.INSPECT_MAX_BYTES=50,g.kMaxLength=2147483647,r.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},e.foo()===42}catch{return!1}}(),r.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){return r.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){return r.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(e,t,n){return c(e,t,n)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(e,t,n){return o(e,t,n)},r.allocUnsafe=function(e){return y(e)},r.allocUnsafeSlow=function(e){return y(e)},r.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==r.prototype},r.compare=function(e,t){if(E(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),E(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,h=t.length,b=0,k=S(n,h);b<k;++b)if(e[b]!==t[b]){n=e[b],h=t[b];break}return n<h?-1:h<n?1:0},r.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return r.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var h=r.allocUnsafe(t),b=0;for(n=0;n<e.length;++n){var k=e[n];if(E(k,Uint8Array)&&(k=r.from(k)),!r.isBuffer(k))throw new TypeError('"list" argument must be an Array of Buffers');k.copy(h,b),b+=k.length}return h},r.byteLength=l,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},r.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},r.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},r.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?Q(this,0,e):_.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||r.compare(this,e)===0},r.prototype.inspect=function(){var e="",t=g.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},r.prototype.compare=function(e,t,n,h,b){if(E(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),!r.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),h===void 0&&(h=0),b===void 0&&(b=this.length),0>t||n>e.length||0>h||b>this.length)throw new RangeError("out of range index");if(h>=b&&t>=n)return 0;if(h>=b)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,h>>>=0,b>>>=0,this===e)return 0;for(var k=b-h,B=n-t,z=S(k,B),J=this.slice(h,b),G=e.slice(t,n),V=0;V<z;++V)if(J[V]!==G[V]){k=J[V],B=G[V];break}return k<B?-1:B<k?1:0},r.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},r.prototype.indexOf=function(e,t,n){return C(this,e,t,n,!0)},r.prototype.lastIndexOf=function(e,t,n){return C(this,e,t,n,!1)},r.prototype.write=function(e,t,n,h){if(t===void 0)h="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")h=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,h===void 0&&(h="utf8")):(h=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var b=this.length-t;if((n===void 0||n>b)&&(n=b),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");for(var k=!1;;)switch(h){case"hex":return p(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return M(this,e,t,n);case"latin1":case"binary":return j(this,e,t,n);case"base64":return H(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,e,t,n);default:if(k)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),k=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),t<e&&(t=e);var h=this.subarray(e,t);return h.__proto__=r.prototype,h},r.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||X(e,t,this.length);for(var h=this[e],b=1,k=0;++k<t&&(b*=256);)h+=this[e+k]*b;return h},r.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||X(e,t,this.length);for(var h=this[e+--t],b=1;0<t&&(b*=256);)h+=this[e+--t]*b;return h},r.prototype.readUInt8=function(e,t){return e>>>=0,t||X(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return e>>>=0,t||X(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return e>>>=0,t||X(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return e>>>=0,t||X(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return e>>>=0,t||X(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||X(e,t,this.length);for(var h=this[e],b=1,k=0;++k<t&&(b*=256);)h+=this[e+k]*b;return b*=128,h>=b&&(h-=P(2,8*t)),h},r.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||X(e,t,this.length);for(var h=t,b=1,k=this[e+--h];0<h&&(b*=256);)k+=this[e+--h]*b;return b*=128,k>=b&&(k-=P(2,8*t)),k},r.prototype.readInt8=function(e,t){return e>>>=0,t||X(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){e>>>=0,t||X(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(e,t){e>>>=0,t||X(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(e,t){return e>>>=0,t||X(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return e>>>=0,t||X(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return e>>>=0,t||X(e,4,this.length),q.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return e>>>=0,t||X(e,4,this.length),q.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return e>>>=0,t||X(e,8,this.length),q.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return e>>>=0,t||X(e,8,this.length),q.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,n,h){if(e=+e,t>>>=0,n>>>=0,!h){var b=P(2,8*n)-1;$(this,e,t,n,b,0)}var k=1,B=0;for(this[t]=255&e;++B<n&&(k*=256);)this[t+B]=255&e/k;return t+n},r.prototype.writeUIntBE=function(e,t,n,h){if(e=+e,t>>>=0,n>>>=0,!h){var b=P(2,8*n)-1;$(this,e,t,n,b,0)}var k=n-1,B=1;for(this[t+k]=255&e;0<=--k&&(B*=256);)this[t+k]=255&e/B;return t+n},r.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,1,255,0),this[t]=255&e,t+1},r.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},r.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeIntLE=function(e,t,n,h){if(e=+e,t>>>=0,!h){var b=P(2,8*n-1);$(this,e,t,n,b-1,-b)}var k=0,B=1,z=0;for(this[t]=255&e;++k<n&&(B*=256);)0>e&&z===0&&this[t+k-1]!==0&&(z=1),this[t+k]=255&(e/B>>0)-z;return t+n},r.prototype.writeIntBE=function(e,t,n,h){if(e=+e,t>>>=0,!h){var b=P(2,8*n-1);$(this,e,t,n,b-1,-b)}var k=n-1,B=1,z=0;for(this[t+k]=255&e;0<=--k&&(B*=256);)0>e&&z===0&&this[t+k+1]!==0&&(z=1),this[t+k]=255&(e/B>>0)-z;return t+n},r.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},r.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},r.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeFloatLE=function(e,t,n){return de(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){return de(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){return pe(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){return pe(this,e,t,!1,n)},r.prototype.copy=function(e,t,n,h){if(!r.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),h||h===0||(h=this.length),t>=e.length&&(t=e.length),t||(t=0),0<h&&h<n&&(h=n),h===n||e.length===0||this.length===0)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),e.length-t<h-n&&(h=e.length-t+n);var b=h-n;if(this===e&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(t,n,h);else if(this===e&&n<t&&t<h)for(var k=b-1;0<=k;--k)e[k+t]=this[k+n];else Uint8Array.prototype.set.call(e,this.subarray(n,h),t);return b},r.prototype.fill=function(e,t,n,h){if(typeof e=="string"){if(typeof t=="string"?(h=t,t=0,n=this.length):typeof n=="string"&&(h=n,n=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!r.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(e.length===1){var b=e.charCodeAt(0);(h==="utf8"&&128>b||h==="latin1")&&(e=b)}}else typeof e=="number"&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=n===void 0?this.length:n>>>0,e||(e=0);var k;if(typeof e=="number")for(k=t;k<n;++k)this[k]=e;else{var B=r.isBuffer(e)?e:r.from(e,h),z=B.length;if(z===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(k=0;k<n-t;++k)this[k+t]=B[k%z]}return this};var s=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,v("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(v,O,g){(function(a){(function(){function S(){let r;try{r=g.storage.getItem("debug")}catch{}return!r&&typeof a<"u"&&"env"in a&&(r=a.env.DEBUG),r}g.formatArgs=function(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+O.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;r.splice(1,0,c,"color: inherit");let d=0,o=0;r[0].replace(/%[a-zA-Z%]/g,y=>{y==="%%"||(d++,y==="%c"&&(o=d))}),r.splice(o,0,c)},g.save=function(r){try{r?g.storage.setItem("debug",r):g.storage.removeItem("debug")}catch{}},g.load=S,g.useColors=function(){return!!(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},g.storage=function(){try{return localStorage}catch{}}(),g.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),g.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],g.log=console.debug||console.log||(()=>{}),O.exports=v("./common")(g);const{formatters:I}=O.exports;I.j=function(r){try{return JSON.stringify(r)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}).call(this)}).call(this,v("_process"))},{"./common":5,_process:12}],5:[function(v,O){O.exports=function(g){function a(r){function c(...y){if(!c.enabled)return;const x=c,T=+new Date,N=T-(d||T);x.diff=N,x.prev=d,x.curr=T,d=T,y[0]=a.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let i=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(l,_)=>{if(l==="%%")return"%";i++;const f=a.formatters[_];if(typeof f=="function"){const C=y[i];l=f.call(x,C),y.splice(i,1),i--}return l}),a.formatArgs.call(x,y),(x.log||a.log).apply(x,y)}let d,o=null;return c.namespace=r,c.useColors=a.useColors(),c.color=a.selectColor(r),c.extend=S,c.destroy=a.destroy,Object.defineProperty(c,"enabled",{enumerable:!0,configurable:!1,get:()=>o===null?a.enabled(r):o,set:y=>{o=y}}),typeof a.init=="function"&&a.init(c),c}function S(r,c){const d=a(this.namespace+(typeof c>"u"?":":c)+r);return d.log=this.log,d}function I(r){return r.toString().substring(2,r.toString().length-2).replace(/\.\*\?$/,"*")}return a.debug=a,a.default=a,a.coerce=function(r){return r instanceof Error?r.stack||r.message:r},a.disable=function(){const r=[...a.names.map(I),...a.skips.map(I).map(c=>"-"+c)].join(",");return a.enable(""),r},a.enable=function(r){a.save(r),a.names=[],a.skips=[];let c;const d=(typeof r=="string"?r:"").split(/[\s,]+/),o=d.length;for(c=0;c<o;c++)d[c]&&(r=d[c].replace(/\*/g,".*?"),r[0]==="-"?a.skips.push(new RegExp("^"+r.substr(1)+"$")):a.names.push(new RegExp("^"+r+"$")))},a.enabled=function(r){if(r[r.length-1]==="*")return!0;let c,d;for(c=0,d=a.skips.length;c<d;c++)if(a.skips[c].test(r))return!1;for(c=0,d=a.names.length;c<d;c++)if(a.names[c].test(r))return!0;return!1},a.humanize=v("ms"),a.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(g).forEach(r=>{a[r]=g[r]}),a.names=[],a.skips=[],a.formatters={},a.selectColor=function(r){let c=0;for(let d=0;d<r.length;d++)c=(c<<5)-c+r.charCodeAt(d),c|=0;return a.colors[F(c)%a.colors.length]},a.enable(a.load()),a}},{ms:11}],6:[function(v,O){function g(a,S){for(const I in S)Object.defineProperty(a,I,{value:S[I],enumerable:!0,configurable:!0});return a}O.exports=function(a,S,I){if(!a||typeof a=="string")throw new TypeError("Please pass an Error to err-code");I||(I={}),typeof S=="object"&&(I=S,S=""),S&&(I.code=S);try{return g(a,I)}catch{I.message=a.message,I.stack=a.stack;const c=function(){};return c.prototype=Object.create(Object.getPrototypeOf(a)),g(new c,I)}}},{}],7:[function(v,O){function g(p){console&&console.warn&&console.warn(p)}function a(){a.init.call(this)}function S(p){if(typeof p!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof p)}function I(p){return p._maxListeners===void 0?a.defaultMaxListeners:p._maxListeners}function r(p,w,M,j){var H,Y,K;if(S(M),Y=p._events,Y===void 0?(Y=p._events=Object.create(null),p._eventsCount=0):(Y.newListener!==void 0&&(p.emit("newListener",w,M.listener?M.listener:M),Y=p._events),K=Y[w]),K===void 0)K=Y[w]=M,++p._eventsCount;else if(typeof K=="function"?K=Y[w]=j?[M,K]:[K,M]:j?K.unshift(M):K.push(M),H=I(p),0<H&&K.length>H&&!K.warned){K.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+K.length+" "+(w+" listeners added. Use emitter.setMaxListeners() to increase limit"));Q.name="MaxListenersExceededWarning",Q.emitter=p,Q.type=w,Q.count=K.length,g(Q)}return p}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(p,w,M){var j={fired:!1,wrapFn:void 0,target:p,type:w,listener:M},H=c.bind(j);return H.listener=M,j.wrapFn=H,H}function o(p,w,M){var j=p._events;if(j===void 0)return[];var H=j[w];return H===void 0?[]:typeof H=="function"?M?[H.listener||H]:[H]:M?N(H):x(H,H.length)}function y(p){var w=this._events;if(w!==void 0){var M=w[p];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}function x(p,w){for(var M=Array(w),j=0;j<w;++j)M[j]=p[j];return M}function T(p,w){for(;w+1<p.length;w++)p[w]=p[w+1];p.pop()}function N(p){for(var w=Array(p.length),M=0;M<w.length;++M)w[M]=p[M].listener||p[M];return w}function i(p,w,M){typeof p.on=="function"&&u(p,"error",w,M)}function u(p,w,M,j){if(typeof p.on=="function")j.once?p.once(w,M):p.on(w,M);else if(typeof p.addEventListener=="function")p.addEventListener(w,function H(Y){j.once&&p.removeEventListener(w,H),M(Y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof p)}var l,_=typeof Reflect=="object"?Reflect:null,f=_&&typeof _.apply=="function"?_.apply:function(p,w,M){return Function.prototype.apply.call(p,w,M)};l=_&&typeof _.ownKeys=="function"?_.ownKeys:Object.getOwnPropertySymbols?function(p){return Object.getOwnPropertyNames(p).concat(Object.getOwnPropertySymbols(p))}:function(p){return Object.getOwnPropertyNames(p)};var C=Number.isNaN||function(p){return p!==p};O.exports=a,O.exports.once=function(p,w){return new Promise(function(M,j){function H(K){p.removeListener(w,Y),j(K)}function Y(){typeof p.removeListener=="function"&&p.removeListener("error",H),M([].slice.call(arguments))}u(p,w,Y,{once:!0}),w!=="error"&&i(p,H,{once:!0})})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var D=10;Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return D},set:function(p){if(typeof p!="number"||0>p||C(p))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+p+".");D=p}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(p){if(typeof p!="number"||0>p||C(p))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+p+".");return this._maxListeners=p,this},a.prototype.getMaxListeners=function(){return I(this)},a.prototype.emit=function(p){for(var w=[],M=1;M<arguments.length;M++)w.push(arguments[M]);var j=p==="error",H=this._events;if(H!==void 0)j=j&&H.error===void 0;else if(!j)return!1;if(j){var Y;if(0<w.length&&(Y=w[0]),Y instanceof Error)throw Y;var K=new Error("Unhandled error."+(Y?" ("+Y.message+")":""));throw K.context=Y,K}var Q=H[p];if(Q===void 0)return!1;if(typeof Q=="function")f(Q,this,w);else for(var te=Q.length,W=x(Q,te),M=0;M<te;++M)f(W[M],this,w);return!0},a.prototype.addListener=function(p,w){return r(this,p,w,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(p,w){return r(this,p,w,!0)},a.prototype.once=function(p,w){return S(w),this.on(p,d(this,p,w)),this},a.prototype.prependOnceListener=function(p,w){return S(w),this.prependListener(p,d(this,p,w)),this},a.prototype.removeListener=function(p,w){var M,j,H,Y,K;if(S(w),j=this._events,j===void 0)return this;if(M=j[p],M===void 0)return this;if(M===w||M.listener===w)--this._eventsCount==0?this._events=Object.create(null):(delete j[p],j.removeListener&&this.emit("removeListener",p,M.listener||w));else if(typeof M!="function"){for(H=-1,Y=M.length-1;0<=Y;Y--)if(M[Y]===w||M[Y].listener===w){K=M[Y].listener,H=Y;break}if(0>H)return this;H===0?M.shift():T(M,H),M.length===1&&(j[p]=M[0]),j.removeListener!==void 0&&this.emit("removeListener",p,K||w)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(p){var w,M,j;if(M=this._events,M===void 0)return this;if(M.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):M[p]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete M[p]),this;if(arguments.length===0){var H,Y=Object.keys(M);for(j=0;j<Y.length;++j)H=Y[j],H!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(w=M[p],typeof w=="function")this.removeListener(p,w);else if(w!==void 0)for(j=w.length-1;0<=j;j--)this.removeListener(p,w[j]);return this},a.prototype.listeners=function(p){return o(this,p,!0)},a.prototype.rawListeners=function(p){return o(this,p,!1)},a.listenerCount=function(p,w){return typeof p.listenerCount=="function"?p.listenerCount(w):y.call(p,w)},a.prototype.listenerCount=y,a.prototype.eventNames=function(){return 0<this._eventsCount?l(this._events):[]}},{}],8:[function(v,O){O.exports=function(){if(typeof globalThis>"u")return null;var g={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return g.RTCPeerConnection?g:null}},{}],9:[function(v,O,g){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */g.read=function(a,S,I,r,c){var d,o,y=8*c-r-1,x=(1<<y)-1,T=x>>1,N=-7,i=I?c-1:0,u=I?-1:1,l=a[S+i];for(i+=u,d=l&(1<<-N)-1,l>>=-N,N+=y;0<N;d=256*d+a[S+i],i+=u,N-=8);for(o=d&(1<<-N)-1,d>>=-N,N+=r;0<N;o=256*o+a[S+i],i+=u,N-=8);if(d===0)d=1-T;else{if(d===x)return o?NaN:(l?-1:1)*(1/0);o+=P(2,r),d-=T}return(l?-1:1)*o*P(2,d-r)},g.write=function(a,S,I,r,c,d){var o,y,x,T=Math.LN2,N=Math.log,i=8*d-c-1,u=(1<<i)-1,l=u>>1,_=c===23?P(2,-24)-P(2,-77):0,f=r?0:d-1,C=r?1:-1,D=0>S||S===0&&0>1/S?1:0;for(S=F(S),isNaN(S)||S===1/0?(y=isNaN(S)?1:0,o=u):(o=L(N(S)/T),1>S*(x=P(2,-o))&&(o--,x*=2),S+=1<=o+l?_/x:_*P(2,1-l),2<=S*x&&(o++,x/=2),o+l>=u?(y=0,o=u):1<=o+l?(y=(S*x-1)*P(2,c),o+=l):(y=S*P(2,l-1)*P(2,c),o=0));8<=c;a[I+f]=255&y,f+=C,y/=256,c-=8);for(o=o<<c|y,i+=c;0<i;a[I+f]=255&o,f+=C,o/=256,i-=8);a[I+f-C]|=128*D}},{}],10:[function(v,O){O.exports=typeof Object.create=="function"?function(g,a){a&&(g.super_=a,g.prototype=Object.create(a.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:function(g,a){if(a){g.super_=a;var S=function(){};S.prototype=a.prototype,g.prototype=new S,g.prototype.constructor=g}}},{}],11:[function(v,O){var g=Math.round;function a(c){if(c+="",!(100<c.length)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(d){var o=parseFloat(d[1]),y=(d[2]||"ms").toLowerCase();return y==="years"||y==="year"||y==="yrs"||y==="yr"||y==="y"?315576e5*o:y==="weeks"||y==="week"||y==="w"?6048e5*o:y==="days"||y==="day"||y==="d"?864e5*o:y==="hours"||y==="hour"||y==="hrs"||y==="hr"||y==="h"?36e5*o:y==="minutes"||y==="minute"||y==="mins"||y==="min"||y==="m"?6e4*o:y==="seconds"||y==="second"||y==="secs"||y==="sec"||y==="s"?1e3*o:y==="milliseconds"||y==="millisecond"||y==="msecs"||y==="msec"||y==="ms"?o:void 0}}}function S(c){var d=F(c);return 864e5<=d?g(c/864e5)+"d":36e5<=d?g(c/36e5)+"h":6e4<=d?g(c/6e4)+"m":1e3<=d?g(c/1e3)+"s":c+"ms"}function I(c){var d=F(c);return 864e5<=d?r(c,d,864e5,"day"):36e5<=d?r(c,d,36e5,"hour"):6e4<=d?r(c,d,6e4,"minute"):1e3<=d?r(c,d,1e3,"second"):c+" ms"}function r(c,d,o,y){return g(c/o)+" "+y+(d>=1.5*o?"s":"")}O.exports=function(c,d){d=d||{};var o=typeof c;if(o=="string"&&0<c.length)return a(c);if(o==="number"&&isFinite(c))return d.long?I(c):S(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))}},{}],12:[function(v,O){function g(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function S(_){if(y===setTimeout)return setTimeout(_,0);if((y===g||!y)&&setTimeout)return y=setTimeout,setTimeout(_,0);try{return y(_,0)}catch{try{return y.call(null,_,0)}catch{return y.call(this,_,0)}}}function I(_){if(x===clearTimeout)return clearTimeout(_);if((x===a||!x)&&clearTimeout)return x=clearTimeout,clearTimeout(_);try{return x(_)}catch{try{return x.call(null,_)}catch{return x.call(this,_)}}}function r(){u&&N&&(u=!1,N.length?i=N.concat(i):l=-1,i.length&&c())}function c(){if(!u){var _=S(r);u=!0;for(var f=i.length;f;){for(N=i,i=[];++l<f;)N&&N[l].run();l=-1,f=i.length}N=null,u=!1,I(_)}}function d(_,f){this.fun=_,this.array=f}function o(){}var y,x,T=O.exports={};(function(){try{y=typeof setTimeout=="function"?setTimeout:g}catch{y=g}try{x=typeof clearTimeout=="function"?clearTimeout:a}catch{x=a}})();var N,i=[],u=!1,l=-1;T.nextTick=function(_){var f=Array(arguments.length-1);if(1<arguments.length)for(var C=1;C<arguments.length;C++)f[C-1]=arguments[C];i.push(new d(_,f)),i.length!==1||u||S(c)},d.prototype.run=function(){this.fun.apply(null,this.array)},T.title="browser",T.browser=!0,T.env={},T.argv=[],T.version="",T.versions={},T.on=o,T.addListener=o,T.once=o,T.off=o,T.removeListener=o,T.removeAllListeners=o,T.emit=o,T.prependListener=o,T.prependOnceListener=o,T.listeners=function(){return[]},T.binding=function(){throw new Error("process.binding is not supported")},T.cwd=function(){return"/"},T.chdir=function(){throw new Error("process.chdir is not supported")},T.umask=function(){return 0}},{}],13:[function(v,O){(function(g){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let a;O.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window>"u"?g:window):S=>(a||(a=Promise.resolve())).then(S).catch(I=>setTimeout(()=>{throw I},0))}).call(this)}).call(this,typeof ue>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:ue)},{}],14:[function(v,O){(function(g,a){(function(){var S=v("safe-buffer").Buffer,I=a.crypto||a.msCrypto;O.exports=I&&I.getRandomValues?function(r,c){if(r>4294967295)throw new RangeError("requested too many random bytes");var d=S.allocUnsafe(r);if(0<r)if(65536<r)for(var o=0;o<r;o+=65536)I.getRandomValues(d.slice(o,o+65536));else I.getRandomValues(d);return typeof c=="function"?g.nextTick(function(){c(null,d)}):d}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,v("_process"),typeof ue>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:ue)},{_process:12,"safe-buffer":30}],15:[function(v,O){function g(o,y){o.prototype=Object.create(y.prototype),o.prototype.constructor=o,o.__proto__=y}function a(o,y,x){function T(i,u,l){return typeof y=="string"?y:y(i,u,l)}x||(x=Error);var N=function(i){function u(l,_,f){return i.call(this,T(l,_,f))||this}return g(u,i),u}(x);N.prototype.name=x.name,N.prototype.code=o,d[o]=N}function S(o,y){if(Array.isArray(o)){var x=o.length;return o=o.map(function(T){return T+""}),2<x?"one of ".concat(y," ").concat(o.slice(0,x-1).join(", "),", or ")+o[x-1]:x===2?"one of ".concat(y," ").concat(o[0]," or ").concat(o[1]):"of ".concat(y," ").concat(o[0])}return"of ".concat(y," ").concat(o+"")}function I(o,y,x){return o.substr(!x||0>x?0:+x,y.length)===y}function r(o,y,x){return(x===void 0||x>o.length)&&(x=o.length),o.substring(x-y.length,x)===y}function c(o,y,x){return typeof x!="number"&&(x=0),!(x+y.length>o.length)&&o.indexOf(y,x)!==-1}var d={};a("ERR_INVALID_OPT_VALUE",function(o,y){return'The value "'+y+'" is invalid for option "'+o+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(o,y,x){var T;typeof y=="string"&&I(y,"not ")?(T="must not be",y=y.replace(/^not /,"")):T="must be";var N;if(r(o," argument"))N="The ".concat(o," ").concat(T," ").concat(S(y,"type"));else{var i=c(o,".")?"property":"argument";N='The "'.concat(o,'" ').concat(i," ").concat(T," ").concat(S(y,"type"))}return N+=". Received type ".concat(typeof x),N},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(o){return"The "+o+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(o){return"Cannot call "+o+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(o){return"Unknown encoding: "+o},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),O.exports.codes=d},{}],16:[function(v,O){(function(g){(function(){function a(T){return this instanceof a?(c.call(this,T),d.call(this,T),this.allowHalfOpen=!0,void(T&&(T.readable===!1&&(this.readable=!1),T.writable===!1&&(this.writable=!1),T.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",S))))):new a(T)}function S(){this._writableState.ended||g.nextTick(I,this)}function I(T){T.end()}var r=Object.keys||function(T){var N=[];for(var i in T)N.push(i);return N};O.exports=a;var c=v("./_stream_readable"),d=v("./_stream_writable");v("inherits")(a,c);for(var o,y=r(d.prototype),x=0;x<y.length;x++)o=y[x],a.prototype[o]||(a.prototype[o]=d.prototype[o]);Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(T){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=T,this._writableState.destroyed=T)}})}).call(this)}).call(this,v("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(v,O){function g(S){return this instanceof g?void a.call(this,S):new g(S)}O.exports=g;var a=v("./_stream_transform");v("inherits")(g,a),g.prototype._transform=function(S,I,r){r(null,S)}},{"./_stream_transform":19,inherits:10}],18:[function(v,O){(function(g,a){(function(){function S(s){return fe.from(s)}function I(s){return fe.isBuffer(s)||s instanceof X}function r(s,e,t){return typeof s.prependListener=="function"?s.prependListener(e,t):void(s._events&&s._events[e]?Array.isArray(s._events[e])?s._events[e].unshift(t):s._events[e]=[t,s._events[e]]:s.on(e,t))}function c(s,e,t){te=te||v("./_stream_duplex"),s=s||{},typeof t!="boolean"&&(t=e instanceof te),this.objectMode=!!s.objectMode,t&&(this.objectMode=this.objectMode||!!s.readableObjectMode),this.highWaterMark=ke(this,s,"readableHighWaterMark",t),this.buffer=new Ae,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=s.emitClose!==!1,this.autoDestroy=!!s.autoDestroy,this.destroyed=!1,this.defaultEncoding=s.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,s.encoding&&(!se&&(se=v("string_decoder/").StringDecoder),this.decoder=new se(s.encoding),this.encoding=s.encoding)}function d(s){if(te=te||v("./_stream_duplex"),!(this instanceof d))return new d(s);var e=this instanceof te;this._readableState=new c(s,this,e),this.readable=!0,s&&(typeof s.read=="function"&&(this._read=s.read),typeof s.destroy=="function"&&(this._destroy=s.destroy)),ie.call(this)}function o(s,e,t,n,h){W("readableAddChunk",e);var b=s._readableState;if(e===null)b.reading=!1,i(s,b);else{var k;if(h||(k=x(b,e)),k)U(s,k);else if(!(b.objectMode||e&&0<e.length))n||(b.reading=!1,_(s,b));else if(typeof e=="string"||b.objectMode||Object.getPrototypeOf(e)===fe.prototype||(e=S(e)),n)b.endEmitted?U(s,new A):y(s,b,e,!0);else if(b.ended)U(s,new ae);else{if(b.destroyed)return!1;b.reading=!1,b.decoder&&!t?(e=b.decoder.write(e),b.objectMode||e.length!==0?y(s,b,e,!1):_(s,b)):y(s,b,e,!1)}}return!b.ended&&(b.length<b.highWaterMark||b.length===0)}function y(s,e,t,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,s.emit("data",t)):(e.length+=e.objectMode?1:t.length,n?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&u(s)),_(s,e)}function x(s,e){var t;return I(e)||typeof e=="string"||e===void 0||s.objectMode||(t=new oe("chunk",["string","Buffer","Uint8Array"],e)),t}function T(s){return 1073741824<=s?s=1073741824:(s--,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s++),s}function N(s,e){return 0>=s||e.length===0&&e.ended?0:e.objectMode?1:s===s?(s>e.highWaterMark&&(e.highWaterMark=T(s)),s<=e.length?s:e.ended?e.length:(e.needReadable=!0,0)):e.flowing&&e.length?e.buffer.head.data.length:e.length}function i(s,e){if(W("onEofChunk"),!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,e.sync?u(s):(e.needReadable=!1,!e.emittedReadable&&(e.emittedReadable=!0,l(s)))}}function u(s){var e=s._readableState;W("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(W("emitReadable",e.flowing),e.emittedReadable=!0,g.nextTick(l,s))}function l(s){var e=s._readableState;W("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(s.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,j(s)}function _(s,e){e.readingMore||(e.readingMore=!0,g.nextTick(f,s,e))}function f(s,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var t=e.length;if(W("maybeReadMore read 0"),s.read(0),t===e.length)break}e.readingMore=!1}function C(s){return function(){var e=s._readableState;W("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&Ee(s,"data")&&(e.flowing=!0,j(s))}}function D(s){var e=s._readableState;e.readableListening=0<s.listenerCount("readable"),e.resumeScheduled&&!e.paused?e.flowing=!0:0<s.listenerCount("data")&&s.resume()}function p(s){W("readable nexttick read 0"),s.read(0)}function w(s,e){e.resumeScheduled||(e.resumeScheduled=!0,g.nextTick(M,s,e))}function M(s,e){W("resume",e.reading),e.reading||s.read(0),e.resumeScheduled=!1,s.emit("resume"),j(s),e.flowing&&!e.reading&&s.read(0)}function j(s){var e=s._readableState;for(W("flow",e.flowing);e.flowing&&s.read()!==null;);}function H(s,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!s||s>=e.length?(t=e.decoder?e.buffer.join(""):e.buffer.length===1?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):t=e.buffer.consume(s,e.decoder),t}function Y(s){var e=s._readableState;W("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,g.nextTick(K,e,s))}function K(s,e){if(W("endReadableNT",s.endEmitted,s.length),!s.endEmitted&&s.length===0&&(s.endEmitted=!0,e.readable=!1,e.emit("end"),s.autoDestroy)){var t=e._writableState;(!t||t.autoDestroy&&t.finished)&&e.destroy()}}function Q(s,e){for(var t=0,n=s.length;t<n;t++)if(s[t]===e)return t;return-1}O.exports=d;var te;d.ReadableState=c;var W;v("events").EventEmitter;var Ee=function(s,e){return s.listeners(e).length},ie=v("./internal/streams/stream"),fe=v("buffer").Buffer,X=a.Uint8Array||function(){},$=v("util");W=$&&$.debuglog?$.debuglog("stream"):function(){};var se,de,pe,Ae=v("./internal/streams/buffer_list"),be=v("./internal/streams/destroy"),me=v("./internal/streams/state"),ke=me.getHighWaterMark,ge=v("../errors").codes,oe=ge.ERR_INVALID_ARG_TYPE,ae=ge.ERR_STREAM_PUSH_AFTER_EOF,E=ge.ERR_METHOD_NOT_IMPLEMENTED,A=ge.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;v("inherits")(d,ie);var U=be.errorOrDestroy,q=["error","close","destroy","pause","resume"];Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(s){this._readableState&&(this._readableState.destroyed=s)}}),d.prototype.destroy=be.destroy,d.prototype._undestroy=be.undestroy,d.prototype._destroy=function(s,e){e(s)},d.prototype.push=function(s,e){var t,n=this._readableState;return n.objectMode?t=!0:typeof s=="string"&&(e=e||n.defaultEncoding,e!==n.encoding&&(s=fe.from(s,e),e=""),t=!0),o(this,s,e,!1,t)},d.prototype.unshift=function(s){return o(this,s,null,!0,!1)},d.prototype.isPaused=function(){return this._readableState.flowing===!1},d.prototype.setEncoding=function(s){se||(se=v("string_decoder/").StringDecoder);var e=new se(s);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var t=this._readableState.buffer.head,n="";t!==null;)n+=e.write(t.data),t=t.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this},d.prototype.read=function(s){W("read",s),s=parseInt(s,10);var e=this._readableState,t=s;if(s!==0&&(e.emittedReadable=!1),s===0&&e.needReadable&&((e.highWaterMark===0?0<e.length:e.length>=e.highWaterMark)||e.ended))return W("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Y(this):u(this),null;if(s=N(s,e),s===0&&e.ended)return e.length===0&&Y(this),null;var n=e.needReadable;W("need readable",n),(e.length===0||e.length-s<e.highWaterMark)&&(n=!0,W("length less than watermark",n)),e.ended||e.reading?(n=!1,W("reading or ended",n)):n&&(W("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,!e.reading&&(s=N(t,e)));var h;return h=0<s?H(s,e):null,h===null?(e.needReadable=e.length<=e.highWaterMark,s=0):(e.length-=s,e.awaitDrain=0),e.length===0&&(!e.ended&&(e.needReadable=!0),t!==s&&e.ended&&Y(this)),h!==null&&this.emit("data",h),h},d.prototype._read=function(){U(this,new E("_read()"))},d.prototype.pipe=function(s,e){function t(Se,Re){W("onunpipe"),Se===G&&Re&&Re.hasUnpiped===!1&&(Re.hasUnpiped=!0,h())}function n(){W("onend"),s.end()}function h(){W("cleanup"),s.removeListener("close",B),s.removeListener("finish",z),s.removeListener("drain",Ce),s.removeListener("error",k),s.removeListener("unpipe",t),G.removeListener("end",n),G.removeListener("end",J),G.removeListener("data",b),Le=!0,V.awaitDrain&&(!s._writableState||s._writableState.needDrain)&&Ce()}function b(Se){W("ondata");var Re=s.write(Se);W("dest.write",Re),Re===!1&&((V.pipesCount===1&&V.pipes===s||1<V.pipesCount&&Q(V.pipes,s)!==-1)&&!Le&&(W("false write response, pause",V.awaitDrain),V.awaitDrain++),G.pause())}function k(Se){W("onerror",Se),J(),s.removeListener("error",k),Ee(s,"error")===0&&U(s,Se)}function B(){s.removeListener("finish",z),J()}function z(){W("onfinish"),s.removeListener("close",B),J()}function J(){W("unpipe"),G.unpipe(s)}var G=this,V=this._readableState;switch(V.pipesCount){case 0:V.pipes=s;break;case 1:V.pipes=[V.pipes,s];break;default:V.pipes.push(s)}V.pipesCount+=1,W("pipe count=%d opts=%j",V.pipesCount,e);var ee=(!e||e.end!==!1)&&s!==g.stdout&&s!==g.stderr,_e=ee?n:J;V.endEmitted?g.nextTick(_e):G.once("end",_e),s.on("unpipe",t);var Ce=C(G);s.on("drain",Ce);var Le=!1;return G.on("data",b),r(s,"error",k),s.once("close",B),s.once("finish",z),s.emit("pipe",G),V.flowing||(W("pipe resume"),G.resume()),s},d.prototype.unpipe=function(s){var e=this._readableState,t={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return s&&s!==e.pipes?this:(s||(s=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,s&&s.emit("unpipe",this,t),this);if(!s){var n=e.pipes,h=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var b=0;b<h;b++)n[b].emit("unpipe",this,{hasUnpiped:!1});return this}var k=Q(e.pipes,s);return k===-1?this:(e.pipes.splice(k,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),s.emit("unpipe",this,t),this)},d.prototype.on=function(s,e){var t=ie.prototype.on.call(this,s,e),n=this._readableState;return s==="data"?(n.readableListening=0<this.listenerCount("readable"),n.flowing!==!1&&this.resume()):s=="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,W("on readable",n.length,n.reading),n.length?u(this):!n.reading&&g.nextTick(p,this)),t},d.prototype.addListener=d.prototype.on,d.prototype.removeListener=function(s,e){var t=ie.prototype.removeListener.call(this,s,e);return s==="readable"&&g.nextTick(D,this),t},d.prototype.removeAllListeners=function(s){var e=ie.prototype.removeAllListeners.apply(this,arguments);return(s==="readable"||s===void 0)&&g.nextTick(D,this),e},d.prototype.resume=function(){var s=this._readableState;return s.flowing||(W("resume"),s.flowing=!s.readableListening,w(this,s)),s.paused=!1,this},d.prototype.pause=function(){return W("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(W("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},d.prototype.wrap=function(s){var e=this,t=this._readableState,n=!1;for(var h in s.on("end",function(){if(W("wrapped end"),t.decoder&&!t.ended){var k=t.decoder.end();k&&k.length&&e.push(k)}e.push(null)}),s.on("data",function(k){if(W("wrapped data"),t.decoder&&(k=t.decoder.write(k)),!(t.objectMode&&k==null)&&(t.objectMode||k&&k.length)){var B=e.push(k);B||(n=!0,s.pause())}}),s)this[h]===void 0&&typeof s[h]=="function"&&(this[h]=function(k){return function(){return s[k].apply(s,arguments)}}(h));for(var b=0;b<q.length;b++)s.on(q[b],this.emit.bind(this,q[b]));return this._read=function(k){W("wrapped _read",k),n&&(n=!1,s.resume())},this},typeof Symbol=="function"&&(d.prototype[Symbol.asyncIterator]=function(){return de===void 0&&(de=v("./internal/streams/async_iterator")),de(this)}),Object.defineProperty(d.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(d.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(d.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(s){this._readableState&&(this._readableState.flowing=s)}}),d._fromList=H,Object.defineProperty(d.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(d.from=function(s,e){return pe===void 0&&(pe=v("./internal/streams/from")),pe(d,s,e)})}).call(this)}).call(this,v("_process"),typeof ue>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:ue)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(v,O){function g(T,N){var i=this._transformState;i.transforming=!1;var u=i.writecb;if(u===null)return this.emit("error",new d);i.writechunk=null,i.writecb=null,N!=null&&this.push(N),u(T);var l=this._readableState;l.reading=!1,(l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark)}function a(T){return this instanceof a?(x.call(this,T),this._transformState={afterTransform:g.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,T&&(typeof T.transform=="function"&&(this._transform=T.transform),typeof T.flush=="function"&&(this._flush=T.flush)),void this.on("prefinish",S)):new a(T)}function S(){var T=this;typeof this._flush!="function"||this._readableState.destroyed?I(this,null,null):this._flush(function(N,i){I(T,N,i)})}function I(T,N,i){if(N)return T.emit("error",N);if(i!=null&&T.push(i),T._writableState.length)throw new y;if(T._transformState.transforming)throw new o;return T.push(null)}O.exports=a;var r=v("../errors").codes,c=r.ERR_METHOD_NOT_IMPLEMENTED,d=r.ERR_MULTIPLE_CALLBACK,o=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,y=r.ERR_TRANSFORM_WITH_LENGTH_0,x=v("./_stream_duplex");v("inherits")(a,x),a.prototype.push=function(T,N){return this._transformState.needTransform=!1,x.prototype.push.call(this,T,N)},a.prototype._transform=function(T,N,i){i(new c("_transform()"))},a.prototype._write=function(T,N,i){var u=this._transformState;if(u.writecb=i,u.writechunk=T,u.writeencoding=N,!u.transforming){var l=this._readableState;(u.needTransform||l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark)}},a.prototype._read=function(){var T=this._transformState;T.writechunk===null||T.transforming?T.needTransform=!0:(T.transforming=!0,this._transform(T.writechunk,T.writeencoding,T.afterTransform))},a.prototype._destroy=function(T,N){x.prototype._destroy.call(this,T,function(i){N(i)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(v,O){(function(g,a){(function(){function S(E){var A=this;this.next=null,this.entry=null,this.finish=function(){Y(A,E)}}function I(E){return W.from(E)}function r(E){return W.isBuffer(E)||E instanceof Ee}function c(){}function d(E,A,U){K=K||v("./_stream_duplex"),E=E||{},typeof U!="boolean"&&(U=A instanceof K),this.objectMode=!!E.objectMode,U&&(this.objectMode=this.objectMode||!!E.writableObjectMode),this.highWaterMark=X(this,E,"writableHighWaterMark",U),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var q=E.decodeStrings===!1;this.decodeStrings=!q,this.defaultEncoding=E.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(s){_(A,s)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=E.emitClose!==!1,this.autoDestroy=!!E.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new S(this)}function o(E){K=K||v("./_stream_duplex");var A=this instanceof K;return A||ae.call(o,this)?(this._writableState=new d(E,this,A),this.writable=!0,E&&(typeof E.write=="function"&&(this._write=E.write),typeof E.writev=="function"&&(this._writev=E.writev),typeof E.destroy=="function"&&(this._destroy=E.destroy),typeof E.final=="function"&&(this._final=E.final)),void te.call(this)):new o(E)}function y(E,A){var U=new ke;oe(E,U),g.nextTick(A,U)}function x(E,A,U,q){var s;return U===null?s=new me:typeof U!="string"&&!A.objectMode&&(s=new se("chunk",["string","Buffer"],U)),!s||(oe(E,s),g.nextTick(q,s),!1)}function T(E,A,U){return E.objectMode||E.decodeStrings===!1||typeof A!="string"||(A=W.from(A,U)),A}function N(E,A,U,q,s,e){if(!U){var t=T(A,q,s);q!==t&&(U=!0,s="buffer",q=t)}var n=A.objectMode?1:q.length;A.length+=n;var h=A.length<A.highWaterMark;if(h||(A.needDrain=!0),A.writing||A.corked){var b=A.lastBufferedRequest;A.lastBufferedRequest={chunk:q,encoding:s,isBuf:U,callback:e,next:null},b?b.next=A.lastBufferedRequest:A.bufferedRequest=A.lastBufferedRequest,A.bufferedRequestCount+=1}else i(E,A,!1,n,q,s,e);return h}function i(E,A,U,q,s,e,t){A.writelen=q,A.writecb=t,A.writing=!0,A.sync=!0,A.destroyed?A.onwrite(new be("write")):U?E._writev(s,A.onwrite):E._write(s,e,A.onwrite),A.sync=!1}function u(E,A,U,q,s){--A.pendingcb,U?(g.nextTick(s,q),g.nextTick(j,E,A),E._writableState.errorEmitted=!0,oe(E,q)):(s(q),E._writableState.errorEmitted=!0,oe(E,q),j(E,A))}function l(E){E.writing=!1,E.writecb=null,E.length-=E.writelen,E.writelen=0}function _(E,A){var U=E._writableState,q=U.sync,s=U.writecb;if(typeof s!="function")throw new pe;if(l(U),A)u(E,U,q,A,s);else{var e=p(U)||E.destroyed;e||U.corked||U.bufferProcessing||!U.bufferedRequest||D(E,U),q?g.nextTick(f,E,U,e,s):f(E,U,e,s)}}function f(E,A,U,q){U||C(E,A),A.pendingcb--,q(),j(E,A)}function C(E,A){A.length===0&&A.needDrain&&(A.needDrain=!1,E.emit("drain"))}function D(E,A){A.bufferProcessing=!0;var U=A.bufferedRequest;if(E._writev&&U&&U.next){var q=A.bufferedRequestCount,s=Array(q),e=A.corkedRequestsFree;e.entry=U;for(var t=0,n=!0;U;)s[t]=U,U.isBuf||(n=!1),U=U.next,t+=1;s.allBuffers=n,i(E,A,!0,A.length,s,"",e.finish),A.pendingcb++,A.lastBufferedRequest=null,e.next?(A.corkedRequestsFree=e.next,e.next=null):A.corkedRequestsFree=new S(A),A.bufferedRequestCount=0}else{for(;U;){var h=U.chunk,b=U.encoding,k=U.callback,B=A.objectMode?1:h.length;if(i(E,A,!1,B,h,b,k),U=U.next,A.bufferedRequestCount--,A.writing)break}U===null&&(A.lastBufferedRequest=null)}A.bufferedRequest=U,A.bufferProcessing=!1}function p(E){return E.ending&&E.length===0&&E.bufferedRequest===null&&!E.finished&&!E.writing}function w(E,A){E._final(function(U){A.pendingcb--,U&&oe(E,U),A.prefinished=!0,E.emit("prefinish"),j(E,A)})}function M(E,A){A.prefinished||A.finalCalled||(typeof E._final!="function"||A.destroyed?(A.prefinished=!0,E.emit("prefinish")):(A.pendingcb++,A.finalCalled=!0,g.nextTick(w,E,A)))}function j(E,A){var U=p(A);if(U&&(M(E,A),A.pendingcb===0&&(A.finished=!0,E.emit("finish"),A.autoDestroy))){var q=E._readableState;(!q||q.autoDestroy&&q.endEmitted)&&E.destroy()}return U}function H(E,A,U){A.ending=!0,j(E,A),U&&(A.finished?g.nextTick(U):E.once("finish",U)),A.ended=!0,E.writable=!1}function Y(E,A,U){var q=E.entry;for(E.entry=null;q;){var s=q.callback;A.pendingcb--,s(U),q=q.next}A.corkedRequestsFree.next=E}O.exports=o;var K;o.WritableState=d;var Q={deprecate:v("util-deprecate")},te=v("./internal/streams/stream"),W=v("buffer").Buffer,Ee=a.Uint8Array||function(){},ie=v("./internal/streams/destroy"),fe=v("./internal/streams/state"),X=fe.getHighWaterMark,$=v("../errors").codes,se=$.ERR_INVALID_ARG_TYPE,de=$.ERR_METHOD_NOT_IMPLEMENTED,pe=$.ERR_MULTIPLE_CALLBACK,Ae=$.ERR_STREAM_CANNOT_PIPE,be=$.ERR_STREAM_DESTROYED,me=$.ERR_STREAM_NULL_VALUES,ke=$.ERR_STREAM_WRITE_AFTER_END,ge=$.ERR_UNKNOWN_ENCODING,oe=ie.errorOrDestroy;v("inherits")(o,te),d.prototype.getBuffer=function(){for(var E=this.bufferedRequest,A=[];E;)A.push(E),E=E.next;return A},function(){try{Object.defineProperty(d.prototype,"buffer",{get:Q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var ae;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(ae=Function.prototype[Symbol.hasInstance],Object.defineProperty(o,Symbol.hasInstance,{value:function(E){return!!ae.call(this,E)||this===o&&E&&E._writableState instanceof d}})):ae=function(E){return E instanceof this},o.prototype.pipe=function(){oe(this,new Ae)},o.prototype.write=function(E,A,U){var q=this._writableState,s=!1,e=!q.objectMode&&r(E);return e&&!W.isBuffer(E)&&(E=I(E)),typeof A=="function"&&(U=A,A=null),e?A="buffer":!A&&(A=q.defaultEncoding),typeof U!="function"&&(U=c),q.ending?y(this,U):(e||x(this,q,E,U))&&(q.pendingcb++,s=N(this,q,e,E,A,U)),s},o.prototype.cork=function(){this._writableState.corked++},o.prototype.uncork=function(){var E=this._writableState;E.corked&&(E.corked--,!E.writing&&!E.corked&&!E.bufferProcessing&&E.bufferedRequest&&D(this,E))},o.prototype.setDefaultEncoding=function(E){if(typeof E=="string"&&(E=E.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((E+"").toLowerCase())))throw new ge(E);return this._writableState.defaultEncoding=E,this},Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),o.prototype._write=function(E,A,U){U(new de("_write()"))},o.prototype._writev=null,o.prototype.end=function(E,A,U){var q=this._writableState;return typeof E=="function"?(U=E,E=null,A=null):typeof A=="function"&&(U=A,A=null),E!=null&&this.write(E,A),q.corked&&(q.corked=1,this.uncork()),q.ending||H(this,q,U),this},Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(E){this._writableState&&(this._writableState.destroyed=E)}}),o.prototype.destroy=ie.destroy,o.prototype._undestroy=ie.undestroy,o.prototype._destroy=function(E,A){A(E)}}).call(this)}).call(this,v("_process"),typeof ue>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:ue)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(v,O){(function(g){(function(){function a(C,D,p){return D in C?Object.defineProperty(C,D,{value:p,enumerable:!0,configurable:!0,writable:!0}):C[D]=p,C}function S(C,D){return{value:C,done:D}}function I(C){var D=C[y];if(D!==null){var p=C[l].read();p!==null&&(C[i]=null,C[y]=null,C[x]=null,D(S(p,!1)))}}function r(C){g.nextTick(I,C)}function c(C,D){return function(p,w){C.then(function(){return D[N]?void p(S(void 0,!0)):void D[u](p,w)},w)}}var d,o=v("./end-of-stream"),y=Symbol("lastResolve"),x=Symbol("lastReject"),T=Symbol("error"),N=Symbol("ended"),i=Symbol("lastPromise"),u=Symbol("handlePromise"),l=Symbol("stream"),_=Object.getPrototypeOf(function(){}),f=Object.setPrototypeOf((d={get stream(){return this[l]},next:function(){var C=this,D=this[T];if(D!==null)return Promise.reject(D);if(this[N])return Promise.resolve(S(void 0,!0));if(this[l].destroyed)return new Promise(function(j,H){g.nextTick(function(){C[T]?H(C[T]):j(S(void 0,!0))})});var p,w=this[i];if(w)p=new Promise(c(w,this));else{var M=this[l].read();if(M!==null)return Promise.resolve(S(M,!1));p=new Promise(this[u])}return this[i]=p,p}},a(d,Symbol.asyncIterator,function(){return this}),a(d,"return",function(){var C=this;return new Promise(function(D,p){C[l].destroy(null,function(w){return w?void p(w):void D(S(void 0,!0))})})}),d),_);O.exports=function(C){var D,p=Object.create(f,(D={},a(D,l,{value:C,writable:!0}),a(D,y,{value:null,writable:!0}),a(D,x,{value:null,writable:!0}),a(D,T,{value:null,writable:!0}),a(D,N,{value:C._readableState.endEmitted,writable:!0}),a(D,u,{value:function(w,M){var j=p[l].read();j?(p[i]=null,p[y]=null,p[x]=null,w(S(j,!1))):(p[y]=w,p[x]=M)},writable:!0}),D));return p[i]=null,o(C,function(w){if(w&&w.code!=="ERR_STREAM_PREMATURE_CLOSE"){var M=p[x];return M!==null&&(p[i]=null,p[y]=null,p[x]=null,M(w)),void(p[T]=w)}var j=p[y];j!==null&&(p[i]=null,p[y]=null,p[x]=null,j(S(void 0,!0))),p[N]=!0}),C.on("readable",r.bind(null,p)),p}}).call(this)}).call(this,v("_process"))},{"./end-of-stream":24,_process:12}],22:[function(v,O){function g(i,u){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(i);u&&(_=_.filter(function(f){return Object.getOwnPropertyDescriptor(i,f).enumerable})),l.push.apply(l,_)}return l}function a(i){for(var u,l=1;l<arguments.length;l++)u=arguments[l]==null?{}:arguments[l],l%2?g(Object(u),!0).forEach(function(_){S(i,_,u[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):g(Object(u)).forEach(function(_){Object.defineProperty(i,_,Object.getOwnPropertyDescriptor(u,_))});return i}function S(i,u,l){return u in i?Object.defineProperty(i,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[u]=l,i}function I(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}function r(i,u){for(var l,_=0;_<u.length;_++)l=u[_],l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}function c(i,u,l){return u&&r(i.prototype,u),l&&r(i,l),i}function d(i,u,l){y.prototype.copy.call(i,u,l)}var o=v("buffer"),y=o.Buffer,x=v("util"),T=x.inspect,N=T&&T.custom||"inspect";O.exports=function(){function i(){I(this,i),this.head=null,this.tail=null,this.length=0}return c(i,[{key:"push",value:function(u){var l={data:u,next:null};0<this.length?this.tail.next=l:this.head=l,this.tail=l,++this.length}},{key:"unshift",value:function(u){var l={data:u,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}},{key:"shift",value:function(){if(this.length!==0){var u=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,u}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(u){if(this.length===0)return"";for(var l=this.head,_=""+l.data;l=l.next;)_+=u+l.data;return _}},{key:"concat",value:function(u){if(this.length===0)return y.alloc(0);for(var l=y.allocUnsafe(u>>>0),_=this.head,f=0;_;)d(_.data,l,f),f+=_.data.length,_=_.next;return l}},{key:"consume",value:function(u,l){var _;return u<this.head.data.length?(_=this.head.data.slice(0,u),this.head.data=this.head.data.slice(u)):u===this.head.data.length?_=this.shift():_=l?this._getString(u):this._getBuffer(u),_}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(u){var l=this.head,_=1,f=l.data;for(u-=f.length;l=l.next;){var C=l.data,D=u>C.length?C.length:u;if(f+=D===C.length?C:C.slice(0,u),u-=D,u===0){D===C.length?(++_,this.head=l.next?l.next:this.tail=null):(this.head=l,l.data=C.slice(D));break}++_}return this.length-=_,f}},{key:"_getBuffer",value:function(u){var l=y.allocUnsafe(u),_=this.head,f=1;for(_.data.copy(l),u-=_.data.length;_=_.next;){var C=_.data,D=u>C.length?C.length:u;if(C.copy(l,l.length-u,0,D),u-=D,u===0){D===C.length?(++f,this.head=_.next?_.next:this.tail=null):(this.head=_,_.data=C.slice(D));break}++f}return this.length-=f,l}},{key:N,value:function(u,l){return T(this,a({},l,{depth:0,customInspect:!1}))}}]),i}()},{buffer:3,util:2}],23:[function(v,O){(function(g){(function(){function a(r,c){I(r,c),S(r)}function S(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function I(r,c){r.emit("error",c)}O.exports={destroy:function(r,c){var d=this,o=this._readableState&&this._readableState.destroyed,y=this._writableState&&this._writableState.destroyed;return o||y?(c?c(r):r&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,g.nextTick(I,this,r)):g.nextTick(I,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(x){!c&&x?d._writableState?d._writableState.errorEmitted?g.nextTick(S,d):(d._writableState.errorEmitted=!0,g.nextTick(a,d,x)):g.nextTick(a,d,x):c?(g.nextTick(S,d),c(x)):g.nextTick(S,d)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(r,c){var d=r._readableState,o=r._writableState;d&&d.autoDestroy||o&&o.autoDestroy?r.destroy(c):r.emit("error",c)}}}).call(this)}).call(this,v("_process"))},{_process:12}],24:[function(v,O){function g(c){var d=!1;return function(){if(!d){d=!0;for(var o=arguments.length,y=Array(o),x=0;x<o;x++)y[x]=arguments[x];c.apply(this,y)}}}function a(){}function S(c){return c.setHeader&&typeof c.abort=="function"}function I(c,d,o){if(typeof d=="function")return I(c,null,d);d||(d={}),o=g(o||a);var y=d.readable||d.readable!==!1&&c.readable,x=d.writable||d.writable!==!1&&c.writable,T=function(){c.writable||i()},N=c._writableState&&c._writableState.finished,i=function(){x=!1,N=!0,y||o.call(c)},u=c._readableState&&c._readableState.endEmitted,l=function(){y=!1,u=!0,x||o.call(c)},_=function(D){o.call(c,D)},f=function(){var D;return y&&!u?(c._readableState&&c._readableState.ended||(D=new r),o.call(c,D)):x&&!N?(c._writableState&&c._writableState.ended||(D=new r),o.call(c,D)):void 0},C=function(){c.req.on("finish",i)};return S(c)?(c.on("complete",i),c.on("abort",f),c.req?C():c.on("request",C)):x&&!c._writableState&&(c.on("end",T),c.on("close",T)),c.on("end",l),c.on("finish",i),d.error!==!1&&c.on("error",_),c.on("close",f),function(){c.removeListener("complete",i),c.removeListener("abort",f),c.removeListener("request",C),c.req&&c.req.removeListener("finish",i),c.removeListener("end",T),c.removeListener("close",T),c.removeListener("finish",i),c.removeListener("end",l),c.removeListener("error",_),c.removeListener("close",f)}}var r=v("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;O.exports=I},{"../../../errors":15}],25:[function(v,O){O.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(v,O){function g(N){var i=!1;return function(){i||(i=!0,N.apply(void 0,arguments))}}function a(N){if(N)throw N}function S(N){return N.setHeader&&typeof N.abort=="function"}function I(N,i,u,l){l=g(l);var _=!1;N.on("close",function(){_=!0}),o===void 0&&(o=v("./end-of-stream")),o(N,{readable:i,writable:u},function(C){return C?l(C):(_=!0,void l())});var f=!1;return function(C){if(!_)return f?void 0:(f=!0,S(N)?N.abort():typeof N.destroy=="function"?N.destroy():void l(C||new T("pipe")))}}function r(N){N()}function c(N,i){return N.pipe(i)}function d(N){return N.length&&typeof N[N.length-1]=="function"?N.pop():a}var o,y=v("../../../errors").codes,x=y.ERR_MISSING_ARGS,T=y.ERR_STREAM_DESTROYED;O.exports=function(){for(var N=arguments.length,i=Array(N),u=0;u<N;u++)i[u]=arguments[u];var l=d(i);if(Array.isArray(i[0])&&(i=i[0]),2>i.length)throw new x("streams");var _,f=i.map(function(C,D){var p=D<i.length-1;return I(C,p,0<D,function(w){_||(_=w),w&&f.forEach(r),p||(f.forEach(r),l(_))})});return i.reduce(c)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(v,O){function g(S,I,r){return S.highWaterMark==null?I?S[r]:null:S.highWaterMark}var a=v("../../../errors").codes.ERR_INVALID_OPT_VALUE;O.exports={getHighWaterMark:function(S,I,r,c){var d=g(I,c,r);if(d!=null){if(!(isFinite(d)&&L(d)===d)||0>d){var o=c?r:"highWaterMark";throw new a(o,d)}return L(d)}return S.objectMode?16:16384}}},{"../../../errors":15}],28:[function(v,O){O.exports=v("events").EventEmitter},{events:7}],29:[function(v,O,g){g=O.exports=v("./lib/_stream_readable.js"),g.Stream=g,g.Readable=g,g.Writable=v("./lib/_stream_writable.js"),g.Duplex=v("./lib/_stream_duplex.js"),g.Transform=v("./lib/_stream_transform.js"),g.PassThrough=v("./lib/_stream_passthrough.js"),g.finished=v("./lib/internal/streams/end-of-stream.js"),g.pipeline=v("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(v,O,g){function a(c,d){for(var o in c)d[o]=c[o]}function S(c,d,o){return r(c,d,o)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var I=v("buffer"),r=I.Buffer;r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?O.exports=I:(a(I,g),g.Buffer=S),S.prototype=Object.create(r.prototype),a(r,S),S.from=function(c,d,o){if(typeof c=="number")throw new TypeError("Argument must not be a number");return r(c,d,o)},S.alloc=function(c,d,o){if(typeof c!="number")throw new TypeError("Argument must be a number");var y=r(c);return d===void 0?y.fill(0):typeof o=="string"?y.fill(d,o):y.fill(d),y},S.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return r(c)},S.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return I.SlowBuffer(c)}},{buffer:3}],31:[function(v,O,g){function a(f){if(!f)return"utf8";for(var C;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(C)return;f=(""+f).toLowerCase(),C=!0}}function S(f){var C=a(f);if(typeof C!="string"&&(l.isEncoding===_||!_(f)))throw new Error("Unknown encoding: "+f);return C||f}function I(f){this.encoding=S(f);var C;switch(this.encoding){case"utf16le":this.text=y,this.end=x,C=4;break;case"utf8":this.fillLast=o,C=4;break;case"base64":this.text=T,this.end=N,C=3;break;default:return this.write=i,void(this.end=u)}this.lastNeed=0,this.lastTotal=0,this.lastChar=l.allocUnsafe(C)}function r(f){return 127>=f?0:f>>5==6?2:f>>4==14?3:f>>3==30?4:f>>6==2?-1:-2}function c(f,C,D){var p=C.length-1;if(p<D)return 0;var w=r(C[p]);return 0<=w?(0<w&&(f.lastNeed=w-1),w):--p<D||w===-2?0:(w=r(C[p]),0<=w?(0<w&&(f.lastNeed=w-2),w):--p<D||w===-2?0:(w=r(C[p]),0<=w?(0<w&&(w===2?w=0:f.lastNeed=w-3),w):0))}function d(f,C){if((192&C[0])!=128)return f.lastNeed=0,"";if(1<f.lastNeed&&1<C.length){if((192&C[1])!=128)return f.lastNeed=1,"";if(2<f.lastNeed&&2<C.length&&(192&C[2])!=128)return f.lastNeed=2,""}}function o(f){var C=this.lastTotal-this.lastNeed,D=d(this,f);return D===void 0?this.lastNeed<=f.length?(f.copy(this.lastChar,C,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(f.copy(this.lastChar,C,0,f.length),void(this.lastNeed-=f.length)):D}function y(f,C){if((f.length-C)%2==0){var D=f.toString("utf16le",C);if(D){var p=D.charCodeAt(D.length-1);if(55296<=p&&56319>=p)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1],D.slice(0,-1)}return D}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=f[f.length-1],f.toString("utf16le",C,f.length-1)}function x(f){var C=f&&f.length?this.write(f):"";if(this.lastNeed){var D=this.lastTotal-this.lastNeed;return C+this.lastChar.toString("utf16le",0,D)}return C}function T(f,C){var D=(f.length-C)%3;return D==0?f.toString("base64",C):(this.lastNeed=3-D,this.lastTotal=3,D==1?this.lastChar[0]=f[f.length-1]:(this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1]),f.toString("base64",C,f.length-D))}function N(f){var C=f&&f.length?this.write(f):"";return this.lastNeed?C+this.lastChar.toString("base64",0,3-this.lastNeed):C}function i(f){return f.toString(this.encoding)}function u(f){return f&&f.length?this.write(f):""}var l=v("safe-buffer").Buffer,_=l.isEncoding||function(f){switch(f=""+f,f&&f.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};g.StringDecoder=I,I.prototype.write=function(f){if(f.length===0)return"";var C,D;if(this.lastNeed){if(C=this.fillLast(f),C===void 0)return"";D=this.lastNeed,this.lastNeed=0}else D=0;return D<f.length?C?C+this.text(f,D):this.text(f,D):C||""},I.prototype.end=function(f){var C=f&&f.length?this.write(f):"";return this.lastNeed?C+"":C},I.prototype.text=function(f,C){var D=c(this,f,C);if(!this.lastNeed)return f.toString("utf8",C);this.lastTotal=D;var p=f.length-(D-this.lastNeed);return f.copy(this.lastChar,0,p),f.toString("utf8",C,p)},I.prototype.fillLast=function(f){return this.lastNeed<=f.length?(f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length),void(this.lastNeed-=f.length))}},{"safe-buffer":30}],32:[function(v,O){(function(g){(function(){function a(S){try{if(!g.localStorage)return!1}catch{return!1}var I=g.localStorage[S];return I!=null&&(I+"").toLowerCase()==="true"}O.exports=function(S,I){function r(){if(!c){if(a("throwDeprecation"))throw new Error(I);a("traceDeprecation")?console.trace(I):console.warn(I),c=!0}return S.apply(this,arguments)}if(a("noDeprecation"))return S;var c=!1;return r}}).call(this)}).call(this,typeof ue>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:ue)},{}],"/":[function(v,O){function g(N){return N.replace(/a=ice-options:trickle\s\n/g,"")}function a(N){console.warn(N)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const S=v("debug")("simple-peer"),I=v("get-browser-rtc"),r=v("randombytes"),c=v("readable-stream"),d=v("queue-microtask"),o=v("err-code"),{Buffer:y}=v("buffer"),x=65536;class T extends c.Duplex{constructor(i){if(i=Object.assign({allowHalfOpen:!1},i),super(i),this._id=r(4).toString("hex").slice(0,7),this._debug("new peer %o",i),this.channelName=i.initiator?i.channelName||r(20).toString("hex"):null,this.initiator=i.initiator||!1,this.channelConfig=i.channelConfig||T.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},T.config,i.config),this.offerOptions=i.offerOptions||{},this.answerOptions=i.answerOptions||{},this.sdpTransform=i.sdpTransform||(u=>u),this.streams=i.streams||(i.stream?[i.stream]:[]),this.trickle=i.trickle===void 0||i.trickle,this.allowHalfTrickle=i.allowHalfTrickle!==void 0&&i.allowHalfTrickle,this.iceCompleteTimeout=i.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=i.wrtc&&typeof i.wrtc=="object"?i.wrtc:I(),!this._wrtc)throw o(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(u){return void this.destroy(o(u,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=u=>{this._onIceCandidate(u)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(u=>{this.destroy(o(u,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=u=>{this._setupData(u)},this.streams&&this.streams.forEach(u=>{this.addStream(u)}),this._pc.ontrack=u=>{this._onTrack(u)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(i){if(!this.destroying){if(this.destroyed)throw o(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof i=="string")try{i=JSON.parse(i)}catch{i={}}this._debug("signal()"),i.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),i.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(i.transceiverRequest.kind,i.transceiverRequest.init)),i.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(i.candidate):this._pendingCandidates.push(i.candidate)),i.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(i)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(u=>{this._addIceCandidate(u)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(u=>{this.destroy(o(u,"ERR_SET_REMOTE_DESCRIPTION"))}),i.sdp||i.candidate||i.renegotiate||i.transceiverRequest||this.destroy(o(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(i){const u=new this._wrtc.RTCIceCandidate(i);this._pc.addIceCandidate(u).catch(l=>{!u.address||u.address.endsWith(".local")?a("Ignoring unsupported ICE candidate."):this.destroy(o(l,"ERR_ADD_ICE_CANDIDATE"))})}send(i){if(!this.destroying){if(this.destroyed)throw o(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(i)}}addTransceiver(i,u){if(!this.destroying){if(this.destroyed)throw o(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(i,u),this._needsNegotiation()}catch(l){this.destroy(o(l,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:i,init:u}})}}addStream(i){if(!this.destroying){if(this.destroyed)throw o(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),i.getTracks().forEach(u=>{this.addTrack(u,i)})}}addTrack(i,u){if(this.destroying)return;if(this.destroyed)throw o(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const l=this._senderMap.get(i)||new Map;let _=l.get(u);if(!_)_=this._pc.addTrack(i,u),l.set(u,_),this._senderMap.set(i,l),this._needsNegotiation();else throw _.removed?o(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):o(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(i,u,l){if(this.destroying)return;if(this.destroyed)throw o(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const _=this._senderMap.get(i),f=_?_.get(l):null;if(!f)throw o(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");u&&this._senderMap.set(u,_),f.replaceTrack==null?this.destroy(o(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):f.replaceTrack(u)}removeTrack(i,u){if(this.destroying)return;if(this.destroyed)throw o(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const l=this._senderMap.get(i),_=l?l.get(u):null;if(!_)throw o(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{_.removed=!0,this._pc.removeTrack(_)}catch(f){f.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(_):this.destroy(o(f,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(i){if(!this.destroying){if(this.destroyed)throw o(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),i.getTracks().forEach(u=>{this.removeTrack(u,i)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,d(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw o(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(i){this._destroy(i,()=>{})}_destroy(i,u){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",i&&(i.message||i)),d(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",i&&(i.message||i)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,i&&this.emit("error",i),this.emit("close"),u()}))}_setupData(i){if(!i.channel)return this.destroy(o(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=i.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=x),this.channelName=this._channel.label,this._channel.onmessage=l=>{this._onChannelMessage(l)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=l=>{const _=l.error instanceof Error?l.error:new Error(`Datachannel error: ${l.message} ${l.filename}:${l.lineno}:${l.colno}`);this.destroy(o(_,"ERR_DATA_CHANNEL"))};let u=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(u&&this._onChannelClose(),u=!0):u=!1},5e3)}_read(){}_write(i,u,l){if(this.destroyed)return l(o(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(i)}catch(_){return this.destroy(o(_,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>x?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=l):l(null)}else this._debug("write before connect"),this._chunk=i,this._cb=l}_onFinish(){if(!this.destroyed){const i=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?i():this.once("connect",i)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(i=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(i.sdp=g(i.sdp)),i.sdp=this.sdpTransform(i.sdp);const u=()=>{if(!this.destroyed){const l=this._pc.localDescription||i;this._debug("signal"),this.emit("signal",{type:l.type,sdp:l.sdp})}};this._pc.setLocalDescription(i).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?u():this.once("_iceComplete",u))}).catch(l=>{this.destroy(o(l,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(i=>{this.destroy(o(i,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(i=>{i.mid||!i.sender.track||i.requested||(i.requested=!0,this.addTransceiver(i.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(i=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(i.sdp=g(i.sdp)),i.sdp=this.sdpTransform(i.sdp);const u=()=>{if(!this.destroyed){const l=this._pc.localDescription||i;this._debug("signal"),this.emit("signal",{type:l.type,sdp:l.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(i).then(()=>{this.destroyed||(this.trickle||this._iceComplete?u():this.once("_iceComplete",u))}).catch(l=>{this.destroy(o(l,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(i=>{this.destroy(o(i,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(o(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const i=this._pc.iceConnectionState,u=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",i,u),this.emit("iceStateChange",i,u),(i==="connected"||i==="completed")&&(this._pcReady=!0,this._maybeReady()),i==="failed"&&this.destroy(o(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),i==="closed"&&this.destroy(o(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(i){const u=l=>(Object.prototype.toString.call(l.values)==="[object Array]"&&l.values.forEach(_=>{Object.assign(l,_)}),l);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(l=>{const _=[];l.forEach(f=>{_.push(u(f))}),i(null,_)},l=>i(l)):0<this._pc.getStats.length?this._pc.getStats(l=>{if(this.destroyed)return;const _=[];l.result().forEach(f=>{const C={};f.names().forEach(D=>{C[D]=f.stat(D)}),C.id=f.id,C.type=f.type,C.timestamp=f.timestamp,_.push(u(C))}),i(null,_)},l=>i(l)):i(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const i=()=>{this.destroyed||this.getStats((u,l)=>{if(this.destroyed)return;u&&(l=[]);const _={},f={},C={};let D=!1;l.forEach(w=>{(w.type==="remotecandidate"||w.type==="remote-candidate")&&(_[w.id]=w),(w.type==="localcandidate"||w.type==="local-candidate")&&(f[w.id]=w),(w.type==="candidatepair"||w.type==="candidate-pair")&&(C[w.id]=w)});const p=w=>{D=!0;let M=f[w.localCandidateId];M&&(M.ip||M.address)?(this.localAddress=M.ip||M.address,this.localPort=+M.port):M&&M.ipAddress?(this.localAddress=M.ipAddress,this.localPort=+M.portNumber):typeof w.googLocalAddress=="string"&&(M=w.googLocalAddress.split(":"),this.localAddress=M[0],this.localPort=+M[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let j=_[w.remoteCandidateId];j&&(j.ip||j.address)?(this.remoteAddress=j.ip||j.address,this.remotePort=+j.port):j&&j.ipAddress?(this.remoteAddress=j.ipAddress,this.remotePort=+j.portNumber):typeof w.googRemoteAddress=="string"&&(j=w.googRemoteAddress.split(":"),this.remoteAddress=j[0],this.remotePort=+j[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(l.forEach(w=>{w.type==="transport"&&w.selectedCandidatePairId&&p(C[w.selectedCandidatePairId]),(w.type==="googCandidatePair"&&w.googActiveConnection==="true"||(w.type==="candidatepair"||w.type==="candidate-pair")&&w.selected)&&p(w)}),!D&&(!Object.keys(C).length||Object.keys(f).length))return void setTimeout(i,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(M){return this.destroy(o(M,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const w=this._cb;this._cb=null,w(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};i()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>x)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(i=>{this._pc.removeTrack(i),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(i){this.destroyed||(i.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:i.candidate.candidate,sdpMLineIndex:i.candidate.sdpMLineIndex,sdpMid:i.candidate.sdpMid}}):!i.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),i.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(i){if(this.destroyed)return;let u=i.data;u instanceof ArrayBuffer&&(u=y.from(u)),this.push(u)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const i=this._cb;this._cb=null,i(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(i){this.destroyed||i.streams.forEach(u=>{this._debug("on track"),this.emit("track",i.track,u),this._remoteTracks.push({track:i.track,stream:u}),this._remoteStreams.some(l=>l.id===u.id)||(this._remoteStreams.push(u),d(()=>{this._debug("on stream"),this.emit("stream",u)}))})}_debug(){const i=[].slice.call(arguments);i[0]="["+this._id+"] "+i[0],S.apply(null,i)}}T.WEBRTC_SUPPORT=!!I(),T.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},T.channelConfig={},O.exports=T},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})})(ft);var Zt=ft.exports;const en=It(Zt),Je=0,Xe=1,dt=2,pt=(m,R)=>{Z(m,Je);const L=xt(R);he(m,L)},gt=(m,R,L)=>{Z(m,Xe),he(m,Nt(R,L))},tn=(m,R,L)=>gt(R,L,Ie(m)),yt=(m,R,L)=>{try{Dt(R,Ie(m),L)}catch(F){console.error("Caught error while handling a Yjs update",F)}},nn=(m,R)=>{Z(m,dt),he(m,R)},rn=yt,sn=(m,R,L,F)=>{const P=Oe(m);switch(P){case Je:tn(m,R,L);break;case Xe:yt(m,L,F);break;case dt:rn(m,L,F);break;default:throw new Error("Unknown message type")}return P},qe=3e4;class on extends ze{constructor(R){super(),this.doc=R,this.clientID=R.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const L=ve();this.getLocalState()!==null&&qe/2<=L-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const F=[];this.meta.forEach((P,v)=>{v!==this.clientID&&qe<=L-P.lastUpdated&&this.states.has(v)&&F.push(v)}),F.length>0&&Ye(this,F,"timeout")},st(qe/10)),R.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(R){const L=this.clientID,F=this.meta.get(L),P=F===void 0?0:F.clock+1,v=this.states.get(L);R===null?this.states.delete(L):this.states.set(L,R),this.meta.set(L,{clock:P,lastUpdated:ve()});const O=[],g=[],a=[],S=[];R===null?S.push(L):v==null?R!=null&&O.push(L):(g.push(L),ot(v,R)||a.push(L)),(O.length>0||a.length>0||S.length>0)&&this.emit("change",[{added:O,updated:a,removed:S},"local"]),this.emit("update",[{added:O,updated:g,removed:S},"local"])}setLocalStateField(R,L){const F=this.getLocalState();F!==null&&this.setLocalState({...F,[R]:L})}getStates(){return this.states}}const Ye=(m,R,L)=>{const F=[];for(let P=0;P<R.length;P++){const v=R[P];if(m.states.has(v)){if(m.states.delete(v),v===m.clientID){const O=m.meta.get(v);m.meta.set(v,{clock:O.clock+1,lastUpdated:ve()})}F.push(v)}}F.length>0&&(m.emit("change",[{added:[],updated:[],removed:F},L]),m.emit("update",[{added:[],updated:[],removed:F},L]))},Ue=(m,R,L=m.states)=>{const F=R.length,P=ne();Z(P,F);for(let v=0;v<F;v++){const O=R[v],g=L.get(O)||null,a=m.meta.get(O).clock;Z(P,O),Z(P,a),je(P,JSON.stringify(g))}return re(P)},an=(m,R,L)=>{const F=Be(R),P=ve(),v=[],O=[],g=[],a=[],S=Oe(F);for(let I=0;I<S;I++){const r=Oe(F);let c=Oe(F);const d=JSON.parse(Ge(F)),o=m.meta.get(r),y=m.states.get(r),x=o===void 0?0:o.clock;(x<c||x===c&&d===null&&m.states.has(r))&&(d===null?r===m.clientID&&m.getLocalState()!=null?c++:m.states.delete(r):m.states.set(r,d),m.meta.set(r,{clock:c,lastUpdated:P}),o===void 0&&d!==null?v.push(r):o!==void 0&&d===null?a.push(r):d!==null&&(ot(d,y)||g.push(r),O.push(r)))}(v.length>0||g.length>0||a.length>0)&&m.emit("change",[{added:v,updated:g,removed:a},L]),(v.length>0||O.length>0||a.length>0)&&m.emit("update",[{added:v,updated:O,removed:a},L])},cn=(m,R)=>{const L=et(m).buffer,F=et(R).buffer;return crypto.subtle.importKey("raw",L,"PBKDF2",!1,["deriveKey"]).then(P=>crypto.subtle.deriveKey({name:"PBKDF2",salt:F,iterations:1e5,hash:"SHA-256"},P,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},bt=(m,R)=>{if(!R)return Ke(m);const L=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:L},R,m).then(F=>{const P=ne();return je(P,"AES-GCM"),he(P,L),he(P,new Uint8Array(F)),re(P)})},un=(m,R)=>{const L=ne();return Ut(L,m),bt(re(L),R)},mt=(m,R)=>{if(!R)return Ke(m);const L=Be(m);Ge(L)!=="AES-GCM"&&Mt(at("Unknown encryption algorithm"));const P=Ie(L),v=Ie(L);return crypto.subtle.decrypt({name:"AES-GCM",iv:P},R,v).then(O=>new Uint8Array(O))},ln=(m,R)=>mt(m,R).then(L=>Pt(Be(new Uint8Array(L)))),ce=Ft("y-webrtc"),Te=0,_t=3,Ne=1,Qe=4,Fe=new Map,we=new Map,wt=m=>{let R=!0;m.webrtcConns.forEach(L=>{L.synced||(R=!1)}),(!R&&m.synced||R&&!m.synced)&&(m.synced=R,m.provider.emit("synced",[{synced:R}]),ce("synced ",le,m.name,xe," with all peers"))},vt=(m,R,L)=>{const F=Be(R),P=ne(),v=Oe(F);if(m===void 0)return null;const O=m.awareness,g=m.doc;let a=!1;switch(v){case Te:{Z(P,Te);const S=sn(F,P,g,m);S===Xe&&!m.synced&&L(),S===Je&&(a=!0);break}case _t:Z(P,Ne),he(P,Ue(O,Array.from(O.getStates().keys()))),a=!0;break;case Ne:an(O,Ie(F),m);break;case Qe:{const S=qt(F)===1,I=Ge(F);if(I!==m.peerId&&(m.bcConns.has(I)&&!S||!m.bcConns.has(I)&&S)){const r=[],c=[];S?(m.bcConns.add(I),c.push(I)):(m.bcConns.delete(I),r.push(I)),m.provider.emit("peers",[{added:c,removed:r,webrtcPeers:Array.from(m.webrtcConns.keys()),bcPeers:Array.from(m.bcConns)}]),Et(m)}break}default:return console.error("Unable to compute message"),P}return a?P:null},hn=(m,R)=>{const L=m.room;return ce("received message from ",le,m.remotePeerId,ut," (",L.name,")",xe,lt),vt(L,R,()=>{m.synced=!0,ce("synced ",le,L.name,xe," with ",le,m.remotePeerId),wt(L)})},We=(m,R)=>{ce("send message to ",le,m.remotePeerId,xe,ut," (",m.room.name,")",lt);try{m.peer.send(re(R))}catch{}},fn=(m,R)=>{ce("broadcast message in ",le,m.name,xe),m.webrtcConns.forEach(L=>{try{L.peer.send(R)}catch{}})};class tt{constructor(R,L,F,P){ce("establishing connection to ",le,F),this.room=P,this.remotePeerId=F,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new en({initiator:L,...P.provider.peerOpts}),this.peer.on("signal",v=>{Ze(R,P,{to:F,from:P.peerId,type:"signal",signal:v})}),this.peer.on("connect",()=>{ce("connected to ",le,F),this.connected=!0;const O=P.provider.doc,g=P.awareness,a=ne();Z(a,Te),pt(a,O),We(this,a);const S=g.getStates();if(S.size>0){const I=ne();Z(I,Ne),he(I,Ue(g,Array.from(S.keys()))),We(this,I)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,P.webrtcConns.has(this.remotePeerId)&&(P.webrtcConns.delete(this.remotePeerId),P.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(P.webrtcConns.keys()),bcPeers:Array.from(P.bcConns)}])),wt(P),this.peer.destroy(),ce("closed connection to ",le,F),Ve(P)}),this.peer.on("error",v=>{ce("Error in connection to ",le,F,": ",v),Ve(P)}),this.peer.on("data",v=>{const O=hn(this,v);O!==null&&We(this,O)})}destroy(){this.peer.destroy()}}const ye=(m,R)=>bt(R,m.key).then(L=>m.mux(()=>Xt(m.name,L))),nt=(m,R)=>{m.bcconnected&&ye(m,R),fn(m,R)},Ve=m=>{Fe.forEach(R=>{R.connected&&(R.send({type:"subscribe",topics:[m.name]}),m.webrtcConns.size<m.provider.maxConns&&Ze(R,m,{type:"announce",from:m.peerId}))})},Et=m=>{if(m.provider.filterBcConns){const R=ne();Z(R,Qe),ct(R,1),je(R,m.peerId),ye(m,re(R))}};class dn{constructor(R,L,F,P){this.peerId=Bt(),this.doc=R,this.awareness=L.awareness,this.provider=L,this.synced=!1,this.name=F,this.key=P,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=Qt(),this.bcconnected=!1,this._bcSubscriber=v=>mt(new Uint8Array(v),P).then(O=>this.mux(()=>{const g=vt(this,O,()=>{});g&&ye(this,re(g))})),this._docUpdateHandler=(v,O)=>{const g=ne();Z(g,Te),nn(g,v),nt(this,re(g))},this._awarenessUpdateHandler=({added:v,updated:O,removed:g},a)=>{const S=v.concat(O).concat(g),I=ne();Z(I,Ne),he(I,Ue(this.awareness,S)),nt(this,re(I))},this._beforeUnloadHandler=()=>{Ye(this.awareness,[R.clientID],"window unload"),we.forEach(v=>{v.disconnect()})},typeof window<"u"?window.addEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),Ve(this);const R=this.name;$t(R,this._bcSubscriber),this.bcconnected=!0,Et(this);const L=ne();Z(L,Te),pt(L,this.doc),ye(this,re(L));const F=ne();Z(F,Te),gt(F,this.doc),ye(this,re(F));const P=ne();Z(P,_t),ye(this,re(P));const v=ne();Z(v,Ne),he(v,Ue(this.awareness,[this.doc.clientID])),ye(this,re(v))}disconnect(){Fe.forEach(L=>{L.connected&&L.send({type:"unsubscribe",topics:[this.name]})}),Ye(this.awareness,[this.doc.clientID],"disconnect");const R=ne();Z(R,Qe),ct(R,0),je(R,this.peerId),ye(this,re(R)),Jt(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(L=>L.destroy())}destroy(){this.disconnect(),typeof window<"u"?window.removeEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.off("exit",this._beforeUnloadHandler)}}const pn=(m,R,L,F)=>{if(we.has(L))throw at(`A Yjs Doc connected to room "${L}" already exists!`);const P=new dn(m,R,L,F);return we.set(L,P),P},Ze=(m,R,L)=>{R.key?un(L,R.key).then(F=>{m.send({type:"publish",topic:R.name,data:it(F)})}):m.send({type:"publish",topic:R.name,data:L})};class gn extends zt{constructor(R){super(R),this.providers=new Set,this.on("connect",()=>{ce(`connected (${R})`);const L=Array.from(we.keys());this.send({type:"subscribe",topics:L}),we.forEach(F=>Ze(this,F,{type:"announce",from:F.peerId}))}),this.on("message",L=>{switch(L.type){case"publish":{const F=L.topic,P=we.get(F);if(P==null||typeof F!="string")return;const v=O=>{const g=P.webrtcConns,a=P.peerId;if(O==null||O.from===a||O.to!==void 0&&O.to!==a||P.bcConns.has(O.from))return;const S=g.has(O.from)?()=>{}:()=>P.provider.emit("peers",[{removed:[],added:[O.from],webrtcPeers:Array.from(P.webrtcConns.keys()),bcPeers:Array.from(P.bcConns)}]);switch(O.type){case"announce":g.size<P.provider.maxConns&&(Me(g,O.from,()=>new tt(this,!0,O.from,P)),S());break;case"signal":O.to===a&&(Me(g,O.from,()=>new tt(this,!1,O.from,P)).peer.signal(O.signal),S());break}};P.key?typeof L.data=="string"&&ln(rt(L.data),P.key).then(v):v(L.data)}}}),this.on("disconnect",()=>ce(`disconnect (${R})`))}}class yn extends ze{constructor(R,L,{signaling:F=["wss://y-webrtc-eu.fly.dev"],password:P=null,awareness:v=new on(L),maxConns:O=20+st(jt()*15),filterBcConns:g=!0,peerOpts:a={}}={}){super(),this.roomName=R,this.doc=L,this.filterBcConns=g,this.awareness=v,this.shouldConnect=!1,this.signalingUrls=F,this.signalingConns=[],this.maxConns=O,this.peerOpts=a,this.key=P?cn(P,R):Ke(null),this.room=null,this.key.then(S=>{this.room=pn(L,this,R,S),this.shouldConnect?this.room.connect():this.room.disconnect()}),this.connect(),this.destroy=this.destroy.bind(this),L.on("destroy",this.destroy)}get connected(){return this.room!==null&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(R=>{const L=Me(Fe,R,()=>new gn(R));this.signalingConns.push(L),L.providers.add(this)}),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(R=>{R.providers.delete(this),R.providers.size===0&&(R.destroy(),Fe.delete(R.url))}),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),we.delete(this.roomName)}),super.destroy()}}const Ct=new Wt,bn=Ht({pageName:"collaborate",options:{ydoc:Ct}}),mn=new yn("demo-room",Ct);bn.bindAwareness(mn.awareness);
