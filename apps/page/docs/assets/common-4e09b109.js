var cr=Object.defineProperty;var dr=(B,e,r)=>e in B?cr(B,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):B[e]=r;var b=(B,e,r)=>(dr(B,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const g of u)if(g.type==="childList")for(const w of g.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&a(w)}).observe(document,{childList:!0,subtree:!0});function r(u){const g={};return u.integrity&&(g.integrity=u.integrity),u.referrerPolicy&&(g.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?g.credentials="include":u.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function a(u){if(u.ep)return;u.ep=!0;const g=r(u);fetch(u.href,g)}})();function Yi(B){return B&&B.__esModule&&Object.prototype.hasOwnProperty.call(B,"default")?B.default:B}var Xi={exports:{}};(function(B,e){(function(r,a){B.exports=a()})(window,function(){return function(r){var a={};function u(g){if(a[g])return a[g].exports;var w=a[g]={i:g,l:!1,exports:{}};return r[g].call(w.exports,w,w.exports,u),w.l=!0,w.exports}return u.m=r,u.c=a,u.d=function(g,w,h){u.o(g,w)||Object.defineProperty(g,w,{enumerable:!0,get:h})},u.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},u.t=function(g,w){if(1&w&&(g=u(g)),8&w||4&w&&typeof g=="object"&&g&&g.__esModule)return g;var h=Object.create(null);if(u.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:g}),2&w&&typeof g!="string")for(var o in g)u.d(h,o,function(k){return g[k]}.bind(null,o));return h},u.n=function(g){var w=g&&g.__esModule?function(){return g.default}:function(){return g};return u.d(w,"a",w),w},u.o=function(g,w){return Object.prototype.hasOwnProperty.call(g,w)},u.p="",u(u.s=1)}([function(r,a,u){var g,w;g=[u(2)],(w=function(h){function o(t){if(o.is(t,"function"))return k?t():h.on("raphael.DOMload",t);if(o.is(t,mt))return o._engine.create[U](o,t.splice(0,3+o.is(t[0],ft))).add(t);var i=Array.prototype.slice.call(arguments,0);if(o.is(i[i.length-1],"function")){var s=i.pop();return k?s.call(o._engine.create[U](o,i)):h.on("raphael.DOMload",function(){s.call(o._engine.create[U](o,i))})}return o._engine.create[U](o,arguments)}o.version="2.3.0",o.eve=h;var k,C,X=/[, ]+/,V={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},J=/\{(\d+)\}/g,K="hasOwnProperty",j={doc:document,win:window},tt={was:Object.prototype[K].call(j.win,"Raphael"),is:j.win.Raphael},bt=function(){this.ca=this.customAttributes={}},U="apply",M="concat",ct="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,st="",dt=" ",Y=String,et="split",ot="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[et](dt),St={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},ht=Y.prototype.toLowerCase,Z=Math,nt=Z.max,rt=Z.min,kt=Z.abs,Lt=Z.pow,Dt=Z.PI,ft="number",mt="array",jt=Object.prototype.toString,f=(o._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),d={NaN:1,Infinity:1,"-Infinity":1},c=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,y=Z.round,S=parseFloat,_=parseInt,N=Y.prototype.toUpperCase,z=o._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},L=o._availableAnimAttrs={blur:ft,"clip-rect":"csv",cx:ft,cy:ft,fill:"colour","fill-opacity":ft,"font-size":ft,height:ft,opacity:ft,path:"path",r:ft,rx:ft,ry:ft,stroke:"colour","stroke-opacity":ft,"stroke-width":ft,transform:"transform",width:ft,x:ft,y:ft},G=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,q={hs:1,rg:1},it=/,?([achlmqrstvxz]),?/gi,gt=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,yt=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,vt=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,Ct=(o._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),Nt=function(t,i){return S(t)-S(i)},Et=function(t){return t},lt=o._rectPath=function(t,i,s,n,l){return l?[["M",t+l,i],["l",s-2*l,0],["a",l,l,0,0,1,l,l],["l",0,n-2*l],["a",l,l,0,0,1,-l,l],["l",2*l-s,0],["a",l,l,0,0,1,-l,-l],["l",0,2*l-n],["a",l,l,0,0,1,l,-l],["z"]]:[["M",t,i],["l",s,0],["l",0,n],["l",-s,0],["z"]]},It=function(t,i,s,n){return n==null&&(n=s),[["M",t,i],["m",0,-n],["a",s,n,0,1,1,0,2*n],["a",s,n,0,1,1,0,-2*n],["z"]]},Tt=o._getPath={path:function(t){return t.attr("path")},circle:function(t){var i=t.attrs;return It(i.cx,i.cy,i.r)},ellipse:function(t){var i=t.attrs;return It(i.cx,i.cy,i.rx,i.ry)},rect:function(t){var i=t.attrs;return lt(i.x,i.y,i.width,i.height,i.r)},image:function(t){var i=t.attrs;return lt(i.x,i.y,i.width,i.height)},text:function(t){var i=t._getBBox();return lt(i.x,i.y,i.width,i.height)},set:function(t){var i=t._getBBox();return lt(i.x,i.y,i.width,i.height)}},Mt=o.mapPath=function(t,i){if(!i)return t;var s,n,l,p,m,v,x;for(l=0,m=(t=Ne(t)).length;l<m;l++)for(p=1,v=(x=t[l]).length;p<v;p+=2)s=i.x(x[p],x[p+1]),n=i.y(x[p],x[p+1]),x[p]=s,x[p+1]=n;return t};if(o._g=j,o.type=j.win.SVGAngle||j.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",o.type=="VML"){var Bt,$t=j.doc.createElement("div");if($t.innerHTML='<v:shape adj="1"/>',(Bt=$t.firstChild).style.behavior="url(#default#VML)",!Bt||typeof Bt.adj!="object")return o.type=st;$t=null}function zt(t){if(typeof t=="function"||Object(t)!==t)return t;var i=new t.constructor;for(var s in t)t[K](s)&&(i[s]=zt(t[s]));return i}o.svg=!(o.vml=o.type=="VML"),o._Paper=bt,o.fn=C=bt.prototype=o.prototype,o._id=0,o.is=function(t,i){return(i=ht.call(i))=="finite"?!d[K](+t):i=="array"?t instanceof Array:i=="null"&&t===null||i==typeof t&&t!==null||i=="object"&&t===Object(t)||i=="array"&&Array.isArray&&Array.isArray(t)||jt.call(t).slice(8,-1).toLowerCase()==i},o.angle=function(t,i,s,n,l,p){if(l==null){var m=t-s,v=i-n;return m||v?(180+180*Z.atan2(-v,-m)/Dt+360)%360:0}return o.angle(t,i,l,p)-o.angle(s,n,l,p)},o.rad=function(t){return t%360*Dt/180},o.deg=function(t){return Math.round(180*t/Dt%360*1e3)/1e3},o.snapTo=function(t,i,s){if(s=o.is(s,"finite")?s:10,o.is(t,mt)){for(var n=t.length;n--;)if(kt(t[n]-i)<=s)return t[n]}else{var l=i%(t=+t);if(l<s)return i-l;if(l>t-s)return i-l+t}return i};var Ut,Ee;o.createUUID=(Ut=/[xy]/g,Ee=function(t){var i=16*Z.random()|0;return(t=="x"?i:3&i|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(Ut,Ee).toUpperCase()}),o.setWindow=function(t){h("raphael.setWindow",o,j.win,t),j.win=t,j.doc=j.win.document,o._engine.initWin&&o._engine.initWin(j.win)};var Zt=function(t){if(o.vml){var i,s=/^\s+|\s+$/g;try{var n=new ActiveXObject("htmlfile");n.write("<body>"),n.close(),i=n.body}catch{i=createPopup().document.body}var l=i.createTextRange();Zt=At(function(m){try{i.style.color=Y(m).replace(s,st);var v=l.queryCommandValue("ForeColor");return"#"+("000000"+(v=(255&v)<<16|65280&v|(16711680&v)>>>16).toString(16)).slice(-6)}catch{return"none"}})}else{var p=j.doc.createElement("i");p.title="Raphaël Colour Picker",p.style.display="none",j.doc.body.appendChild(p),Zt=At(function(m){return p.style.color=m,j.doc.defaultView.getComputedStyle(p,st).getPropertyValue("color")})}return Zt(t)},le=function(){return"hsb("+[this.h,this.s,this.b]+")"},ce=function(){return"hsl("+[this.h,this.s,this.l]+")"},ke=function(){return this.hex},de=function(t,i,s){if(i==null&&o.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(s=t.b,i=t.g,t=t.r),i==null&&o.is(t,"string")){var n=o.getRGB(t);t=n.r,i=n.g,s=n.b}return(t>1||i>1||s>1)&&(t/=255,i/=255,s/=255),[t,i,s]},Me=function(t,i,s,n){var l={r:t*=255,g:i*=255,b:s*=255,hex:o.rgb(t,i,s),toString:ke};return o.is(n,"finite")&&(l.opacity=n),l};function At(t,i,s){return function n(){var l=Array.prototype.slice.call(arguments,0),p=l.join("␀"),m=n.cache=n.cache||{},v=n.count=n.count||[];return m[K](p)?(function(x,E){for(var T=0,H=x.length;T<H;T++)if(x[T]===E)return x.push(x.splice(T,1)[0])}(v,p),s?s(m[p]):m[p]):(v.length>=1e3&&delete m[v.shift()],v.push(p),m[p]=t[U](i,l),s?s(m[p]):m[p])}}o.color=function(t){var i;return o.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(i=o.hsb2rgb(t),t.r=i.r,t.g=i.g,t.b=i.b,t.hex=i.hex):o.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(i=o.hsl2rgb(t),t.r=i.r,t.g=i.g,t.b=i.b,t.hex=i.hex):(o.is(t,"string")&&(t=o.getRGB(t)),o.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(i=o.rgb2hsl(t),t.h=i.h,t.s=i.s,t.l=i.l,i=o.rgb2hsb(t),t.v=i.b):(t={hex:"none"}).r=t.g=t.b=t.h=t.s=t.v=t.l=-1),t.toString=ke,t},o.hsb2rgb=function(t,i,s,n){var l,p,m,v,x;return this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(s=t.b,i=t.s,n=t.o,t=t.h),v=(x=s*i)*(1-kt((t=(t*=360)%360/60)%2-1)),l=p=m=s-x,Me(l+=[x,v,0,0,v,x][t=~~t],p+=[v,x,x,v,0,0][t],m+=[0,0,v,x,x,v][t],n)},o.hsl2rgb=function(t,i,s,n){var l,p,m,v,x;return this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(s=t.l,i=t.s,t=t.h),(t>1||i>1||s>1)&&(t/=360,i/=100,s/=100),v=(x=2*i*(s<.5?s:1-s))*(1-kt((t=(t*=360)%360/60)%2-1)),l=p=m=s-x/2,Me(l+=[x,v,0,0,v,x][t=~~t],p+=[v,x,x,v,0,0][t],m+=[0,0,v,x,x,v][t],n)},o.rgb2hsb=function(t,i,s){var n,l;return t=(s=de(t,i,s))[0],i=s[1],s=s[2],{h:(((l=(n=nt(t,i,s))-rt(t,i,s))==0?null:n==t?(i-s)/l:n==i?(s-t)/l+2:(t-i)/l+4)+360)%6*60/360,s:l==0?0:l/n,b:n,toString:le}},o.rgb2hsl=function(t,i,s){var n,l,p,m;return t=(s=de(t,i,s))[0],i=s[1],s=s[2],n=((l=nt(t,i,s))+(p=rt(t,i,s)))/2,{h:(((m=l-p)==0?null:l==t?(i-s)/m:l==i?(s-t)/m+2:(t-i)/m+4)+360)%6*60/360,s:m==0?0:n<.5?m/(2*n):m/(2-2*n),l:n,toString:ce}},o._path2string=function(){return this.join(",").replace(it,"$1")},o._preload=function(t,i){var s=j.doc.createElement("img");s.style.cssText="position:absolute;left:-9999em;top:-9999em",s.onload=function(){i.call(this),this.onload=null,j.doc.body.removeChild(this)},s.onerror=function(){j.doc.body.removeChild(this)},j.doc.body.appendChild(s),s.src=t};function Qt(){return this.hex}function ue(t,i){for(var s=[],n=0,l=t.length;l-2*!i>n;n+=2){var p=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];i?n?l-4==n?p[3]={x:+t[0],y:+t[1]}:l-2==n&&(p[2]={x:+t[0],y:+t[1]},p[3]={x:+t[2],y:+t[3]}):p[0]={x:+t[l-2],y:+t[l-1]}:l-4==n?p[3]=p[2]:n||(p[0]={x:+t[n],y:+t[n+1]}),s.push(["C",(-p[0].x+6*p[1].x+p[2].x)/6,(-p[0].y+6*p[1].y+p[2].y)/6,(p[1].x+6*p[2].x-p[3].x)/6,(p[1].y+6*p[2].y-p[3].y)/6,p[2].x,p[2].y])}return s}o.getRGB=At(function(t){if(!t||(t=Y(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Qt};if(t=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:Qt};!q[K](t.toLowerCase().substring(0,2))&&t.charAt()!="#"&&(t=Zt(t));var i,s,n,l,p,m,v=t.match(f);return v?(v[2]&&(n=_(v[2].substring(5),16),s=_(v[2].substring(3,5),16),i=_(v[2].substring(1,3),16)),v[3]&&(n=_((p=v[3].charAt(3))+p,16),s=_((p=v[3].charAt(2))+p,16),i=_((p=v[3].charAt(1))+p,16)),v[4]&&(m=v[4][et](G),i=S(m[0]),m[0].slice(-1)=="%"&&(i*=2.55),s=S(m[1]),m[1].slice(-1)=="%"&&(s*=2.55),n=S(m[2]),m[2].slice(-1)=="%"&&(n*=2.55),v[1].toLowerCase().slice(0,4)=="rgba"&&(l=S(m[3])),m[3]&&m[3].slice(-1)=="%"&&(l/=100)),v[5]?(m=v[5][et](G),i=S(m[0]),m[0].slice(-1)=="%"&&(i*=2.55),s=S(m[1]),m[1].slice(-1)=="%"&&(s*=2.55),n=S(m[2]),m[2].slice(-1)=="%"&&(n*=2.55),(m[0].slice(-3)=="deg"||m[0].slice(-1)=="°")&&(i/=360),v[1].toLowerCase().slice(0,4)=="hsba"&&(l=S(m[3])),m[3]&&m[3].slice(-1)=="%"&&(l/=100),o.hsb2rgb(i,s,n,l)):v[6]?(m=v[6][et](G),i=S(m[0]),m[0].slice(-1)=="%"&&(i*=2.55),s=S(m[1]),m[1].slice(-1)=="%"&&(s*=2.55),n=S(m[2]),m[2].slice(-1)=="%"&&(n*=2.55),(m[0].slice(-3)=="deg"||m[0].slice(-1)=="°")&&(i/=360),v[1].toLowerCase().slice(0,4)=="hsla"&&(l=S(m[3])),m[3]&&m[3].slice(-1)=="%"&&(l/=100),o.hsl2rgb(i,s,n,l)):((v={r:i,g:s,b:n,toString:Qt}).hex="#"+(16777216|n|s<<8|i<<16).toString(16).slice(1),o.is(l,"finite")&&(v.opacity=l),v)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Qt}},o),o.hsb=At(function(t,i,s){return o.hsb2rgb(t,i,s).hex}),o.hsl=At(function(t,i,s){return o.hsl2rgb(t,i,s).hex}),o.rgb=At(function(t,i,s){function n(l){return l+.5|0}return"#"+(16777216|n(s)|n(i)<<8|n(t)<<16).toString(16).slice(1)}),o.getColor=function(t){var i=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},s=this.hsb2rgb(i.h,i.s,i.b);return i.h+=.075,i.h>1&&(i.h=0,i.s-=.2,i.s<=0&&(this.getColor.start={h:0,s:1,b:i.b})),s.hex},o.getColor.reset=function(){delete this.start},o.parsePathString=function(t){if(!t)return null;var i=Gt(t);if(i.arr)return Ft(i.arr);var s={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[];return o.is(t,mt)&&o.is(t[0],mt)&&(n=Ft(t)),n.length||Y(t).replace(gt,function(l,p,m){var v=[],x=p.toLowerCase();if(m.replace(vt,function(E,T){T&&v.push(+T)}),x=="m"&&v.length>2&&(n.push([p][M](v.splice(0,2))),x="l",p=p=="m"?"l":"L"),x=="r")n.push([p][M](v));else for(;v.length>=s[x]&&(n.push([p][M](v.splice(0,s[x]))),s[x]););}),n.toString=o._path2string,i.arr=Ft(n),n},o.parseTransformString=At(function(t){if(!t)return null;var i=[];return o.is(t,mt)&&o.is(t[0],mt)&&(i=Ft(t)),i.length||Y(t).replace(yt,function(s,n,l){var p=[];ht.call(n),l.replace(vt,function(m,v){v&&p.push(+v)}),i.push([n][M](p))}),i.toString=o._path2string,i},this,function(t){if(!t)return t;for(var i=[],s=0;s<t.length;s++){for(var n=[],l=0;l<t[s].length;l++)n.push(t[s][l]);i.push(n)}return i});var Gt=function(t){var i=Gt.ps=Gt.ps||{};return i[t]?i[t].sleep=100:i[t]={sleep:100},setTimeout(function(){for(var s in i)i[K](s)&&s!=t&&(i[s].sleep--,!i[s].sleep&&delete i[s])}),i[t]};function pe(t,i,s,n,l){return t*(t*(-3*i+9*s-9*n+3*l)+6*i-12*s+6*n)-3*i+3*s}function Vt(t,i,s,n,l,p,m,v,x){x==null&&(x=1);for(var E=(x=x>1?1:x<0?0:x)/2,T=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],H=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],R=0,D=0;D<12;D++){var A=E*T[D]+E,F=pe(A,t,s,l,m),P=pe(A,i,n,p,v),I=F*F+P*P;R+=H[D]*Z.sqrt(I)}return E*R}function _e(t,i,s,n,l,p,m,v){if(!(nt(t,s)<rt(l,m)||rt(t,s)>nt(l,m)||nt(i,n)<rt(p,v)||rt(i,n)>nt(p,v))){var x=(t-s)*(p-v)-(i-n)*(l-m);if(x){var E=((t*n-i*s)*(l-m)-(t-s)*(l*v-p*m))/x,T=((t*n-i*s)*(p-v)-(i-n)*(l*v-p*m))/x,H=+E.toFixed(2),R=+T.toFixed(2);if(!(H<+rt(t,s).toFixed(2)||H>+nt(t,s).toFixed(2)||H<+rt(l,m).toFixed(2)||H>+nt(l,m).toFixed(2)||R<+rt(i,n).toFixed(2)||R>+nt(i,n).toFixed(2)||R<+rt(p,v).toFixed(2)||R>+nt(p,v).toFixed(2)))return{x:E,y:T}}}}function fe(t,i,s){var n=o.bezierBBox(t),l=o.bezierBBox(i);if(!o.isBBoxIntersect(n,l))return s?0:[];for(var p=Vt.apply(0,t),m=Vt.apply(0,i),v=nt(~~(p/5),1),x=nt(~~(m/5),1),E=[],T=[],H={},R=s?0:[],D=0;D<v+1;D++){var A=o.findDotsAtSegment.apply(o,t.concat(D/v));E.push({x:A.x,y:A.y,t:D/v})}for(D=0;D<x+1;D++)A=o.findDotsAtSegment.apply(o,i.concat(D/x)),T.push({x:A.x,y:A.y,t:D/x});for(D=0;D<v;D++)for(var F=0;F<x;F++){var P=E[D],I=E[D+1],Q=T[F],O=T[F+1],W=kt(I.x-P.x)<.001?"y":"x",$=kt(O.x-Q.x)<.001?"y":"x",ut=_e(P.x,P.y,I.x,I.y,Q.x,Q.y,O.x,O.y);if(ut){if(H[ut.x.toFixed(4)]==ut.y.toFixed(4))continue;H[ut.x.toFixed(4)]=ut.y.toFixed(4);var at=P.t+kt((ut[W]-P[W])/(I[W]-P[W]))*(I.t-P.t),pt=Q.t+kt((ut[$]-Q[$])/(O[$]-Q[$]))*(O.t-Q.t);at>=0&&at<=1.001&&pt>=0&&pt<=1.001&&(s?R++:R.push({x:ut.x,y:ut.y,t1:rt(at,1),t2:rt(pt,1)}))}}return R}function Ce(t,i,s){t=o._path2curve(t),i=o._path2curve(i);for(var n,l,p,m,v,x,E,T,H,R,D=s?0:[],A=0,F=t.length;A<F;A++){var P=t[A];if(P[0]=="M")n=v=P[1],l=x=P[2];else{P[0]=="C"?(H=[n,l].concat(P.slice(1)),n=H[6],l=H[7]):(H=[n,l,n,l,v,x,v,x],n=v,l=x);for(var I=0,Q=i.length;I<Q;I++){var O=i[I];if(O[0]=="M")p=E=O[1],m=T=O[2];else{O[0]=="C"?(R=[p,m].concat(O.slice(1)),p=R[6],m=R[7]):(R=[p,m,p,m,E,T,E,T],p=E,m=T);var W=fe(H,R,s);if(s)D+=W;else{for(var $=0,ut=W.length;$<ut;$++)W[$].segment1=A,W[$].segment2=I,W[$].bez1=H,W[$].bez2=R;D=D.concat(W)}}}}}return D}o.findDotsAtSegment=function(t,i,s,n,l,p,m,v,x){var E=1-x,T=Lt(E,3),H=Lt(E,2),R=x*x,D=R*x,A=T*t+3*H*x*s+3*E*x*x*l+D*m,F=T*i+3*H*x*n+3*E*x*x*p+D*v,P=t+2*x*(s-t)+R*(l-2*s+t),I=i+2*x*(n-i)+R*(p-2*n+i),Q=s+2*x*(l-s)+R*(m-2*l+s),O=n+2*x*(p-n)+R*(v-2*p+n),W=E*t+x*s,$=E*i+x*n,ut=E*l+x*m,at=E*p+x*v,pt=90-180*Z.atan2(P-Q,I-O)/Dt;return(P>Q||I<O)&&(pt+=180),{x:A,y:F,m:{x:P,y:I},n:{x:Q,y:O},start:{x:W,y:$},end:{x:ut,y:at},alpha:pt}},o.bezierBBox=function(t,i,s,n,l,p,m,v){o.is(t,"array")||(t=[t,i,s,n,l,p,m,v]);var x=Ae.apply(null,t);return{x:x.min.x,y:x.min.y,x2:x.max.x,y2:x.max.y,width:x.max.x-x.min.x,height:x.max.y-x.min.y}},o.isPointInsideBBox=function(t,i,s){return i>=t.x&&i<=t.x2&&s>=t.y&&s<=t.y2},o.isBBoxIntersect=function(t,i){var s=o.isPointInsideBBox;return s(i,t.x,t.y)||s(i,t.x2,t.y)||s(i,t.x,t.y2)||s(i,t.x2,t.y2)||s(t,i.x,i.y)||s(t,i.x2,i.y)||s(t,i.x,i.y2)||s(t,i.x2,i.y2)||(t.x<i.x2&&t.x>i.x||i.x<t.x2&&i.x>t.x)&&(t.y<i.y2&&t.y>i.y||i.y<t.y2&&i.y>t.y)},o.pathIntersection=function(t,i){return Ce(t,i)},o.pathIntersectionNumber=function(t,i){return Ce(t,i,1)},o.isPointInsidePath=function(t,i,s){var n=o.pathBBox(t);return o.isPointInsideBBox(n,i,s)&&Ce(t,[["M",i,s],["H",n.x2+10]],1)%2==1},o._removedFactory=function(t){return function(){h("raphael.log",null,"Raphaël: you are calling to method “"+t+"” of removed object",t)}};var Jt=o.pathBBox=function(t){var i=Gt(t);if(i.bbox)return zt(i.bbox);if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var s,n=0,l=0,p=[],m=[],v=0,x=(t=Ne(t)).length;v<x;v++)if((s=t[v])[0]=="M")n=s[1],l=s[2],p.push(n),m.push(l);else{var E=Ae(n,l,s[1],s[2],s[3],s[4],s[5],s[6]);p=p[M](E.min.x,E.max.x),m=m[M](E.min.y,E.max.y),n=s[5],l=s[6]}var T=rt[U](0,p),H=rt[U](0,m),R=nt[U](0,p),D=nt[U](0,m),A=R-T,F=D-H,P={x:T,y:H,x2:R,y2:D,width:A,height:F,cx:T+A/2,cy:H+F/2};return i.bbox=zt(P),P},Ft=function(t){var i=zt(t);return i.toString=o._path2string,i},oi=o._pathToRelative=function(t){var i=Gt(t);if(i.rel)return Ft(i.rel);o.is(t,mt)&&o.is(t&&t[0],mt)||(t=o.parsePathString(t));var s=[],n=0,l=0,p=0,m=0,v=0;t[0][0]=="M"&&(p=n=t[0][1],m=l=t[0][2],v++,s.push(["M",n,l]));for(var x=v,E=t.length;x<E;x++){var T=s[x]=[],H=t[x];if(H[0]!=ht.call(H[0]))switch(T[0]=ht.call(H[0]),T[0]){case"a":T[1]=H[1],T[2]=H[2],T[3]=H[3],T[4]=H[4],T[5]=H[5],T[6]=+(H[6]-n).toFixed(3),T[7]=+(H[7]-l).toFixed(3);break;case"v":T[1]=+(H[1]-l).toFixed(3);break;case"m":p=H[1],m=H[2];default:for(var R=1,D=H.length;R<D;R++)T[R]=+(H[R]-(R%2?n:l)).toFixed(3)}else{T=s[x]=[],H[0]=="m"&&(p=H[1]+n,m=H[2]+l);for(var A=0,F=H.length;A<F;A++)s[x][A]=H[A]}var P=s[x].length;switch(s[x][0]){case"z":n=p,l=m;break;case"h":n+=+s[x][P-1];break;case"v":l+=+s[x][P-1];break;default:n+=+s[x][P-2],l+=+s[x][P-1]}}return s.toString=o._path2string,i.rel=Ft(s),s},ge=o._pathToAbsolute=function(t){var i=Gt(t);if(i.abs)return Ft(i.abs);if(o.is(t,mt)&&o.is(t&&t[0],mt)||(t=o.parsePathString(t)),!t||!t.length)return[["M",0,0]];var s=[],n=0,l=0,p=0,m=0,v=0;t[0][0]=="M"&&(p=n=+t[0][1],m=l=+t[0][2],v++,s[0]=["M",n,l]);for(var x,E,T=t.length==3&&t[0][0]=="M"&&t[1][0].toUpperCase()=="R"&&t[2][0].toUpperCase()=="Z",H=v,R=t.length;H<R;H++){if(s.push(x=[]),(E=t[H])[0]!=N.call(E[0]))switch(x[0]=N.call(E[0]),x[0]){case"A":x[1]=E[1],x[2]=E[2],x[3]=E[3],x[4]=E[4],x[5]=E[5],x[6]=+(E[6]+n),x[7]=+(E[7]+l);break;case"V":x[1]=+E[1]+l;break;case"H":x[1]=+E[1]+n;break;case"R":for(var D=[n,l][M](E.slice(1)),A=2,F=D.length;A<F;A++)D[A]=+D[A]+n,D[++A]=+D[A]+l;s.pop(),s=s[M](ue(D,T));break;case"M":p=+E[1]+n,m=+E[2]+l;default:for(A=1,F=E.length;A<F;A++)x[A]=+E[A]+(A%2?n:l)}else if(E[0]=="R")D=[n,l][M](E.slice(1)),s.pop(),s=s[M](ue(D,T)),x=["R"][M](E.slice(-2));else for(var P=0,I=E.length;P<I;P++)x[P]=E[P];switch(x[0]){case"Z":n=p,l=m;break;case"H":n=x[1];break;case"V":l=x[1];break;case"M":p=x[x.length-2],m=x[x.length-1];default:n=x[x.length-2],l=x[x.length-1]}}return s.toString=o._path2string,i.abs=Ft(s),s},ve=function(t,i,s,n){return[t,i,s,n,s,n]},te=function(t,i,s,n,l,p){return[1/3*t+2/3*s,1/3*i+2/3*n,1/3*l+2/3*s,1/3*p+2/3*n,l,p]},Re=function(t,i,s,n,l,p,m,v,x,E){var T,H=120*Dt/180,R=Dt/180*(+l||0),D=[],A=At(function(ki,_i,Fe){return{x:ki*Z.cos(Fe)-_i*Z.sin(Fe),y:ki*Z.sin(Fe)+_i*Z.cos(Fe)}});if(E)at=E[0],pt=E[1],$=E[2],ut=E[3];else{t=(T=A(t,i,-R)).x,i=T.y,v=(T=A(v,x,-R)).x,x=T.y;var F=(t-v)/2,P=(i-x)/2,I=F*F/(s*s)+P*P/(n*n);I>1&&(s*=I=Z.sqrt(I),n*=I);var Q=s*s,O=n*n,W=(p==m?-1:1)*Z.sqrt(kt((Q*O-Q*P*P-O*F*F)/(Q*P*P+O*F*F))),$=W*s*P/n+(t+v)/2,ut=W*-n*F/s+(i+x)/2,at=Z.asin(((i-ut)/n).toFixed(9)),pt=Z.asin(((x-ut)/n).toFixed(9));(at=t<$?Dt-at:at)<0&&(at=2*Dt+at),(pt=v<$?Dt-pt:pt)<0&&(pt=2*Dt+pt),m&&at>pt&&(at-=2*Dt),!m&&pt>at&&(pt-=2*Dt)}var ye=pt-at;if(kt(ye)>H){var De=pt,Ot=v,Wt=x;pt=at+H*(m&&pt>at?1:-1),v=$+s*Z.cos(pt),x=ut+n*Z.sin(pt),D=Re(v,x,s,n,l,0,m,Ot,Wt,[pt,De,$,ut])}ye=pt-at;var xe=Z.cos(at),be=Z.sin(at),ze=Z.cos(pt),Kt=Z.sin(pt),oe=Z.tan(ye/4),He=4/3*s*oe,xi=4/3*n*oe,bi=[t,i],we=[t+He*be,i-xi*xe],wi=[v+He*Kt,x-xi*ze],Si=[v,x];if(we[0]=2*bi[0]-we[0],we[1]=2*bi[1]-we[1],E)return[we,wi,Si][M](D);for(var Ei=[],ie=0,lr=(D=[we,wi,Si][M](D).join()[et](",")).length;ie<lr;ie++)Ei[ie]=ie%2?A(D[ie-1],D[ie],R).y:A(D[ie],D[ie+1],R).x;return Ei},re=function(t,i,s,n,l,p,m,v,x){var E=1-x;return{x:Lt(E,3)*t+3*Lt(E,2)*x*s+3*E*x*x*l+Lt(x,3)*m,y:Lt(E,3)*i+3*Lt(E,2)*x*n+3*E*x*x*p+Lt(x,3)*v}},Ae=At(function(t,i,s,n,l,p,m,v){var x,E=l-2*s+t-(m-2*l+s),T=2*(s-t)-2*(l-s),H=t-s,R=(-T+Z.sqrt(T*T-4*E*H))/2/E,D=(-T-Z.sqrt(T*T-4*E*H))/2/E,A=[i,v],F=[t,m];return kt(R)>"1e12"&&(R=.5),kt(D)>"1e12"&&(D=.5),R>0&&R<1&&(x=re(t,i,s,n,l,p,m,v,R),F.push(x.x),A.push(x.y)),D>0&&D<1&&(x=re(t,i,s,n,l,p,m,v,D),F.push(x.x),A.push(x.y)),E=p-2*n+i-(v-2*p+n),H=i-n,R=(-(T=2*(n-i)-2*(p-n))+Z.sqrt(T*T-4*E*H))/2/E,D=(-T-Z.sqrt(T*T-4*E*H))/2/E,kt(R)>"1e12"&&(R=.5),kt(D)>"1e12"&&(D=.5),R>0&&R<1&&(x=re(t,i,s,n,l,p,m,v,R),F.push(x.x),A.push(x.y)),D>0&&D<1&&(x=re(t,i,s,n,l,p,m,v,D),F.push(x.x),A.push(x.y)),{min:{x:rt[U](0,F),y:rt[U](0,A)},max:{x:nt[U](0,F),y:nt[U](0,A)}}}),Ne=o._path2curve=At(function(t,i){var s=!i&&Gt(t);if(!i&&s.curve)return Ft(s.curve);for(var n=ge(t),l=i&&ge(i),p={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},m={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},v=function(W,$,ut){var at,pt;if(!W)return["C",$.x,$.y,$.x,$.y,$.x,$.y];switch(!(W[0]in{T:1,Q:1})&&($.qx=$.qy=null),W[0]){case"M":$.X=W[1],$.Y=W[2];break;case"A":W=["C"][M](Re[U](0,[$.x,$.y][M](W.slice(1))));break;case"S":ut=="C"||ut=="S"?(at=2*$.x-$.bx,pt=2*$.y-$.by):(at=$.x,pt=$.y),W=["C",at,pt][M](W.slice(1));break;case"T":ut=="Q"||ut=="T"?($.qx=2*$.x-$.qx,$.qy=2*$.y-$.qy):($.qx=$.x,$.qy=$.y),W=["C"][M](te($.x,$.y,$.qx,$.qy,W[1],W[2]));break;case"Q":$.qx=W[1],$.qy=W[2],W=["C"][M](te($.x,$.y,W[1],W[2],W[3],W[4]));break;case"L":W=["C"][M](ve($.x,$.y,W[1],W[2]));break;case"H":W=["C"][M](ve($.x,$.y,W[1],$.y));break;case"V":W=["C"][M](ve($.x,$.y,$.x,W[1]));break;case"Z":W=["C"][M](ve($.x,$.y,$.X,$.Y))}return W},x=function(W,$){if(W[$].length>7){W[$].shift();for(var ut=W[$];ut.length;)T[$]="A",l&&(H[$]="A"),W.splice($++,0,["C"][M](ut.splice(0,6)));W.splice($,1),F=nt(n.length,l&&l.length||0)}},E=function(W,$,ut,at,pt){W&&$&&W[pt][0]=="M"&&$[pt][0]!="M"&&($.splice(pt,0,["M",at.x,at.y]),ut.bx=0,ut.by=0,ut.x=W[pt][1],ut.y=W[pt][2],F=nt(n.length,l&&l.length||0))},T=[],H=[],R="",D="",A=0,F=nt(n.length,l&&l.length||0);A<F;A++){n[A]&&(R=n[A][0]),R!="C"&&(T[A]=R,A&&(D=T[A-1])),n[A]=v(n[A],p,D),T[A]!="A"&&R=="C"&&(T[A]="C"),x(n,A),l&&(l[A]&&(R=l[A][0]),R!="C"&&(H[A]=R,A&&(D=H[A-1])),l[A]=v(l[A],m,D),H[A]!="A"&&R=="C"&&(H[A]="C"),x(l,A)),E(n,l,p,m,A),E(l,n,m,p,A);var P=n[A],I=l&&l[A],Q=P.length,O=l&&I.length;p.x=P[Q-2],p.y=P[Q-1],p.bx=S(P[Q-4])||p.x,p.by=S(P[Q-3])||p.y,m.bx=l&&(S(I[O-4])||m.x),m.by=l&&(S(I[O-3])||m.y),m.x=l&&I[O-2],m.y=l&&I[O-1]}return l||(s.curve=Ft(n)),l?[n,l]:n},null,Ft),Pe=(o._parseDots=At(function(t){for(var i=[],s=0,n=t.length;s<n;s++){var l={},p=t[s].match(/^([^:]*):?([\d\.]*)/);if(l.color=o.getRGB(p[1]),l.color.error)return null;l.opacity=l.color.opacity,l.color=l.color.hex,p[2]&&(l.offset=p[2]+"%"),i.push(l)}for(s=1,n=i.length-1;s<n;s++)if(!i[s].offset){for(var m=S(i[s-1].offset||0),v=0,x=s+1;x<n;x++)if(i[x].offset){v=i[x].offset;break}v||(v=100,x=n);for(var E=((v=S(v))-m)/(x-s+1);s<x;s++)m+=E,i[s].offset=m+"%"}return i}),o._tear=function(t,i){t==i.top&&(i.top=t.prev),t==i.bottom&&(i.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),er=(o._tofront=function(t,i){i.top!==t&&(Pe(t,i),t.next=null,t.prev=i.top,i.top.next=t,i.top=t)},o._toback=function(t,i){i.bottom!==t&&(Pe(t,i),t.next=i.bottom,t.prev=null,i.bottom.prev=t,i.bottom=t)},o._insertafter=function(t,i,s){Pe(t,s),i==s.top&&(s.top=t),i.next&&(i.next.prev=t),t.next=i.next,t.prev=i,i.next=t},o._insertbefore=function(t,i,s){Pe(t,s),i==s.bottom&&(s.bottom=t),i.prev&&(i.prev.next=t),t.prev=i.prev,i.prev=t,t.next=i},o.toMatrix=function(t,i){var s=Jt(t),n={_:{transform:st},getBBox:function(){return s}};return ai(n,i),n.matrix}),ai=(o.transformPath=function(t,i){return Mt(t,er(t,i))},o._extractTransform=function(t,i){if(i==null)return t._.transform;i=Y(i).replace(/\.{3}|\u2026/g,t._.transform||st);var s,n,l=o.parseTransformString(i),p=0,m=1,v=1,x=t._,E=new se;if(x.transform=l||[],l)for(var T=0,H=l.length;T<H;T++){var R,D,A,F,P,I=l[T],Q=I.length,O=Y(I[0]).toLowerCase(),W=I[0]!=O,$=W?E.invert():0;O=="t"&&Q==3?W?(R=$.x(0,0),D=$.y(0,0),A=$.x(I[1],I[2]),F=$.y(I[1],I[2]),E.translate(A-R,F-D)):E.translate(I[1],I[2]):O=="r"?Q==2?(P=P||t.getBBox(1),E.rotate(I[1],P.x+P.width/2,P.y+P.height/2),p+=I[1]):Q==4&&(W?(A=$.x(I[2],I[3]),F=$.y(I[2],I[3]),E.rotate(I[1],A,F)):E.rotate(I[1],I[2],I[3]),p+=I[1]):O=="s"?Q==2||Q==3?(P=P||t.getBBox(1),E.scale(I[1],I[Q-1],P.x+P.width/2,P.y+P.height/2),m*=I[1],v*=I[Q-1]):Q==5&&(W?(A=$.x(I[3],I[4]),F=$.y(I[3],I[4]),E.scale(I[1],I[2],A,F)):E.scale(I[1],I[2],I[3],I[4]),m*=I[1],v*=I[2]):O=="m"&&Q==7&&E.add(I[1],I[2],I[3],I[4],I[5],I[6]),x.dirtyT=1,t.matrix=E}t.matrix=E,x.sx=m,x.sy=v,x.deg=p,x.dx=s=E.e,x.dy=n=E.f,m==1&&v==1&&!p&&x.bbox?(x.bbox.x+=+s,x.bbox.y+=+n):x.dirtyT=1}),hi=function(t){var i=t[0];switch(i.toLowerCase()){case"t":return[i,0,0];case"m":return[i,1,0,0,1,0,0];case"r":return t.length==4?[i,0,t[2],t[3]]:[i,0];case"s":return t.length==5?[i,1,1,t[3],t[4]]:t.length==3?[i,1,1]:[i,1]}},ir=o._equaliseTransform=function(t,i){i=Y(i).replace(/\.{3}|\u2026/g,t),t=o.parseTransformString(t)||[],i=o.parseTransformString(i)||[];for(var s,n,l,p,m=nt(t.length,i.length),v=[],x=[],E=0;E<m;E++){if(l=t[E]||hi(i[E]),p=i[E]||hi(l),l[0]!=p[0]||l[0].toLowerCase()=="r"&&(l[2]!=p[2]||l[3]!=p[3])||l[0].toLowerCase()=="s"&&(l[3]!=p[3]||l[4]!=p[4]))return;for(v[E]=[],x[E]=[],s=0,n=nt(l.length,p.length);s<n;s++)s in l&&(v[E][s]=l[s]),s in p&&(x[E][s]=p[s])}return{from:v,to:x}};function se(t,i,s,n,l,p){t!=null?(this.a=+t,this.b=+i,this.c=+s,this.d=+n,this.e=+l,this.f=+p):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}o._getContainer=function(t,i,s,n){var l;if((l=n!=null||o.is(t,"object")?t:j.doc.getElementById(t))!=null)return l.tagName?i==null?{container:l,width:l.style.pixelWidth||l.offsetWidth,height:l.style.pixelHeight||l.offsetHeight}:{container:l,width:i,height:s}:{container:1,x:t,y:i,width:s,height:n}},o.pathToRelative=oi,o._engine={},o.path2curve=Ne,o.matrix=function(t,i,s,n,l,p){return new se(t,i,s,n,l,p)},function(t){function i(n){return n[0]*n[0]+n[1]*n[1]}function s(n){var l=Z.sqrt(i(n));n[0]&&(n[0]/=l),n[1]&&(n[1]/=l)}t.add=function(n,l,p,m,v,x){var E,T,H,R,D=[[],[],[]],A=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],F=[[n,p,v],[l,m,x],[0,0,1]];for(n&&n instanceof se&&(F=[[n.a,n.c,n.e],[n.b,n.d,n.f],[0,0,1]]),E=0;E<3;E++)for(T=0;T<3;T++){for(R=0,H=0;H<3;H++)R+=A[E][H]*F[H][T];D[E][T]=R}this.a=D[0][0],this.b=D[1][0],this.c=D[0][1],this.d=D[1][1],this.e=D[0][2],this.f=D[1][2]},t.invert=function(){var n=this,l=n.a*n.d-n.b*n.c;return new se(n.d/l,-n.b/l,-n.c/l,n.a/l,(n.c*n.f-n.d*n.e)/l,(n.b*n.e-n.a*n.f)/l)},t.clone=function(){return new se(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(n,l){this.add(1,0,0,1,n,l)},t.scale=function(n,l,p,m){l==null&&(l=n),(p||m)&&this.add(1,0,0,1,p,m),this.add(n,0,0,l,0,0),(p||m)&&this.add(1,0,0,1,-p,-m)},t.rotate=function(n,l,p){n=o.rad(n),l=l||0,p=p||0;var m=+Z.cos(n).toFixed(9),v=+Z.sin(n).toFixed(9);this.add(m,v,-v,m,l,p),this.add(1,0,0,1,-l,-p)},t.x=function(n,l){return n*this.a+l*this.c+this.e},t.y=function(n,l){return n*this.b+l*this.d+this.f},t.get=function(n){return+this[Y.fromCharCode(97+n)].toFixed(4)},t.toString=function(){return o.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var n={};n.dx=this.e,n.dy=this.f;var l=[[this.a,this.c],[this.b,this.d]];n.scalex=Z.sqrt(i(l[0])),s(l[0]),n.shear=l[0][0]*l[1][0]+l[0][1]*l[1][1],l[1]=[l[1][0]-l[0][0]*n.shear,l[1][1]-l[0][1]*n.shear],n.scaley=Z.sqrt(i(l[1])),s(l[1]),n.shear/=n.scaley;var p=-l[0][1],m=l[1][1];return m<0?(n.rotate=o.deg(Z.acos(m)),p<0&&(n.rotate=360-n.rotate)):n.rotate=o.deg(Z.asin(p)),n.isSimple=!(+n.shear.toFixed(9)||n.scalex.toFixed(9)!=n.scaley.toFixed(9)&&n.rotate),n.isSuperSimple=!+n.shear.toFixed(9)&&n.scalex.toFixed(9)==n.scaley.toFixed(9)&&!n.rotate,n.noRotation=!+n.shear.toFixed(9)&&!n.rotate,n},t.toTransformString=function(n){var l=n||this[et]();return l.isSimple?(l.scalex=+l.scalex.toFixed(4),l.scaley=+l.scaley.toFixed(4),l.rotate=+l.rotate.toFixed(4),(l.dx||l.dy?"t"+[l.dx,l.dy]:st)+(l.scalex!=1||l.scaley!=1?"s"+[l.scalex,l.scaley,0,0]:st)+(l.rotate?"r"+[l.rotate,0,0]:st)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(se.prototype);for(var rr=function(){this.returnValue=!1},sr=function(){return this.originalEvent.preventDefault()},nr=function(){this.cancelBubble=!0},or=function(){return this.originalEvent.stopPropagation()},li=function(t){var i=j.doc.documentElement.scrollTop||j.doc.body.scrollTop,s=j.doc.documentElement.scrollLeft||j.doc.body.scrollLeft;return{x:t.clientX+s,y:t.clientY+i}},ar=j.doc.addEventListener?function(t,i,s,n){var l=function(m){var v=li(m);return s.call(n,m,v.x,v.y)};if(t.addEventListener(i,l,!1),ct&&St[i]){var p=function(m){for(var v=li(m),x=m,E=0,T=m.targetTouches&&m.targetTouches.length;E<T;E++)if(m.targetTouches[E].target==t){(m=m.targetTouches[E]).originalEvent=x,m.preventDefault=sr,m.stopPropagation=or;break}return s.call(n,m,v.x,v.y)};t.addEventListener(St[i],p,!1)}return function(){return t.removeEventListener(i,l,!1),ct&&St[i]&&t.removeEventListener(St[i],p,!1),!0}}:j.doc.attachEvent?function(t,i,s,n){var l=function(p){p=p||j.win.event;var m=j.doc.documentElement.scrollTop||j.doc.body.scrollTop,v=j.doc.documentElement.scrollLeft||j.doc.body.scrollLeft,x=p.clientX+v,E=p.clientY+m;return p.preventDefault=p.preventDefault||rr,p.stopPropagation=p.stopPropagation||nr,s.call(n,p,x,E)};return t.attachEvent("on"+i,l),function(){return t.detachEvent("on"+i,l),!0}}:void 0,ee=[],Ge=function(t){for(var i,s=t.clientX,n=t.clientY,l=j.doc.documentElement.scrollTop||j.doc.body.scrollTop,p=j.doc.documentElement.scrollLeft||j.doc.body.scrollLeft,m=ee.length;m--;){if(i=ee[m],ct&&t.touches){for(var v,x=t.touches.length;x--;)if((v=t.touches[x]).identifier==i.el._drag.id){s=v.clientX,n=v.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var E,T=i.el.node,H=T.nextSibling,R=T.parentNode,D=T.style.display;j.win.opera&&R.removeChild(T),T.style.display="none",E=i.el.paper.getElementByPoint(s,n),T.style.display=D,j.win.opera&&(H?R.insertBefore(T,H):R.appendChild(T)),E&&h("raphael.drag.over."+i.el.id,i.el,E),s+=p,n+=l,h("raphael.drag.move."+i.el.id,i.move_scope||i.el,s-i.el._drag.x,n-i.el._drag.y,s,n,t)}},Ve=function(t){o.unmousemove(Ge).unmouseup(Ve);for(var i,s=ee.length;s--;)(i=ee[s]).el._drag={},h("raphael.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,t);ee=[]},_t=o.el={},ci=ot.length;ci--;)(function(t){o[t]=_t[t]=function(i,s){return o.is(i,"function")&&(this.events=this.events||[],this.events.push({name:t,f:i,unbind:ar(this.shape||this.node||j.doc,t,i,s||this)})),this},o["un"+t]=_t["un"+t]=function(i){for(var s=this.events||[],n=s.length;n--;)s[n].name!=t||!o.is(i,"undefined")&&s[n].f!=i||(s[n].unbind(),s.splice(n,1),!s.length&&delete this.events);return this}})(ot[ci]);_t.data=function(t,i){var s=Ct[this.id]=Ct[this.id]||{};if(arguments.length==0)return s;if(arguments.length==1){if(o.is(t,"object")){for(var n in t)t[K](n)&&this.data(n,t[n]);return this}return h("raphael.data.get."+this.id,this,s[t],t),s[t]}return s[t]=i,h("raphael.data.set."+this.id,this,i,t),this},_t.removeData=function(t){return t==null?delete Ct[this.id]:Ct[this.id]&&delete Ct[this.id][t],this},_t.getData=function(){return zt(Ct[this.id]||{})},_t.hover=function(t,i,s,n){return this.mouseover(t,s).mouseout(i,n||s)},_t.unhover=function(t,i){return this.unmouseover(t).unmouseout(i)};var me=[];_t.drag=function(t,i,s,n,l,p){function m(v){(v.originalEvent||v).preventDefault();var x=v.clientX,E=v.clientY,T=j.doc.documentElement.scrollTop||j.doc.body.scrollTop,H=j.doc.documentElement.scrollLeft||j.doc.body.scrollLeft;if(this._drag.id=v.identifier,ct&&v.touches){for(var R,D=v.touches.length;D--;)if(R=v.touches[D],this._drag.id=R.identifier,R.identifier==this._drag.id){x=R.clientX,E=R.clientY;break}}this._drag.x=x+H,this._drag.y=E+T,!ee.length&&o.mousemove(Ge).mouseup(Ve),ee.push({el:this,move_scope:n,start_scope:l,end_scope:p}),i&&h.on("raphael.drag.start."+this.id,i),t&&h.on("raphael.drag.move."+this.id,t),s&&h.on("raphael.drag.end."+this.id,s),h("raphael.drag.start."+this.id,l||n||this,this._drag.x,this._drag.y,v)}return this._drag={},me.push({el:this,start:m}),this.mousedown(m),this},_t.onDragOver=function(t){t?h.on("raphael.drag.over."+this.id,t):h.unbind("raphael.drag.over."+this.id)},_t.undrag=function(){for(var t=me.length;t--;)me[t].el==this&&(this.unmousedown(me[t].start),me.splice(t,1),h.unbind("raphael.drag.*."+this.id));!me.length&&o.unmousemove(Ge).unmouseup(Ve),ee=[]},C.circle=function(t,i,s){var n=o._engine.circle(this,t||0,i||0,s||0);return this.__set__&&this.__set__.push(n),n},C.rect=function(t,i,s,n,l){var p=o._engine.rect(this,t||0,i||0,s||0,n||0,l||0);return this.__set__&&this.__set__.push(p),p},C.ellipse=function(t,i,s,n){var l=o._engine.ellipse(this,t||0,i||0,s||0,n||0);return this.__set__&&this.__set__.push(l),l},C.path=function(t){t&&!o.is(t,"string")&&!o.is(t[0],mt)&&(t+=st);var i=o._engine.path(o.format[U](o,arguments),this);return this.__set__&&this.__set__.push(i),i},C.image=function(t,i,s,n,l){var p=o._engine.image(this,t||"about:blank",i||0,s||0,n||0,l||0);return this.__set__&&this.__set__.push(p),p},C.text=function(t,i,s){var n=o._engine.text(this,t||0,i||0,Y(s));return this.__set__&&this.__set__.push(n),n},C.set=function(t){!o.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var i=new Le(t);return this.__set__&&this.__set__.push(i),i.paper=this,i.type="set",i},C.setStart=function(t){this.__set__=t||this.set()},C.setFinish=function(t){var i=this.__set__;return delete this.__set__,i},C.getSize=function(){var t=this.canvas.parentNode;return{width:t.offsetWidth,height:t.offsetHeight}},C.setSize=function(t,i){return o._engine.setSize.call(this,t,i)},C.setViewBox=function(t,i,s,n,l){return o._engine.setViewBox.call(this,t,i,s,n,l)},C.top=C.bottom=null,C.raphael=o;function di(){return this.x+dt+this.y+dt+this.width+" × "+this.height}C.getElementByPoint=function(t,i){var s,n,l,p,m,v,x,E=this.canvas,T=j.doc.elementFromPoint(t,i);if(j.win.opera&&T.tagName=="svg"){var H=(n=(s=E).getBoundingClientRect(),l=s.ownerDocument,p=l.body,m=l.documentElement,v=m.clientTop||p.clientTop||0,x=m.clientLeft||p.clientLeft||0,{y:n.top+(j.win.pageYOffset||m.scrollTop||p.scrollTop)-v,x:n.left+(j.win.pageXOffset||m.scrollLeft||p.scrollLeft)-x}),R=E.createSVGRect();R.x=t-H.x,R.y=i-H.y,R.width=R.height=1;var D=E.getIntersectionList(R,null);D.length&&(T=D[D.length-1])}if(!T)return null;for(;T.parentNode&&T!=E.parentNode&&!T.raphael;)T=T.parentNode;return T==this.canvas.parentNode&&(T=E),T=T&&T.raphael?this.getById(T.raphaelid):null},C.getElementsByBBox=function(t){var i=this.set();return this.forEach(function(s){o.isBBoxIntersect(s.getBBox(),t)&&i.push(s)}),i},C.getById=function(t){for(var i=this.bottom;i;){if(i.id==t)return i;i=i.next}return null},C.forEach=function(t,i){for(var s=this.bottom;s;){if(t.call(i,s)===!1)return this;s=s.next}return this},C.getElementsByPoint=function(t,i){var s=this.set();return this.forEach(function(n){n.isPointInside(t,i)&&s.push(n)}),s},_t.isPointInside=function(t,i){var s=this.realPath=Tt[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(s=o.transformPath(s,this.attr("transform"))),o.isPointInsidePath(s,t,i)},_t.getBBox=function(t){if(this.removed)return{};var i=this._;return t?(!i.dirty&&i.bboxwt||(this.realPath=Tt[this.type](this),i.bboxwt=Jt(this.realPath),i.bboxwt.toString=di,i.dirty=0),i.bboxwt):((i.dirty||i.dirtyT||!i.bbox)&&(!i.dirty&&this.realPath||(i.bboxwt=0,this.realPath=Tt[this.type](this)),i.bbox=Jt(Mt(this.realPath,this.matrix)),i.bbox.toString=di,i.dirty=i.dirtyT=0),i.bbox)},_t.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},_t.glow=function(t){if(this.type=="text")return null;var i={width:((t=t||{}).width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity==null?.5:t.opacity,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},s=i.width/2,n=this.paper,l=n.set(),p=this.realPath||Tt[this.type](this);p=this.matrix?Mt(p,this.matrix):p;for(var m=1;m<s+1;m++)l.push(n.path(p).attr({stroke:i.color,fill:i.fill?i.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(i.width/s*m).toFixed(3),opacity:+(i.opacity/s).toFixed(3)}));return l.insertBefore(this).translate(i.offsetx,i.offsety)};var We=function(t,i,s,n,l,p,m,v,x){return x==null?Vt(t,i,s,n,l,p,m,v):o.findDotsAtSegment(t,i,s,n,l,p,m,v,function(E,T,H,R,D,A,F,P,I){if(!(I<0||Vt(E,T,H,R,D,A,F,P)<I)){var Q,O=.5,W=1-O;for(Q=Vt(E,T,H,R,D,A,F,P,W);kt(Q-I)>.01;)Q=Vt(E,T,H,R,D,A,F,P,W+=(Q<I?1:-1)*(O/=2));return W}}(t,i,s,n,l,p,m,v,x))},je=function(t,i){return function(s,n,l){for(var p,m,v,x,E,T="",H={},R=0,D=0,A=(s=Ne(s)).length;D<A;D++){if((v=s[D])[0]=="M")p=+v[1],m=+v[2];else{if(R+(x=We(p,m,v[1],v[2],v[3],v[4],v[5],v[6]))>n){if(i&&!H.start){if(T+=["C"+(E=We(p,m,v[1],v[2],v[3],v[4],v[5],v[6],n-R)).start.x,E.start.y,E.m.x,E.m.y,E.x,E.y],l)return T;H.start=T,T=["M"+E.x,E.y+"C"+E.n.x,E.n.y,E.end.x,E.end.y,v[5],v[6]].join(),R+=x,p=+v[5],m=+v[6];continue}if(!t&&!i)return{x:(E=We(p,m,v[1],v[2],v[3],v[4],v[5],v[6],n-R)).x,y:E.y,alpha:E.alpha}}R+=x,p=+v[5],m=+v[6]}T+=v.shift()+v}return H.end=T,(E=t?R:i?H:o.findDotsAtSegment(p,m,v[0],v[1],v[2],v[3],v[4],v[5],1)).alpha&&(E={x:E.x,y:E.y,alpha:E.alpha}),E}},ui=je(1),pi=je(),qe=je(0,1);o.getTotalLength=ui,o.getPointAtLength=pi,o.getSubpath=function(t,i,s){if(this.getTotalLength(t)-s<1e-6)return qe(t,i).end;var n=qe(t,s,1);return i?qe(n,i).end:n},_t.getTotalLength=function(){var t=this.getPath();if(t)return this.node.getTotalLength?this.node.getTotalLength():ui(t)},_t.getPointAtLength=function(t){var i=this.getPath();if(i)return pi(i,t)},_t.getPath=function(){var t,i=o._getPath[this.type];if(this.type!="text"&&this.type!="set")return i&&(t=i(this)),t},_t.getSubpath=function(t,i){var s=this.getPath();if(s)return o.getSubpath(s,t,i)};var Yt=o.easing_formulas={linear:function(t){return t},"<":function(t){return Lt(t,1.7)},">":function(t){return Lt(t,.48)},"<>":function(t){var i=.48-t/1.04,s=Z.sqrt(.1734+i*i),n=s-i,l=-s-i,p=Lt(kt(n),1/3)*(n<0?-1:1)+Lt(kt(l),1/3)*(l<0?-1:1)+.5;return 3*(1-p)*p*p+p*p*p},backIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},backOut:function(t){var i=1.70158;return(t-=1)*t*((i+1)*t+i)+1},elastic:function(t){return t==!!t?t:Lt(2,-10*t)*Z.sin(2*Dt*(t-.075)/.3)+1},bounce:function(t){var i=7.5625,s=2.75;return t<1/s?i*t*t:t<2/s?i*(t-=1.5/s)*t+.75:t<2.5/s?i*(t-=2.25/s)*t+.9375:i*(t-=2.625/s)*t+.984375}};Yt.easeIn=Yt["ease-in"]=Yt["<"],Yt.easeOut=Yt["ease-out"]=Yt[">"],Yt.easeInOut=Yt["ease-in-out"]=Yt["<>"],Yt["back-in"]=Yt.backIn,Yt["back-out"]=Yt.backOut;var xt=[],fi=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},Ke=function(){for(var t=+new Date,i=0;i<xt.length;i++){var s=xt[i];if(!s.el.removed&&!s.paused){var n,l,p=t-s.start,m=s.ms,v=s.easing,x=s.from,E=s.diff,T=s.to,H=(s.t,s.el),R={},D={};if(s.initstatus?(p=(s.initstatus*s.anim.top-s.prev)/(s.percent-s.prev)*m,s.status=s.initstatus,delete s.initstatus,s.stop&&xt.splice(i--,1)):s.status=(s.prev+(s.percent-s.prev)*(p/m))/s.anim.top,!(p<0))if(p<m){var A=v(p/m);for(var F in x)if(x[K](F)){switch(L[F]){case ft:n=+x[F]+A*m*E[F];break;case"colour":n="rgb("+[Ue(y(x[F].r+A*m*E[F].r)),Ue(y(x[F].g+A*m*E[F].g)),Ue(y(x[F].b+A*m*E[F].b))].join(",")+")";break;case"path":n=[];for(var P=0,I=x[F].length;P<I;P++){n[P]=[x[F][P][0]];for(var Q=1,O=x[F][P].length;Q<O;Q++)n[P][Q]=+x[F][P][Q]+A*m*E[F][P][Q];n[P]=n[P].join(dt)}n=n.join(dt);break;case"transform":if(E[F].real)for(n=[],P=0,I=x[F].length;P<I;P++)for(n[P]=[x[F][P][0]],Q=1,O=x[F][P].length;Q<O;Q++)n[P][Q]=x[F][P][Q]+A*m*E[F][P][Q];else{var W=function(ut){return+x[F][ut]+A*m*E[F][ut]};n=[["m",W(0),W(1),W(2),W(3),W(4),W(5)]]}break;case"csv":if(F=="clip-rect")for(n=[],P=4;P--;)n[P]=+x[F][P]+A*m*E[F][P];break;default:var $=[][M](x[F]);for(n=[],P=H.paper.customAttributes[F].length;P--;)n[P]=+$[P]+A*m*E[F][P]}R[F]=n}H.attr(R),function(ut,at,pt){setTimeout(function(){h("raphael.anim.frame."+ut,at,pt)})}(H.id,H,s.anim)}else{if(function(ut,at,pt){setTimeout(function(){h("raphael.anim.frame."+at.id,at,pt),h("raphael.anim.finish."+at.id,at,pt),o.is(ut,"function")&&ut.call(at)})}(s.callback,H,s.anim),H.attr(T),xt.splice(i--,1),s.repeat>1&&!s.next){for(l in T)T[K](l)&&(D[l]=s.totalOrigin[l]);s.el.attr(D),Be(s.anim,s.el,s.anim.percents[0],null,s.totalOrigin,s.repeat-1)}s.next&&!s.stop&&Be(s.anim,s.el,s.next,null,s.totalOrigin,s.repeat)}}}xt.length&&fi(Ke)},Ue=function(t){return t>255?255:t<0?0:t};function hr(t,i,s,n,l,p){var m=3*i,v=3*(n-i)-m,x=1-m-v,E=3*s,T=3*(l-s)-E,H=1-E-T;function R(D){return((x*D+v)*D+m)*D}return function(D,A){var F=function(P,I){var Q,O,W,$,ut,at;for(W=P,at=0;at<8;at++){if($=R(W)-P,kt($)<I)return W;if(kt(ut=(3*x*W+2*v)*W+m)<1e-6)break;W-=$/ut}if(O=1,(W=P)<(Q=0))return Q;if(W>O)return O;for(;Q<O;){if($=R(W),kt($-P)<I)return W;P>$?Q=W:O=W,W=(O-Q)/2+Q}return W}(D,A);return((H*F+T)*F+E)*F}(t,1/(200*p))}function qt(t,i){var s=[],n={};if(this.ms=i,this.times=1,t){for(var l in t)t[K](l)&&(n[S(l)]=t[l],s.push(S(l)));s.sort(Nt)}this.anim=n,this.top=s[s.length-1],this.percents=s}function Be(t,i,s,n,l,p){s=S(s);var m,v,x,E,T,H,R=t.ms,D={},A={},F={};if(n)for(I=0,Q=xt.length;I<Q;I++){var P=xt[I];if(P.el.id==i.id&&P.anim==t){P.percent!=s?(xt.splice(I,1),x=1):v=P,i.attr(P.totalOrigin);break}}else n=+A;for(var I=0,Q=t.percents.length;I<Q;I++){if(t.percents[I]==s||t.percents[I]>n*t.top){s=t.percents[I],T=t.percents[I-1]||0,R=R/t.top*(s-T),E=t.percents[I+1],m=t.anim[s];break}n&&i.attr(t.anim[t.percents[I]])}if(m){if(v)v.initstatus=n,v.start=new Date-v.ms*n;else{for(var O in m)if(m[K](O)&&(L[K](O)||i.paper.customAttributes[K](O)))switch(D[O]=i.attr(O),D[O]==null&&(D[O]=z[O]),A[O]=m[O],L[O]){case ft:F[O]=(A[O]-D[O])/R;break;case"colour":D[O]=o.getRGB(D[O]);var W=o.getRGB(A[O]);F[O]={r:(W.r-D[O].r)/R,g:(W.g-D[O].g)/R,b:(W.b-D[O].b)/R};break;case"path":var $=Ne(D[O],A[O]),ut=$[1];for(D[O]=$[0],F[O]=[],I=0,Q=D[O].length;I<Q;I++){F[O][I]=[0];for(var at=1,pt=D[O][I].length;at<pt;at++)F[O][I][at]=(ut[I][at]-D[O][I][at])/R}break;case"transform":var ye=i._,De=ir(ye[O],A[O]);if(De)for(D[O]=De.from,A[O]=De.to,F[O]=[],F[O].real=!0,I=0,Q=D[O].length;I<Q;I++)for(F[O][I]=[D[O][I][0]],at=1,pt=D[O][I].length;at<pt;at++)F[O][I][at]=(A[O][I][at]-D[O][I][at])/R;else{var Ot=i.matrix||new se,Wt={_:{transform:ye.transform},getBBox:function(){return i.getBBox(1)}};D[O]=[Ot.a,Ot.b,Ot.c,Ot.d,Ot.e,Ot.f],ai(Wt,A[O]),A[O]=Wt._.transform,F[O]=[(Wt.matrix.a-Ot.a)/R,(Wt.matrix.b-Ot.b)/R,(Wt.matrix.c-Ot.c)/R,(Wt.matrix.d-Ot.d)/R,(Wt.matrix.e-Ot.e)/R,(Wt.matrix.f-Ot.f)/R]}break;case"csv":var xe=Y(m[O])[et](X),be=Y(D[O])[et](X);if(O=="clip-rect")for(D[O]=be,F[O]=[],I=be.length;I--;)F[O][I]=(xe[I]-D[O][I])/R;A[O]=xe;break;default:for(xe=[][M](m[O]),be=[][M](D[O]),F[O]=[],I=i.paper.customAttributes[O].length;I--;)F[O][I]=((xe[I]||0)-(be[I]||0))/R}var ze=m.easing,Kt=o.easing_formulas[ze];if(!Kt)if((Kt=Y(ze).match(c))&&Kt.length==5){var oe=Kt;Kt=function(He){return hr(He,+oe[1],+oe[2],+oe[3],+oe[4],R)}}else Kt=Et;if(P={anim:t,percent:s,timestamp:H=m.start||t.start||+new Date,start:H+(t.del||0),status:0,initstatus:n||0,stop:!1,ms:R,easing:Kt,from:D,diff:F,to:A,el:i,callback:m.callback,prev:T,next:E,repeat:p||t.times,origin:i.attr(),totalOrigin:l},xt.push(P),n&&!v&&!x&&(P.stop=!0,P.start=new Date-R*n,xt.length==1))return Ke();x&&(P.start=new Date-P.ms*n),xt.length==1&&fi(Ke)}h("raphael.anim.start."+i.id,i,t)}}function gi(t){for(var i=0;i<xt.length;i++)xt[i].el.paper==t&&xt.splice(i--,1)}_t.animateWith=function(t,i,s,n,l,p){if(this.removed)return p&&p.call(this),this;var m=s instanceof qt?s:o.animation(s,n,l,p);Be(m,this,m.percents[0],null,this.attr());for(var v=0,x=xt.length;v<x;v++)if(xt[v].anim==i&&xt[v].el==t){xt[x-1].start=xt[v].start;break}return this},_t.onAnimation=function(t){return t?h.on("raphael.anim.frame."+this.id,t):h.unbind("raphael.anim.frame."+this.id),this},qt.prototype.delay=function(t){var i=new qt(this.anim,this.ms);return i.times=this.times,i.del=+t||0,i},qt.prototype.repeat=function(t){var i=new qt(this.anim,this.ms);return i.del=this.del,i.times=Z.floor(nt(t,0))||1,i},o.animation=function(t,i,s,n){if(t instanceof qt)return t;!o.is(s,"function")&&s||(n=n||s||null,s=null),t=Object(t),i=+i||0;var l,p,m={};for(p in t)t[K](p)&&S(p)!=p&&S(p)+"%"!=p&&(l=!0,m[p]=t[p]);if(l)return s&&(m.easing=s),n&&(m.callback=n),new qt({100:m},i);if(n){var v=0;for(var x in t){var E=_(x);t[K](x)&&E>v&&(v=E)}!t[v+="%"].callback&&(t[v].callback=n)}return new qt(t,i)},_t.animate=function(t,i,s,n){if(this.removed)return n&&n.call(this),this;var l=t instanceof qt?t:o.animation(t,i,s,n);return Be(l,this,l.percents[0],null,this.attr()),this},_t.setTime=function(t,i){return t&&i!=null&&this.status(t,rt(i,t.ms)/t.ms),this},_t.status=function(t,i){var s,n,l=[],p=0;if(i!=null)return Be(t,this,-1,rt(i,1)),this;for(s=xt.length;p<s;p++)if((n=xt[p]).el.id==this.id&&(!t||n.anim==t)){if(t)return n.status;l.push({anim:n.anim,status:n.status})}return t?0:l},_t.pause=function(t){for(var i=0;i<xt.length;i++)xt[i].el.id!=this.id||t&&xt[i].anim!=t||h("raphael.anim.pause."+this.id,this,xt[i].anim)!==!1&&(xt[i].paused=!0);return this},_t.resume=function(t){for(var i=0;i<xt.length;i++)if(xt[i].el.id==this.id&&(!t||xt[i].anim==t)){var s=xt[i];h("raphael.anim.resume."+this.id,this,s.anim)!==!1&&(delete s.paused,this.status(s.anim,s.status))}return this},_t.stop=function(t){for(var i=0;i<xt.length;i++)xt[i].el.id!=this.id||t&&xt[i].anim!=t||h("raphael.anim.stop."+this.id,this,xt[i].anim)!==!1&&xt.splice(i--,1);return this},h.on("raphael.remove",gi),h.on("raphael.clear",gi),_t.toString=function(){return"Raphaël’s object"};var vi,mi,ne,yi,Le=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var i=0,s=t.length;i<s;i++)!t[i]||t[i].constructor!=_t.constructor&&t[i].constructor!=Le||(this[this.items.length]=this.items[this.items.length]=t[i],this.length++)},Pt=Le.prototype;for(var Ze in Pt.push=function(){for(var t,i,s=0,n=arguments.length;s<n;s++)!(t=arguments[s])||t.constructor!=_t.constructor&&t.constructor!=Le||(this[i=this.items.length]=this.items[i]=t,this.length++);return this},Pt.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},Pt.forEach=function(t,i){for(var s=0,n=this.items.length;s<n;s++)if(t.call(i,this.items[s],s)===!1)return this;return this},_t)_t[K](Ze)&&(Pt[Ze]=function(t){return function(){var i=arguments;return this.forEach(function(s){s[t][U](s,i)})}}(Ze));return Pt.attr=function(t,i){if(t&&o.is(t,mt)&&o.is(t[0],"object"))for(var s=0,n=t.length;s<n;s++)this.items[s].attr(t[s]);else for(var l=0,p=this.items.length;l<p;l++)this.items[l].attr(t,i);return this},Pt.clear=function(){for(;this.length;)this.pop()},Pt.splice=function(t,i,s){t=t<0?nt(this.length+t,0):t,i=nt(0,rt(this.length-t,i));var n,l=[],p=[],m=[];for(n=2;n<arguments.length;n++)m.push(arguments[n]);for(n=0;n<i;n++)p.push(this[t+n]);for(;n<this.length-t;n++)l.push(this[t+n]);var v=m.length;for(n=0;n<v+l.length;n++)this.items[t+n]=this[t+n]=n<v?m[n]:l[n-v];for(n=this.items.length=this.length-=i-v;this[n];)delete this[n++];return new Le(p)},Pt.exclude=function(t){for(var i=0,s=this.length;i<s;i++)if(this[i]==t)return this.splice(i,1),!0},Pt.animate=function(t,i,s,n){(o.is(s,"function")||!s)&&(n=s||null);var l,p,m=this.items.length,v=m,x=this;if(!m)return this;n&&(p=function(){!--m&&n.call(x)}),s=o.is(s,"string")?s:p;var E=o.animation(t,i,s,p);for(l=this.items[--v].animate(E);v--;)this.items[v]&&!this.items[v].removed&&this.items[v].animateWith(l,E,E),this.items[v]&&!this.items[v].removed||m--;return this},Pt.insertAfter=function(t){for(var i=this.items.length;i--;)this.items[i].insertAfter(t);return this},Pt.getBBox=function(){for(var t=[],i=[],s=[],n=[],l=this.items.length;l--;)if(!this.items[l].removed){var p=this.items[l].getBBox();t.push(p.x),i.push(p.y),s.push(p.x+p.width),n.push(p.y+p.height)}return{x:t=rt[U](0,t),y:i=rt[U](0,i),x2:s=nt[U](0,s),y2:n=nt[U](0,n),width:s-t,height:n-i}},Pt.clone=function(t){t=this.paper.set();for(var i=0,s=this.items.length;i<s;i++)t.push(this.items[i].clone());return t},Pt.toString=function(){return"Raphaël‘s set"},Pt.glow=function(t){var i=this.paper.set();return this.forEach(function(s,n){var l=s.glow(t);l!=null&&l.forEach(function(p,m){i.push(p)})}),i},Pt.isPointInside=function(t,i){var s=!1;return this.forEach(function(n){if(n.isPointInside(t,i))return s=!0,!1}),s},o.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var i={w:t.w,face:{},glyphs:{}},s=t.face["font-family"];for(var n in t.face)t.face[K](n)&&(i.face[n]=t.face[n]);if(this.fonts[s]?this.fonts[s].push(i):this.fonts[s]=[i],!t.svg){for(var l in i.face["units-per-em"]=_(t.face["units-per-em"],10),t.glyphs)if(t.glyphs[K](l)){var p=t.glyphs[l];if(i.glyphs[l]={w:p.w,k:{},d:p.d&&"M"+p.d.replace(/[mlcxtrv]/g,function(v){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[v]||"M"})+"z"},p.k)for(var m in p.k)p[K](m)&&(i.glyphs[l].k[m]=p.k[m])}}return t},C.getFont=function(t,i,s,n){if(n=n||"normal",s=s||"normal",i=+i||{normal:400,bold:700,lighter:300,bolder:800}[i]||400,o.fonts){var l,p=o.fonts[t];if(!p){var m=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,st)+"(\\s|$)","i");for(var v in o.fonts)if(o.fonts[K](v)&&m.test(v)){p=o.fonts[v];break}}if(p)for(var x=0,E=p.length;x<E&&((l=p[x]).face["font-weight"]!=i||l.face["font-style"]!=s&&l.face["font-style"]||l.face["font-stretch"]!=n);x++);return l}},C.print=function(t,i,s,n,l,p,m,v){p=p||"middle",m=nt(rt(m||0,1),-1),v=nt(rt(v||1,3),1);var x,E=Y(s)[et](st),T=0,H=0,R=st;if(o.is(n,"string")&&(n=this.getFont(n)),n){x=(l||16)/n.face["units-per-em"];for(var D=n.face.bbox[et](X),A=+D[0],F=D[3]-D[1],P=0,I=+D[1]+(p=="baseline"?F+ +n.face.descent:F/2),Q=0,O=E.length;Q<O;Q++){if(E[Q]==`
`)T=0,$=0,H=0,P+=F*v;else{var W=H&&n.glyphs[E[Q-1]]||{},$=n.glyphs[E[Q]];T+=H?(W.w||n.w)+(W.k&&W.k[E[Q]]||0)+n.w*m:0,H=1}$&&$.d&&(R+=o.transformPath($.d,["t",T*x,P*x,"s",x,x,A,I,"t",(t-A)/x,(i-I)/x]))}}return this.path(R).attr({fill:"#000",stroke:"none"})},C.add=function(t){if(o.is(t,"array"))for(var i,s=this.set(),n=0,l=t.length;n<l;n++)i=t[n]||{},V[K](i.type)&&s.push(this[i.type]().attr(i));return s},o.format=function(t,i){var s=o.is(i,mt)?[0][M](i):arguments;return t&&o.is(t,"string")&&s.length-1&&(t=t.replace(J,function(n,l){return s[++l]==null?st:s[l]})),t||st},o.fullfill=(vi=/\{([^\}]+)\}/g,mi=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(t,i){return String(t).replace(vi,function(s,n){return function(l,p,m){var v=m;return p.replace(mi,function(x,E,T,H,R){E=E||H,v&&(E in v&&(v=v[E]),typeof v=="function"&&R&&(v=v()))}),v=(v==null||v==m?l:v)+""}(s,n,i)})}),o.ninja=function(){if(tt.was)j.win.Raphael=tt.is;else{window.Raphael=void 0;try{delete window.Raphael}catch{}}return o},o.st=Pt,h.on("raphael.DOMload",function(){k=!0}),(ne=document).readyState==null&&ne.addEventListener&&(ne.addEventListener("DOMContentLoaded",yi=function(){ne.removeEventListener("DOMContentLoaded",yi,!1),ne.readyState="complete"},!1),ne.readyState="loading"),function t(){/in/.test(ne.readyState)?setTimeout(t,9):o.eve("raphael.DOMload")}(),o}.apply(a,g))===void 0||(r.exports=w)},function(r,a,u){var g,w;g=[u(0),u(3),u(4)],(w=function(h){return h}.apply(a,g))===void 0||(r.exports=w)},function(r,a,u){var g,w,h,o,k,C,X,V,J,K,j,tt,bt,U;o="hasOwnProperty",k=/[\.\/]/,C=/\s*,\s*/,X=function(M,ct){return M-ct},V={n:{}},J=function(){for(var M=0,ct=this.length;M<ct;M++)if(this[M]!==void 0)return this[M]},K=function(){for(var M=this.length;--M;)if(this[M]!==void 0)return this[M]},j=Object.prototype.toString,tt=String,bt=Array.isArray||function(M){return M instanceof Array||j.call(M)=="[object Array]"},(U=function(M,ct){var st,dt=h,Y=Array.prototype.slice.call(arguments,2),et=U.listeners(M),ot=0,St=[],ht={},Z=[],nt=w;Z.firstDefined=J,Z.lastDefined=K,w=M,h=0;for(var rt=0,kt=et.length;rt<kt;rt++)"zIndex"in et[rt]&&(St.push(et[rt].zIndex),et[rt].zIndex<0&&(ht[et[rt].zIndex]=et[rt]));for(St.sort(X);St[ot]<0;)if(st=ht[St[ot++]],Z.push(st.apply(ct,Y)),h)return h=dt,Z;for(rt=0;rt<kt;rt++)if("zIndex"in(st=et[rt]))if(st.zIndex==St[ot]){if(Z.push(st.apply(ct,Y)),h)break;do if((st=ht[St[++ot]])&&Z.push(st.apply(ct,Y)),h)break;while(st)}else ht[st.zIndex]=st;else if(Z.push(st.apply(ct,Y)),h)break;return h=dt,w=nt,Z})._events=V,U.listeners=function(M){var ct,st,dt,Y,et,ot,St,ht,Z=bt(M)?M:M.split(k),nt=V,rt=[nt],kt=[];for(Y=0,et=Z.length;Y<et;Y++){for(ht=[],ot=0,St=rt.length;ot<St;ot++)for(st=[(nt=rt[ot].n)[Z[Y]],nt["*"]],dt=2;dt--;)(ct=st[dt])&&(ht.push(ct),kt=kt.concat(ct.f||[]));rt=ht}return kt},U.separator=function(M){M?(M="["+(M=tt(M).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",k=new RegExp(M)):k=/[\.\/]/},U.on=function(M,ct){if(typeof ct!="function")return function(){};for(var st=bt(M)?bt(M[0])?M:[M]:tt(M).split(C),dt=0,Y=st.length;dt<Y;dt++)(function(et){for(var ot,St=bt(et)?et:tt(et).split(k),ht=V,Z=0,nt=St.length;Z<nt;Z++)ht=(ht=ht.n).hasOwnProperty(St[Z])&&ht[St[Z]]||(ht[St[Z]]={n:{}});for(ht.f=ht.f||[],Z=0,nt=ht.f.length;Z<nt;Z++)if(ht.f[Z]==ct){ot=!0;break}!ot&&ht.f.push(ct)})(st[dt]);return function(et){+et==+et&&(ct.zIndex=+et)}},U.f=function(M){var ct=[].slice.call(arguments,1);return function(){U.apply(null,[M,null].concat(ct).concat([].slice.call(arguments,0)))}},U.stop=function(){h=1},U.nt=function(M){var ct=bt(w)?w.join("."):w;return M?new RegExp("(?:\\.|\\/|^)"+M+"(?:\\.|\\/|$)").test(ct):ct},U.nts=function(){return bt(w)?w:w.split(k)},U.off=U.unbind=function(M,ct){if(M){var st=bt(M)?bt(M[0])?M:[M]:tt(M).split(C);if(st.length>1)for(var dt=0,Y=st.length;dt<Y;dt++)U.off(st[dt],ct);else{st=bt(M)?M:tt(M).split(k);var et,ot,St,ht,Z,nt=[V];for(dt=0,Y=st.length;dt<Y;dt++)for(ht=0;ht<nt.length;ht+=St.length-2){if(St=[ht,1],et=nt[ht].n,st[dt]!="*")et[st[dt]]&&St.push(et[st[dt]]);else for(ot in et)et[o](ot)&&St.push(et[ot]);nt.splice.apply(nt,St)}for(dt=0,Y=nt.length;dt<Y;dt++)for(et=nt[dt];et.n;){if(ct){if(et.f){for(ht=0,Z=et.f.length;ht<Z;ht++)if(et.f[ht]==ct){et.f.splice(ht,1);break}!et.f.length&&delete et.f}for(ot in et.n)if(et.n[o](ot)&&et.n[ot].f){var rt=et.n[ot].f;for(ht=0,Z=rt.length;ht<Z;ht++)if(rt[ht]==ct){rt.splice(ht,1);break}!rt.length&&delete et.n[ot].f}}else for(ot in delete et.f,et.n)et.n[o](ot)&&et.n[ot].f&&delete et.n[ot].f;et=et.n}}}else U._events=V={n:{}}},U.once=function(M,ct){var st=function(){return U.off(M,st),ct.apply(this,arguments)};return U.on(M,st)},U.version="0.5.0",U.toString=function(){return"You are running Eve 0.5.0"},r.exports?r.exports=U:(g=function(){return U}.apply(a,[]))===void 0||(r.exports=g)},function(r,a,u){var g,w;g=[u(0)],(w=function(h){if(!h||h.svg){var o="hasOwnProperty",k=String,C=parseFloat,X=parseInt,V=Math,J=V.max,K=V.abs,j=V.pow,tt=/[, ]+/,bt=h.eve,U="",M=" ",ct="http://www.w3.org/1999/xlink",st={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},dt={};h.toString=function(){return`Your browser supports SVG.
You are running Raphaël `+this.version};var Y=function(f,d){if(d)for(var c in typeof f=="string"&&(f=Y(f)),d)d[o](c)&&(c.substring(0,6)=="xlink:"?f.setAttributeNS(ct,c.substring(6),k(d[c])):f.setAttribute(c,k(d[c])));else(f=h._g.doc.createElementNS("http://www.w3.org/2000/svg",f)).style&&(f.style.webkitTapHighlightColor="rgba(0,0,0,0)");return f},et=function(f,d){var c="linear",y=f.id+d,S=.5,_=.5,N=f.node,z=f.paper,L=N.style,G=h._g.doc.getElementById(y);if(!G){if(d=(d=k(d).replace(h._radial_gradient,function(Nt,Et,lt){if(c="radial",Et&&lt){S=C(Et);var It=2*((_=C(lt))>.5)-1;j(S-.5,2)+j(_-.5,2)>.25&&(_=V.sqrt(.25-j(S-.5,2))*It+.5)&&_!=.5&&(_=_.toFixed(5)-1e-5*It)}return U})).split(/\s*\-\s*/),c=="linear"){var q=d.shift();if(q=-C(q),isNaN(q))return null;var it=[0,0,V.cos(h.rad(q)),V.sin(h.rad(q))],gt=1/(J(K(it[2]),K(it[3]))||1);it[2]*=gt,it[3]*=gt,it[2]<0&&(it[0]=-it[2],it[2]=0),it[3]<0&&(it[1]=-it[3],it[3]=0)}var yt=h._parseDots(d);if(!yt)return null;if(y=y.replace(/[\(\)\s,\xb0#]/g,"_"),f.gradient&&y!=f.gradient.id&&(z.defs.removeChild(f.gradient),delete f.gradient),!f.gradient){G=Y(c+"Gradient",{id:y}),f.gradient=G,Y(G,c=="radial"?{fx:S,fy:_}:{x1:it[0],y1:it[1],x2:it[2],y2:it[3],gradientTransform:f.matrix.invert()}),z.defs.appendChild(G);for(var vt=0,Ct=yt.length;vt<Ct;vt++)G.appendChild(Y("stop",{offset:yt[vt].offset?yt[vt].offset:vt?"100%":"0%","stop-color":yt[vt].color||"#fff","stop-opacity":isFinite(yt[vt].opacity)?yt[vt].opacity:1}))}}return Y(N,{fill:ot(y),opacity:1,"fill-opacity":1}),L.fill=U,L.opacity=1,L.fillOpacity=1,1},ot=function(f){if((d=document.documentMode)&&(d===9||d===10))return"url('#"+f+"')";var d,c=document.location;return"url('"+(c.protocol+"//"+c.host+c.pathname+c.search)+"#"+f+"')"},St=function(f){var d=f.getBBox(1);Y(f.pattern,{patternTransform:f.matrix.invert()+" translate("+d.x+","+d.y+")"})},ht=function(f,d,c){if(f.type=="path"){for(var y,S,_,N,z,L=k(d).toLowerCase().split("-"),G=f.paper,q=c?"end":"start",it=f.node,gt=f.attrs,yt=gt["stroke-width"],vt=L.length,Ct="classic",Nt=3,Et=3,lt=5;vt--;)switch(L[vt]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":Ct=L[vt];break;case"wide":Et=5;break;case"narrow":Et=2;break;case"long":Nt=5;break;case"short":Nt=2}if(Ct=="open"?(Nt+=2,Et+=2,lt+=2,_=1,N=c?4:1,z={fill:"none",stroke:gt.stroke}):(N=_=Nt/2,z={fill:gt.stroke,stroke:"none"}),f._.arrows?c?(f._.arrows.endPath&&dt[f._.arrows.endPath]--,f._.arrows.endMarker&&dt[f._.arrows.endMarker]--):(f._.arrows.startPath&&dt[f._.arrows.startPath]--,f._.arrows.startMarker&&dt[f._.arrows.startMarker]--):f._.arrows={},Ct!="none"){var It="raphael-marker-"+Ct,Tt="raphael-marker-"+q+Ct+Nt+Et+"-obj"+f.id;h._g.doc.getElementById(It)?dt[It]++:(G.defs.appendChild(Y(Y("path"),{"stroke-linecap":"round",d:st[Ct],id:It})),dt[It]=1);var Mt,Bt=h._g.doc.getElementById(Tt);Bt?(dt[Tt]++,Mt=Bt.getElementsByTagName("use")[0]):(Bt=Y(Y("marker"),{id:Tt,markerHeight:Et,markerWidth:Nt,orient:"auto",refX:N,refY:Et/2}),Mt=Y(Y("use"),{"xlink:href":"#"+It,transform:(c?"rotate(180 "+Nt/2+" "+Et/2+") ":U)+"scale("+Nt/lt+","+Et/lt+")","stroke-width":(1/((Nt/lt+Et/lt)/2)).toFixed(4)}),Bt.appendChild(Mt),G.defs.appendChild(Bt),dt[Tt]=1),Y(Mt,z);var $t=_*(Ct!="diamond"&&Ct!="oval");c?(y=f._.arrows.startdx*yt||0,S=h.getTotalLength(gt.path)-$t*yt):(y=$t*yt,S=h.getTotalLength(gt.path)-(f._.arrows.enddx*yt||0)),(z={})["marker-"+q]="url(#"+Tt+")",(S||y)&&(z.d=h.getSubpath(gt.path,y,S)),Y(it,z),f._.arrows[q+"Path"]=It,f._.arrows[q+"Marker"]=Tt,f._.arrows[q+"dx"]=$t,f._.arrows[q+"Type"]=Ct,f._.arrows[q+"String"]=d}else c?(y=f._.arrows.startdx*yt||0,S=h.getTotalLength(gt.path)-y):(y=0,S=h.getTotalLength(gt.path)-(f._.arrows.enddx*yt||0)),f._.arrows[q+"Path"]&&Y(it,{d:h.getSubpath(gt.path,y,S)}),delete f._.arrows[q+"Path"],delete f._.arrows[q+"Marker"],delete f._.arrows[q+"dx"],delete f._.arrows[q+"Type"],delete f._.arrows[q+"String"];for(z in dt)if(dt[o](z)&&!dt[z]){var zt=h._g.doc.getElementById(z);zt&&zt.parentNode.removeChild(zt)}}},Z={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},nt=function(f,d,c){if(d=Z[k(d).toLowerCase()]){for(var y=f.attrs["stroke-width"]||"1",S={round:y,square:y,butt:0}[f.attrs["stroke-linecap"]||c["stroke-linecap"]]||0,_=[],N=d.length;N--;)_[N]=d[N]*y+(N%2?1:-1)*S;Y(f.node,{"stroke-dasharray":_.join(",")})}else Y(f.node,{"stroke-dasharray":"none"})},rt=function(f,d){var c=f.node,y=f.attrs,S=c.style.visibility;for(var _ in c.style.visibility="hidden",d)if(d[o](_)){if(!h._availableAttrs[o](_))continue;var N=d[_];switch(y[_]=N,_){case"blur":f.blur(N);break;case"title":var z=c.getElementsByTagName("title");if(z.length&&(z=z[0]))z.firstChild.nodeValue=N;else{z=Y("title");var L=h._g.doc.createTextNode(N);z.appendChild(L),c.appendChild(z)}break;case"href":case"target":var G=c.parentNode;if(G.tagName.toLowerCase()!="a"){var q=Y("a");G.insertBefore(q,c),q.appendChild(c),G=q}_=="target"?G.setAttributeNS(ct,"show",N=="blank"?"new":N):G.setAttributeNS(ct,_,N);break;case"cursor":c.style.cursor=N;break;case"transform":f.transform(N);break;case"arrow-start":ht(f,N);break;case"arrow-end":ht(f,N,1);break;case"clip-rect":var it=k(N).split(tt);if(it.length==4){f.clip&&f.clip.parentNode.parentNode.removeChild(f.clip.parentNode);var gt=Y("clipPath"),yt=Y("rect");gt.id=h.createUUID(),Y(yt,{x:it[0],y:it[1],width:it[2],height:it[3]}),gt.appendChild(yt),f.paper.defs.appendChild(gt),Y(c,{"clip-path":"url(#"+gt.id+")"}),f.clip=yt}if(!N){var vt=c.getAttribute("clip-path");if(vt){var Ct=h._g.doc.getElementById(vt.replace(/(^url\(#|\)$)/g,U));Ct&&Ct.parentNode.removeChild(Ct),Y(c,{"clip-path":U}),delete f.clip}}break;case"path":f.type=="path"&&(Y(c,{d:N?y.path=h._pathToAbsolute(N):"M0,0"}),f._.dirty=1,f._.arrows&&("startString"in f._.arrows&&ht(f,f._.arrows.startString),"endString"in f._.arrows&&ht(f,f._.arrows.endString,1)));break;case"width":if(c.setAttribute(_,N),f._.dirty=1,!y.fx)break;_="x",N=y.x;case"x":y.fx&&(N=-y.x-(y.width||0));case"rx":if(_=="rx"&&f.type=="rect")break;case"cx":c.setAttribute(_,N),f.pattern&&St(f),f._.dirty=1;break;case"height":if(c.setAttribute(_,N),f._.dirty=1,!y.fy)break;_="y",N=y.y;case"y":y.fy&&(N=-y.y-(y.height||0));case"ry":if(_=="ry"&&f.type=="rect")break;case"cy":c.setAttribute(_,N),f.pattern&&St(f),f._.dirty=1;break;case"r":f.type=="rect"?Y(c,{rx:N,ry:N}):c.setAttribute(_,N),f._.dirty=1;break;case"src":f.type=="image"&&c.setAttributeNS(ct,"href",N);break;case"stroke-width":f._.sx==1&&f._.sy==1||(N/=J(K(f._.sx),K(f._.sy))||1),c.setAttribute(_,N),y["stroke-dasharray"]&&nt(f,y["stroke-dasharray"],d),f._.arrows&&("startString"in f._.arrows&&ht(f,f._.arrows.startString),"endString"in f._.arrows&&ht(f,f._.arrows.endString,1));break;case"stroke-dasharray":nt(f,N,d);break;case"fill":var Nt=k(N).match(h._ISURL);if(Nt){gt=Y("pattern");var Et=Y("image");gt.id=h.createUUID(),Y(gt,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),Y(Et,{x:0,y:0,"xlink:href":Nt[1]}),gt.appendChild(Et),function(Bt){h._preload(Nt[1],function(){var $t=this.offsetWidth,zt=this.offsetHeight;Y(Bt,{width:$t,height:zt}),Y(Et,{width:$t,height:zt})})}(gt),f.paper.defs.appendChild(gt),Y(c,{fill:"url(#"+gt.id+")"}),f.pattern=gt,f.pattern&&St(f);break}var lt=h.getRGB(N);if(lt.error){if((f.type=="circle"||f.type=="ellipse"||k(N).charAt()!="r")&&et(f,N)){if("opacity"in y||"fill-opacity"in y){var It=h._g.doc.getElementById(c.getAttribute("fill").replace(/^url\(#|\)$/g,U));if(It){var Tt=It.getElementsByTagName("stop");Y(Tt[Tt.length-1],{"stop-opacity":("opacity"in y?y.opacity:1)*("fill-opacity"in y?y["fill-opacity"]:1)})}}y.gradient=N,y.fill="none";break}}else delete d.gradient,delete y.gradient,!h.is(y.opacity,"undefined")&&h.is(d.opacity,"undefined")&&Y(c,{opacity:y.opacity}),!h.is(y["fill-opacity"],"undefined")&&h.is(d["fill-opacity"],"undefined")&&Y(c,{"fill-opacity":y["fill-opacity"]});lt[o]("opacity")&&Y(c,{"fill-opacity":lt.opacity>1?lt.opacity/100:lt.opacity});case"stroke":lt=h.getRGB(N),c.setAttribute(_,lt.hex),_=="stroke"&&lt[o]("opacity")&&Y(c,{"stroke-opacity":lt.opacity>1?lt.opacity/100:lt.opacity}),_=="stroke"&&f._.arrows&&("startString"in f._.arrows&&ht(f,f._.arrows.startString),"endString"in f._.arrows&&ht(f,f._.arrows.endString,1));break;case"gradient":(f.type=="circle"||f.type=="ellipse"||k(N).charAt()!="r")&&et(f,N);break;case"opacity":y.gradient&&!y[o]("stroke-opacity")&&Y(c,{"stroke-opacity":N>1?N/100:N});case"fill-opacity":if(y.gradient){(It=h._g.doc.getElementById(c.getAttribute("fill").replace(/^url\(#|\)$/g,U)))&&(Tt=It.getElementsByTagName("stop"),Y(Tt[Tt.length-1],{"stop-opacity":N}));break}default:_=="font-size"&&(N=X(N,10)+"px");var Mt=_.replace(/(\-.)/g,function(Bt){return Bt.substring(1).toUpperCase()});c.style[Mt]=N,f._.dirty=1,c.setAttribute(_,N)}}kt(f,d),c.style.visibility=S},kt=function(f,d){if(f.type=="text"&&(d[o]("text")||d[o]("font")||d[o]("font-size")||d[o]("x")||d[o]("y"))){var c=f.attrs,y=f.node,S=y.firstChild?X(h._g.doc.defaultView.getComputedStyle(y.firstChild,U).getPropertyValue("font-size"),10):10;if(d[o]("text")){for(c.text=d.text;y.firstChild;)y.removeChild(y.firstChild);for(var _,N=k(d.text).split(`
`),z=[],L=0,G=N.length;L<G;L++)_=Y("tspan"),L&&Y(_,{dy:1.2*S,x:c.x}),_.appendChild(h._g.doc.createTextNode(N[L])),y.appendChild(_),z[L]=_}else for(L=0,G=(z=y.getElementsByTagName("tspan")).length;L<G;L++)L?Y(z[L],{dy:1.2*S,x:c.x}):Y(z[0],{dy:0});Y(y,{x:c.x,y:c.y}),f._.dirty=1;var q=f._getBBox(),it=c.y-(q.y+q.height/2);it&&h.is(it,"finite")&&Y(z[0],{dy:it})}},Lt=function(f){return f.parentNode&&f.parentNode.tagName.toLowerCase()==="a"?f.parentNode:f},Dt=function(f,d){this[0]=this.node=f,f.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),f.raphaelid=this.id,this.matrix=h.matrix(),this.realPath=null,this.paper=d,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!d.bottom&&(d.bottom=this),this.prev=d.top,d.top&&(d.top.next=this),d.top=this,this.next=null},ft=h.el;Dt.prototype=ft,ft.constructor=Dt,h._engine.path=function(f,d){var c=Y("path");d.canvas&&d.canvas.appendChild(c);var y=new Dt(c,d);return y.type="path",rt(y,{fill:"none",stroke:"#000",path:f}),y},ft.rotate=function(f,d,c){if(this.removed)return this;if((f=k(f).split(tt)).length-1&&(d=C(f[1]),c=C(f[2])),f=C(f[0]),c==null&&(d=c),d==null||c==null){var y=this.getBBox(1);d=y.x+y.width/2,c=y.y+y.height/2}return this.transform(this._.transform.concat([["r",f,d,c]])),this},ft.scale=function(f,d,c,y){if(this.removed)return this;if((f=k(f).split(tt)).length-1&&(d=C(f[1]),c=C(f[2]),y=C(f[3])),f=C(f[0]),d==null&&(d=f),y==null&&(c=y),c==null||y==null)var S=this.getBBox(1);return c=c??S.x+S.width/2,y=y??S.y+S.height/2,this.transform(this._.transform.concat([["s",f,d,c,y]])),this},ft.translate=function(f,d){return this.removed?this:((f=k(f).split(tt)).length-1&&(d=C(f[1])),f=C(f[0])||0,d=+d||0,this.transform(this._.transform.concat([["t",f,d]])),this)},ft.transform=function(f){var d=this._;if(f==null)return d.transform;if(h._extractTransform(this,f),this.clip&&Y(this.clip,{transform:this.matrix.invert()}),this.pattern&&St(this),this.node&&Y(this.node,{transform:this.matrix}),d.sx!=1||d.sy!=1){var c=this.attrs[o]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":c})}return this},ft.hide=function(){return this.removed||(this.node.style.display="none"),this},ft.show=function(){return this.removed||(this.node.style.display=""),this},ft.remove=function(){var f=Lt(this.node);if(!this.removed&&f.parentNode){var d=this.paper;for(var c in d.__set__&&d.__set__.exclude(this),bt.unbind("raphael.*.*."+this.id),this.gradient&&d.defs.removeChild(this.gradient),h._tear(this,d),f.parentNode.removeChild(f),this.removeData(),this)this[c]=typeof this[c]=="function"?h._removedFactory(c):null;this.removed=!0}},ft._getBBox=function(){if(this.node.style.display=="none"){this.show();var f=!0}var d,c=!1;this.paper.canvas.parentElement?d=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(d=this.paper.canvas.parentNode.style),d&&d.display=="none"&&(c=!0,d.display="");var y={};try{y=this.node.getBBox()}catch{y={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{y=y||{},c&&(d.display="none")}return f&&this.hide(),y},ft.attr=function(f,d){if(this.removed)return this;if(f==null){var c={};for(var y in this.attrs)this.attrs[o](y)&&(c[y]=this.attrs[y]);return c.gradient&&c.fill=="none"&&(c.fill=c.gradient)&&delete c.gradient,c.transform=this._.transform,c}if(d==null&&h.is(f,"string")){if(f=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(f=="transform")return this._.transform;for(var S=f.split(tt),_={},N=0,z=S.length;N<z;N++)(f=S[N])in this.attrs?_[f]=this.attrs[f]:h.is(this.paper.customAttributes[f],"function")?_[f]=this.paper.customAttributes[f].def:_[f]=h._availableAttrs[f];return z-1?_:_[S[0]]}if(d==null&&h.is(f,"array")){for(_={},N=0,z=f.length;N<z;N++)_[f[N]]=this.attr(f[N]);return _}if(d!=null){var L={};L[f]=d}else f!=null&&h.is(f,"object")&&(L=f);for(var G in L)bt("raphael.attr."+G+"."+this.id,this,L[G]);for(G in this.paper.customAttributes)if(this.paper.customAttributes[o](G)&&L[o](G)&&h.is(this.paper.customAttributes[G],"function")){var q=this.paper.customAttributes[G].apply(this,[].concat(L[G]));for(var it in this.attrs[G]=L[G],q)q[o](it)&&(L[it]=q[it])}return rt(this,L),this},ft.toFront=function(){if(this.removed)return this;var f=Lt(this.node);f.parentNode.appendChild(f);var d=this.paper;return d.top!=this&&h._tofront(this,d),this},ft.toBack=function(){if(this.removed)return this;var f=Lt(this.node),d=f.parentNode;return d.insertBefore(f,d.firstChild),h._toback(this,this.paper),this.paper,this},ft.insertAfter=function(f){if(this.removed||!f)return this;var d=Lt(this.node),c=Lt(f.node||f[f.length-1].node);return c.nextSibling?c.parentNode.insertBefore(d,c.nextSibling):c.parentNode.appendChild(d),h._insertafter(this,f,this.paper),this},ft.insertBefore=function(f){if(this.removed||!f)return this;var d=Lt(this.node),c=Lt(f.node||f[0].node);return c.parentNode.insertBefore(d,c),h._insertbefore(this,f,this.paper),this},ft.blur=function(f){var d=this;if(+f!=0){var c=Y("filter"),y=Y("feGaussianBlur");d.attrs.blur=f,c.id=h.createUUID(),Y(y,{stdDeviation:+f||1.5}),c.appendChild(y),d.paper.defs.appendChild(c),d._blur=c,Y(d.node,{filter:"url(#"+c.id+")"})}else d._blur&&(d._blur.parentNode.removeChild(d._blur),delete d._blur,delete d.attrs.blur),d.node.removeAttribute("filter");return d},h._engine.circle=function(f,d,c,y){var S=Y("circle");f.canvas&&f.canvas.appendChild(S);var _=new Dt(S,f);return _.attrs={cx:d,cy:c,r:y,fill:"none",stroke:"#000"},_.type="circle",Y(S,_.attrs),_},h._engine.rect=function(f,d,c,y,S,_){var N=Y("rect");f.canvas&&f.canvas.appendChild(N);var z=new Dt(N,f);return z.attrs={x:d,y:c,width:y,height:S,rx:_||0,ry:_||0,fill:"none",stroke:"#000"},z.type="rect",Y(N,z.attrs),z},h._engine.ellipse=function(f,d,c,y,S){var _=Y("ellipse");f.canvas&&f.canvas.appendChild(_);var N=new Dt(_,f);return N.attrs={cx:d,cy:c,rx:y,ry:S,fill:"none",stroke:"#000"},N.type="ellipse",Y(_,N.attrs),N},h._engine.image=function(f,d,c,y,S,_){var N=Y("image");Y(N,{x:c,y,width:S,height:_,preserveAspectRatio:"none"}),N.setAttributeNS(ct,"href",d),f.canvas&&f.canvas.appendChild(N);var z=new Dt(N,f);return z.attrs={x:c,y,width:S,height:_,src:d},z.type="image",z},h._engine.text=function(f,d,c,y){var S=Y("text");f.canvas&&f.canvas.appendChild(S);var _=new Dt(S,f);return _.attrs={x:d,y:c,"text-anchor":"middle",text:y,"font-family":h._availableAttrs["font-family"],"font-size":h._availableAttrs["font-size"],stroke:"none",fill:"#000"},_.type="text",rt(_,_.attrs),_},h._engine.setSize=function(f,d){return this.width=f||this.width,this.height=d||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},h._engine.create=function(){var f=h._getContainer.apply(0,arguments),d=f&&f.container;if(!d)throw new Error("SVG container not found.");var c,y=f.x,S=f.y,_=f.width,N=f.height,z=Y("svg"),L="overflow:hidden;";return y=y||0,S=S||0,Y(z,{height:N=N||342,version:1.1,width:_=_||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),d==1?(z.style.cssText=L+"position:absolute;left:"+y+"px;top:"+S+"px",h._g.doc.body.appendChild(z),c=1):(z.style.cssText=L+"position:relative",d.firstChild?d.insertBefore(z,d.firstChild):d.appendChild(z)),(d=new h._Paper).width=_,d.height=N,d.canvas=z,d.clear(),d._left=d._top=0,c&&(d.renderfix=function(){}),d.renderfix(),d},h._engine.setViewBox=function(f,d,c,y,S){bt("raphael.setViewBox",this,this._viewBox,[f,d,c,y,S]);var _,N,z=this.getSize(),L=J(c/z.width,y/z.height),G=this.top,q=S?"xMidYMid meet":"xMinYMin";for(f==null?(this._vbSize&&(L=1),delete this._vbSize,_="0 0 "+this.width+M+this.height):(this._vbSize=L,_=f+M+d+M+c+M+y),Y(this.canvas,{viewBox:_,preserveAspectRatio:q});L&&G;)N="stroke-width"in G.attrs?G.attrs["stroke-width"]:1,G.attr({"stroke-width":N}),G._.dirty=1,G._.dirtyT=1,G=G.prev;return this._viewBox=[f,d,c,y,!!S],this},h.prototype.renderfix=function(){var f,d=this.canvas,c=d.style;try{f=d.getScreenCTM()||d.createSVGMatrix()}catch{f=d.createSVGMatrix()}var y=-f.e%1,S=-f.f%1;(y||S)&&(y&&(this._left=(this._left+y)%1,c.left=this._left+"px"),S&&(this._top=(this._top+S)%1,c.top=this._top+"px"))},h.prototype.clear=function(){h.eve("raphael.clear",this);for(var f=this.canvas;f.firstChild;)f.removeChild(f.firstChild);this.bottom=this.top=null,(this.desc=Y("desc")).appendChild(h._g.doc.createTextNode("Created with Raphaël "+h.version)),f.appendChild(this.desc),f.appendChild(this.defs=Y("defs"))},h.prototype.remove=function(){for(var f in bt("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[f]=typeof this[f]=="function"?h._removedFactory(f):null};var mt=h.st;for(var jt in ft)ft[o](jt)&&!mt[o](jt)&&(mt[jt]=function(f){return function(){var d=arguments;return this.forEach(function(c){c[f].apply(c,d)})}}(jt))}}.apply(a,g))===void 0||(r.exports=w)},function(r,a,u){var g,w;g=[u(0)],(w=function(h){if(!h||h.vml){var o="hasOwnProperty",k=String,C=parseFloat,X=Math,V=X.round,J=X.max,K=X.min,j=X.abs,tt=/[, ]+/,bt=h.eve,U=" ",M="",ct={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},st=/([clmz]),?([^clmz]*)/gi,dt=/ progid:\S+Blur\([^\)]+\)/g,Y=/-?[^,\s-]+/g,et="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",ot=21600,St={path:1,rect:1,image:1},ht={circle:1,ellipse:1},Z=function(d,c,y){var S=h.matrix();return S.rotate(-d,.5,.5),{dx:S.x(c,y),dy:S.y(c,y)}},nt=function(d,c,y,S,_,N){var z=d._,L=d.matrix,G=z.fillpos,q=d.node,it=q.style,gt=1,yt="",vt=ot/c,Ct=ot/y;if(it.visibility="hidden",c&&y){if(q.coordsize=j(vt)+U+j(Ct),it.rotation=N*(c*y<0?-1:1),N){var Nt=Z(N,S,_);S=Nt.dx,_=Nt.dy}if(c<0&&(yt+="x"),y<0&&(yt+=" y")&&(gt=-1),it.flip=yt,q.coordorigin=S*-vt+U+_*-Ct,G||z.fillsize){var Et=q.getElementsByTagName("fill");Et=Et&&Et[0],q.removeChild(Et),G&&(Nt=Z(N,L.x(G[0],G[1]),L.y(G[0],G[1])),Et.position=Nt.dx*gt+U+Nt.dy*gt),z.fillsize&&(Et.size=z.fillsize[0]*j(c)+U+z.fillsize[1]*j(y)),q.appendChild(Et)}it.visibility="visible"}};h.toString=function(){return`Your browser doesn’t support SVG. Falling down to VML.
You are running Raphaël `+this.version};var rt,kt=function(d,c,y){for(var S=k(c).toLowerCase().split("-"),_=y?"end":"start",N=S.length,z="classic",L="medium",G="medium";N--;)switch(S[N]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":z=S[N];break;case"wide":case"narrow":G=S[N];break;case"long":case"short":L=S[N]}var q=d.node.getElementsByTagName("stroke")[0];q[_+"arrow"]=z,q[_+"arrowlength"]=L,q[_+"arrowwidth"]=G},Lt=function(d,c){d.attrs=d.attrs||{};var y=d.node,S=d.attrs,_=y.style,N=St[d.type]&&(c.x!=S.x||c.y!=S.y||c.width!=S.width||c.height!=S.height||c.cx!=S.cx||c.cy!=S.cy||c.rx!=S.rx||c.ry!=S.ry||c.r!=S.r),z=ht[d.type]&&(S.cx!=c.cx||S.cy!=c.cy||S.r!=c.r||S.rx!=c.rx||S.ry!=c.ry),L=d;for(var G in c)c[o](G)&&(S[G]=c[G]);if(N&&(S.path=h._getPath[d.type](d),d._.dirty=1),c.href&&(y.href=c.href),c.title&&(y.title=c.title),c.target&&(y.target=c.target),c.cursor&&(_.cursor=c.cursor),"blur"in c&&d.blur(c.blur),(c.path&&d.type=="path"||N)&&(y.path=function(At){var Qt=/[ahqstv]/gi,ue=h._pathToAbsolute;if(k(At).match(Qt)&&(ue=h._path2curve),Qt=/[clmz]/g,ue==h._pathToAbsolute&&!k(At).match(Qt)){var Gt=k(At).replace(st,function(oi,ge,ve){var te=[],Re=ge.toLowerCase()=="m",re=ct[ge];return ve.replace(Y,function(Ae){Re&&te.length==2&&(re+=te+ct[ge=="m"?"l":"L"],te=[]),te.push(V(Ae*ot))}),re+te});return Gt}var pe,Vt,_e=ue(At);Gt=[];for(var fe=0,Ce=_e.length;fe<Ce;fe++){pe=_e[fe],(Vt=_e[fe][0].toLowerCase())=="z"&&(Vt="x");for(var Jt=1,Ft=pe.length;Jt<Ft;Jt++)Vt+=V(pe[Jt]*ot)+(Jt!=Ft-1?",":M);Gt.push(Vt)}return Gt.join(U)}(~k(S.path).toLowerCase().indexOf("r")?h._pathToAbsolute(S.path):S.path),d._.dirty=1,d.type=="image"&&(d._.fillpos=[S.x,S.y],d._.fillsize=[S.width,S.height],nt(d,1,1,0,0,0))),"transform"in c&&d.transform(c.transform),z){var q=+S.cx,it=+S.cy,gt=+S.rx||+S.r||0,yt=+S.ry||+S.r||0;y.path=h.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",V((q-gt)*ot),V((it-yt)*ot),V((q+gt)*ot),V((it+yt)*ot),V(q*ot)),d._.dirty=1}if("clip-rect"in c){var vt=k(c["clip-rect"]).split(tt);if(vt.length==4){vt[2]=+vt[2]+ +vt[0],vt[3]=+vt[3]+ +vt[1];var Ct=y.clipRect||h._g.doc.createElement("div"),Nt=Ct.style;Nt.clip=h.format("rect({1}px {2}px {3}px {0}px)",vt),y.clipRect||(Nt.position="absolute",Nt.top=0,Nt.left=0,Nt.width=d.paper.width+"px",Nt.height=d.paper.height+"px",y.parentNode.insertBefore(Ct,y),Ct.appendChild(y),y.clipRect=Ct)}c["clip-rect"]||y.clipRect&&(y.clipRect.style.clip="auto")}if(d.textpath){var Et=d.textpath.style;c.font&&(Et.font=c.font),c["font-family"]&&(Et.fontFamily='"'+c["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,M)+'"'),c["font-size"]&&(Et.fontSize=c["font-size"]),c["font-weight"]&&(Et.fontWeight=c["font-weight"]),c["font-style"]&&(Et.fontStyle=c["font-style"])}if("arrow-start"in c&&kt(L,c["arrow-start"]),"arrow-end"in c&&kt(L,c["arrow-end"],1),c.opacity!=null||c.fill!=null||c.src!=null||c.stroke!=null||c["stroke-width"]!=null||c["stroke-opacity"]!=null||c["fill-opacity"]!=null||c["stroke-dasharray"]!=null||c["stroke-miterlimit"]!=null||c["stroke-linejoin"]!=null||c["stroke-linecap"]!=null){var lt=y.getElementsByTagName("fill");if(!(lt=lt&&lt[0])&&(lt=rt("fill")),d.type=="image"&&c.src&&(lt.src=c.src),c.fill&&(lt.on=!0),lt.on!=null&&c.fill!="none"&&c.fill!==null||(lt.on=!1),lt.on&&c.fill){var It=k(c.fill).match(h._ISURL);if(It){lt.parentNode==y&&y.removeChild(lt),lt.rotate=!0,lt.src=It[1],lt.type="tile";var Tt=d.getBBox(1);lt.position=Tt.x+U+Tt.y,d._.fillpos=[Tt.x,Tt.y],h._preload(It[1],function(){d._.fillsize=[this.offsetWidth,this.offsetHeight]})}else lt.color=h.getRGB(c.fill).hex,lt.src=M,lt.type="solid",h.getRGB(c.fill).error&&(L.type in{circle:1,ellipse:1}||k(c.fill).charAt()!="r")&&Dt(L,c.fill,lt)&&(S.fill="none",S.gradient=c.fill,lt.rotate=!1)}if("fill-opacity"in c||"opacity"in c){var Mt=((+S["fill-opacity"]+1||2)-1)*((+S.opacity+1||2)-1)*((+h.getRGB(c.fill).o+1||2)-1);Mt=K(J(Mt,0),1),lt.opacity=Mt,lt.src&&(lt.color="none")}y.appendChild(lt);var Bt=y.getElementsByTagName("stroke")&&y.getElementsByTagName("stroke")[0],$t=!1;!Bt&&($t=Bt=rt("stroke")),(c.stroke&&c.stroke!="none"||c["stroke-width"]||c["stroke-opacity"]!=null||c["stroke-dasharray"]||c["stroke-miterlimit"]||c["stroke-linejoin"]||c["stroke-linecap"])&&(Bt.on=!0),(c.stroke=="none"||c.stroke===null||Bt.on==null||c.stroke==0||c["stroke-width"]==0)&&(Bt.on=!1);var zt=h.getRGB(c.stroke);Bt.on&&c.stroke&&(Bt.color=zt.hex),Mt=((+S["stroke-opacity"]+1||2)-1)*((+S.opacity+1||2)-1)*((+zt.o+1||2)-1);var Ut=.75*(C(c["stroke-width"])||1);if(Mt=K(J(Mt,0),1),c["stroke-width"]==null&&(Ut=S["stroke-width"]),c["stroke-width"]&&(Bt.weight=Ut),Ut&&Ut<1&&(Mt*=Ut)&&(Bt.weight=1),Bt.opacity=Mt,c["stroke-linejoin"]&&(Bt.joinstyle=c["stroke-linejoin"]||"miter"),Bt.miterlimit=c["stroke-miterlimit"]||8,c["stroke-linecap"]&&(Bt.endcap=c["stroke-linecap"]=="butt"?"flat":c["stroke-linecap"]=="square"?"square":"round"),"stroke-dasharray"in c){var Ee={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};Bt.dashstyle=Ee[o](c["stroke-dasharray"])?Ee[c["stroke-dasharray"]]:M}$t&&y.appendChild(Bt)}if(L.type=="text"){L.paper.canvas.style.display=M;var Zt=L.paper.span,le=S.font&&S.font.match(/\d+(?:\.\d*)?(?=px)/);_=Zt.style,S.font&&(_.font=S.font),S["font-family"]&&(_.fontFamily=S["font-family"]),S["font-weight"]&&(_.fontWeight=S["font-weight"]),S["font-style"]&&(_.fontStyle=S["font-style"]),le=C(S["font-size"]||le&&le[0])||10,_.fontSize=100*le+"px",L.textpath.string&&(Zt.innerHTML=k(L.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var ce=Zt.getBoundingClientRect();L.W=S.w=(ce.right-ce.left)/100,L.H=S.h=(ce.bottom-ce.top)/100,L.X=S.x,L.Y=S.y+L.H/2,("x"in c||"y"in c)&&(L.path.v=h.format("m{0},{1}l{2},{1}",V(S.x*ot),V(S.y*ot),V(S.x*ot)+1));for(var ke=["x","y","text","font","font-family","font-weight","font-style","font-size"],de=0,Me=ke.length;de<Me;de++)if(ke[de]in c){L._.dirty=1;break}switch(S["text-anchor"]){case"start":L.textpath.style["v-text-align"]="left",L.bbx=L.W/2;break;case"end":L.textpath.style["v-text-align"]="right",L.bbx=-L.W/2;break;default:L.textpath.style["v-text-align"]="center",L.bbx=0}L.textpath.style["v-text-kern"]=!0}},Dt=function(d,c,y){d.attrs=d.attrs||{},d.attrs;var S=Math.pow,_="linear",N=".5 .5";if(d.attrs.gradient=c,c=(c=k(c).replace(h._radial_gradient,function(gt,yt,vt){return _="radial",yt&&vt&&(yt=C(yt),vt=C(vt),S(yt-.5,2)+S(vt-.5,2)>.25&&(vt=X.sqrt(.25-S(yt-.5,2))*(2*(vt>.5)-1)+.5),N=yt+U+vt),M})).split(/\s*\-\s*/),_=="linear"){var z=c.shift();if(z=-C(z),isNaN(z))return null}var L=h._parseDots(c);if(!L)return null;if(d=d.shape||d.node,L.length){d.removeChild(y),y.on=!0,y.method="none",y.color=L[0].color,y.color2=L[L.length-1].color;for(var G=[],q=0,it=L.length;q<it;q++)L[q].offset&&G.push(L[q].offset+U+L[q].color);y.colors=G.length?G.join():"0% "+y.color,_=="radial"?(y.type="gradientTitle",y.focus="100%",y.focussize="0 0",y.focusposition=N,y.angle=0):(y.type="gradient",y.angle=(270-z)%360),d.appendChild(y)}return 1},ft=function(d,c){this[0]=this.node=d,d.raphael=!0,this.id=h._oid++,d.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=c,this.matrix=h.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},mt=h.el;ft.prototype=mt,mt.constructor=ft,mt.transform=function(d){if(d==null)return this._.transform;var c,y=this.paper._viewBoxShift,S=y?"s"+[y.scale,y.scale]+"-1-1t"+[y.dx,y.dy]:M;y&&(c=d=k(d).replace(/\.{3}|\u2026/g,this._.transform||M)),h._extractTransform(this,S+d);var _,N=this.matrix.clone(),z=this.skew,L=this.node,G=~k(this.attrs.fill).indexOf("-"),q=!k(this.attrs.fill).indexOf("url(");if(N.translate(1,1),q||G||this.type=="image")if(z.matrix="1 0 0 1",z.offset="0 0",_=N.split(),G&&_.noRotation||!_.isSimple){L.style.filter=N.toFilter();var it=this.getBBox(),gt=this.getBBox(1),yt=it.x-gt.x,vt=it.y-gt.y;L.coordorigin=yt*-ot+U+vt*-ot,nt(this,1,1,yt,vt,0)}else L.style.filter=M,nt(this,_.scalex,_.scaley,_.dx,_.dy,_.rotate);else L.style.filter=M,z.matrix=k(N),z.offset=N.offset();return c!==null&&(this._.transform=c,h._extractTransform(this,c)),this},mt.rotate=function(d,c,y){if(this.removed)return this;if(d!=null){if((d=k(d).split(tt)).length-1&&(c=C(d[1]),y=C(d[2])),d=C(d[0]),y==null&&(c=y),c==null||y==null){var S=this.getBBox(1);c=S.x+S.width/2,y=S.y+S.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",d,c,y]])),this}},mt.translate=function(d,c){return this.removed?this:((d=k(d).split(tt)).length-1&&(c=C(d[1])),d=C(d[0])||0,c=+c||0,this._.bbox&&(this._.bbox.x+=d,this._.bbox.y+=c),this.transform(this._.transform.concat([["t",d,c]])),this)},mt.scale=function(d,c,y,S){if(this.removed)return this;if((d=k(d).split(tt)).length-1&&(c=C(d[1]),y=C(d[2]),S=C(d[3]),isNaN(y)&&(y=null),isNaN(S)&&(S=null)),d=C(d[0]),c==null&&(c=d),S==null&&(y=S),y==null||S==null)var _=this.getBBox(1);return y=y??_.x+_.width/2,S=S??_.y+_.height/2,this.transform(this._.transform.concat([["s",d,c,y,S]])),this._.dirtyT=1,this},mt.hide=function(){return!this.removed&&(this.node.style.display="none"),this},mt.show=function(){return!this.removed&&(this.node.style.display=M),this},mt.auxGetBBox=h.el.getBBox,mt.getBBox=function(){var d=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var c={},y=1/this.paper._viewBoxShift.scale;return c.x=d.x-this.paper._viewBoxShift.dx,c.x*=y,c.y=d.y-this.paper._viewBoxShift.dy,c.y*=y,c.width=d.width*y,c.height=d.height*y,c.x2=c.x+c.width,c.y2=c.y+c.height,c}return d},mt._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},mt.remove=function(){if(!this.removed&&this.node.parentNode){for(var d in this.paper.__set__&&this.paper.__set__.exclude(this),h.eve.unbind("raphael.*.*."+this.id),h._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[d]=typeof this[d]=="function"?h._removedFactory(d):null;this.removed=!0}},mt.attr=function(d,c){if(this.removed)return this;if(d==null){var y={};for(var S in this.attrs)this.attrs[o](S)&&(y[S]=this.attrs[S]);return y.gradient&&y.fill=="none"&&(y.fill=y.gradient)&&delete y.gradient,y.transform=this._.transform,y}if(c==null&&h.is(d,"string")){if(d=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;for(var _=d.split(tt),N={},z=0,L=_.length;z<L;z++)(d=_[z])in this.attrs?N[d]=this.attrs[d]:h.is(this.paper.customAttributes[d],"function")?N[d]=this.paper.customAttributes[d].def:N[d]=h._availableAttrs[d];return L-1?N:N[_[0]]}if(this.attrs&&c==null&&h.is(d,"array")){for(N={},z=0,L=d.length;z<L;z++)N[d[z]]=this.attr(d[z]);return N}var G;for(var q in c!=null&&((G={})[d]=c),c==null&&h.is(d,"object")&&(G=d),G)bt("raphael.attr."+q+"."+this.id,this,G[q]);if(G){for(q in this.paper.customAttributes)if(this.paper.customAttributes[o](q)&&G[o](q)&&h.is(this.paper.customAttributes[q],"function")){var it=this.paper.customAttributes[q].apply(this,[].concat(G[q]));for(var gt in this.attrs[q]=G[q],it)it[o](gt)&&(G[gt]=it[gt])}G.text&&this.type=="text"&&(this.textpath.string=G.text),Lt(this,G)}return this},mt.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&h._tofront(this,this.paper),this},mt.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),h._toback(this,this.paper)),this)},mt.insertAfter=function(d){return this.removed?this:(d.constructor==h.st.constructor&&(d=d[d.length-1]),d.node.nextSibling?d.node.parentNode.insertBefore(this.node,d.node.nextSibling):d.node.parentNode.appendChild(this.node),h._insertafter(this,d,this.paper),this)},mt.insertBefore=function(d){return this.removed?this:(d.constructor==h.st.constructor&&(d=d[0]),d.node.parentNode.insertBefore(this.node,d.node),h._insertbefore(this,d,this.paper),this)},mt.blur=function(d){var c=this.node.runtimeStyle,y=c.filter;return y=y.replace(dt,M),+d!=0?(this.attrs.blur=d,c.filter=y+U+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+d||1.5)+")",c.margin=h.format("-{0}px 0 0 -{0}px",V(+d||1.5))):(c.filter=y,c.margin=0,delete this.attrs.blur),this},h._engine.path=function(d,c){var y=rt("shape");y.style.cssText=et,y.coordsize=ot+U+ot,y.coordorigin=c.coordorigin;var S=new ft(y,c),_={fill:"none",stroke:"#000"};d&&(_.path=d),S.type="path",S.path=[],S.Path=M,Lt(S,_),c.canvas&&c.canvas.appendChild(y);var N=rt("skew");return N.on=!0,y.appendChild(N),S.skew=N,S.transform(M),S},h._engine.rect=function(d,c,y,S,_,N){var z=h._rectPath(c,y,S,_,N),L=d.path(z),G=L.attrs;return L.X=G.x=c,L.Y=G.y=y,L.W=G.width=S,L.H=G.height=_,G.r=N,G.path=z,L.type="rect",L},h._engine.ellipse=function(d,c,y,S,_){var N=d.path();return N.attrs,N.X=c-S,N.Y=y-_,N.W=2*S,N.H=2*_,N.type="ellipse",Lt(N,{cx:c,cy:y,rx:S,ry:_}),N},h._engine.circle=function(d,c,y,S){var _=d.path();return _.attrs,_.X=c-S,_.Y=y-S,_.W=_.H=2*S,_.type="circle",Lt(_,{cx:c,cy:y,r:S}),_},h._engine.image=function(d,c,y,S,_,N){var z=h._rectPath(y,S,_,N),L=d.path(z).attr({stroke:"none"}),G=L.attrs,q=L.node,it=q.getElementsByTagName("fill")[0];return G.src=c,L.X=G.x=y,L.Y=G.y=S,L.W=G.width=_,L.H=G.height=N,G.path=z,L.type="image",it.parentNode==q&&q.removeChild(it),it.rotate=!0,it.src=c,it.type="tile",L._.fillpos=[y,S],L._.fillsize=[_,N],q.appendChild(it),nt(L,1,1,0,0,0),L},h._engine.text=function(d,c,y,S){var _=rt("shape"),N=rt("path"),z=rt("textpath");c=c||0,y=y||0,S=S||"",N.v=h.format("m{0},{1}l{2},{1}",V(c*ot),V(y*ot),V(c*ot)+1),N.textpathok=!0,z.string=k(S),z.on=!0,_.style.cssText=et,_.coordsize=ot+U+ot,_.coordorigin="0 0";var L=new ft(_,d),G={fill:"#000",stroke:"none",font:h._availableAttrs.font,text:S};L.shape=_,L.path=N,L.textpath=z,L.type="text",L.attrs.text=k(S),L.attrs.x=c,L.attrs.y=y,L.attrs.w=1,L.attrs.h=1,Lt(L,G),_.appendChild(z),_.appendChild(N),d.canvas.appendChild(_);var q=rt("skew");return q.on=!0,_.appendChild(q),L.skew=q,L.transform(M),L},h._engine.setSize=function(d,c){var y=this.canvas.style;return this.width=d,this.height=c,d==+d&&(d+="px"),c==+c&&(c+="px"),y.width=d,y.height=c,y.clip="rect(0 "+d+" "+c+" 0)",this._viewBox&&h._engine.setViewBox.apply(this,this._viewBox),this},h._engine.setViewBox=function(d,c,y,S,_){h.eve("raphael.setViewBox",this,this._viewBox,[d,c,y,S,_]);var N,z,L=this.getSize(),G=L.width,q=L.height;return _&&(y*(N=q/S)<G&&(d-=(G-y*N)/2/N),S*(z=G/y)<q&&(c-=(q-S*z)/2/z)),this._viewBox=[d,c,y,S,!!_],this._viewBoxShift={dx:-d,dy:-c,scale:L},this.forEach(function(it){it.transform("...")}),this},h._engine.initWin=function(d){var c=d.document;c.styleSheets.length<31?c.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):c.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!c.namespaces.rvml&&c.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),rt=function(y){return c.createElement("<rvml:"+y+' class="rvml">')}}catch{rt=function(S){return c.createElement("<"+S+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},h._engine.initWin(h._g.win),h._engine.create=function(){var d=h._getContainer.apply(0,arguments),c=d.container,y=d.height,S=d.width,_=d.x,N=d.y;if(!c)throw new Error("VML container not found.");var z=new h._Paper,L=z.canvas=h._g.doc.createElement("div"),G=L.style;return _=_||0,N=N||0,S=S||512,y=y||342,z.width=S,z.height=y,S==+S&&(S+="px"),y==+y&&(y+="px"),z.coordsize=216e5+U+216e5,z.coordorigin="0 0",z.span=h._g.doc.createElement("span"),z.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",L.appendChild(z.span),G.cssText=h.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",S,y),c==1?(h._g.doc.body.appendChild(L),G.left=_+"px",G.top=N+"px",G.position="absolute"):c.firstChild?c.insertBefore(L,c.firstChild):c.appendChild(L),z.renderfix=function(){},z},h.prototype.clear=function(){h.eve("raphael.clear",this),this.canvas.innerHTML=M,this.span=h._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},h.prototype.remove=function(){for(var d in h.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[d]=typeof this[d]=="function"?h._removedFactory(d):null;return!0};var jt=h.st;for(var f in mt)mt[o](f)&&!jt[o](f)&&(jt[f]=function(d){return function(){var c=arguments;return this.forEach(function(y){y[d].apply(y,c)})}}(f))}}.apply(a,g))===void 0||(r.exports=w)}])})})(Xi);var ur=Xi.exports;const Gi=Yi(ur);var Ht=(B=>(B[B.root=0]="root",B[B.firstLevel=1]="firstLevel",B[B.grandchild=2]="grandchild",B))(Ht||{});function ae(B){return B===0?0:B===1?1:2}function ri(){function B(){return((1+Math.random())*65536|0).toString(16).substring(1)}return`${B()}${B()}-${B()}${B()}${B()}`}const pr=function(){let B=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(B=!0)}(navigator.userAgent||navigator.vendor||window.opera),B},Rt=pr(),fr=()=>navigator.platform.indexOf("Win")>-1,Vi="mindmap-graph";class gr{constructor(e){b(this,"containerDom");b(this,"wrapperDom");b(this,"svgDom");b(this,"paper");const r=this.initGraphElement(e);this.containerDom=r.containerDom,this.wrapperDom=r.wrapperDom;const{clientWidth:a,clientHeight:u}=this.wrapperDom;this.paper=new Gi(this.wrapperDom,a,u),this.svgDom=document.querySelector("svg")||null}getPaper(){return this.paper}getWrapperDom(){return this.wrapperDom}getContainerDom(){return this.containerDom}getSvgDom(){return this.svgDom}getSize(){return{width:this.wrapperDom.clientWidth,height:this.wrapperDom.clientHeight}}clear(){this.paper.clear(),this.wrapperDom.remove()}initGraphElement(e){const r=typeof e=="string"?document.querySelector(e):e;if(!r)throw new Error("container is not exist");if(r.clientWidth===0||r.clientHeight===0)throw new Error("The width or height of Container is not more than 0");const a=document.createElement("div");a.className="mindmap-graph-background";const u=document.createElement("div");return u.className=`${Vi}${Rt?" mobile":""}`,r.appendChild(u),r.appendChild(a),{containerDom:r,wrapperDom:u}}}var wt=(B=>(B[B.LEFT=-1]="LEFT",B[B.NONE=0]="NONE",B[B.RIGHT=1]="RIGHT",B))(wt||{});const vr=40,mr=25,yr=24,xr=15;function si(B){return ae(B)===Ht.firstLevel?mr:xr}function Wi(B){return ae(B)===Ht.firstLevel?vr:yr}class br{constructor(){b(this,"areaHeightMap",{})}getAreaHeight(e,r){const a=e.getBBox().height;if(!e.isExpand)return a;const u=`${e.id}_${r}`;if(this.areaHeightMap[u])return this.areaHeightMap[u];let g=0;const w=e.getDirectionChildren(r);return w.length===0?g=a:(g=this.getChildrenAreaHeight(w,r),g=Math.max(g,a)),this.areaHeightMap[e.id]=g,g}getChildrenAreaHeight(e,r){if(e.length===0)return 0;const a=e.reduce((g,w)=>{const h=this.getAreaHeight(w,r);return g+h},0),u=si(e[0].depth+1);return a+(e.length-1)*u}}class ni{constructor(e){b(this,"root");this.root=e===void 0?null:e}init(e){this.root=e}reset(e){if(!this.root)throw new Error("Position is called without root.");const r=new br;e===wt.LEFT||e===wt.RIGHT?this.resetInner({node:this.root,direction:e,areaHeightHandler:r}):(this.resetInner({node:this.root,direction:wt.LEFT,areaHeightHandler:r}),this.resetInner({node:this.root,direction:wt.RIGHT,areaHeightHandler:r}))}resetInner({node:e,direction:r,areaHeightHandler:a}){if(!e.isExpand)return;const u=e.depth+1,g=si(u),w=e.getDirectionChildren(r),h=e.getBBox(),o=a.getChildrenAreaHeight(w,r);let k=h.cy-o/2;w.forEach(C=>{const X=a.getAreaHeight(C,r),V=C.getBBox(),J=Wi(u),K=r===wt.RIGHT?h.x2+J:h.x-J-V.width,j=k+X/2-V.height/2;C.translateTo(K,j),this.resetInner({node:C,direction:r,areaHeightHandler:a}),k+=X+g})}}class wr{constructor({root:e,position:r,createNode:a}){b(this,"root");b(this,"position");b(this,"createNode");this.root=e,this.position=r,this.createNode=a}render(e){e&&(this.renderWithRelativeNode({nodeDataMap:e,sourceId:this.root.id,relativeNode:this.root,depth:0}),this.position.reset())}renderWithRelativeNode({nodeDataMap:e,sourceId:r,relativeNode:a,depth:u}){const g=a,w=e[r];w.label!==g.label&&g.setLabel(w.label,!1),w.isExpand!==g.isExpand&&g.changeExpand(w.isExpand,!1);const h=g.children;return g.clearChild(),w.children.forEach(o=>{if(!e[o])return;const C=h.findIndex(J=>J.id===o);let X=null;C>-1&&(X=h.splice(C,1)[0]);const V=X!==null?this.renderWithRelativeNode({nodeDataMap:e,sourceId:o,relativeNode:X,depth:u+1}):this.renderNew({nodeDataMap:e,sourceId:o,depth:u+1,father:g});g.pushChild(V)}),h.forEach(o=>{o.remove()}),g}renderNew({nodeDataMap:e,sourceId:r,depth:a,father:u}){const g=e[r],w=this.createNode({id:r,depth:a,label:g.label,direction:g.direction,father:u,isExpand:g.isExpand,imageData:g.imageData,link:g.link});return g.children.forEach(h=>{if(!e[h])return;const k=this.renderNew({nodeDataMap:e,sourceId:h,depth:a+1,father:w});w.pushChild(k)}),w}}class Sr{constructor({data:e,viewport:r,nodeCreator:a}){b(this,"root");b(this,"position");b(this,"treeRenderer");b(this,"nodeCreator");this.nodeCreator=a,this.root=this.createRoot(e,r),this.position=new ni(this.root),this.treeRenderer=new wr({root:this.root,position:this.position,createNode:a.createNode}),this.render(e)}getRoot(){return this.root}clear(){this.root.remove()}render(e){this.treeRenderer.render(e)}createRoot(e={},r){let a=Object.keys(e).find(X=>e[X].isRoot===!0);const u=e[a],g=this.nodeCreator.createNode({id:a,depth:0,label:u.label,direction:u.direction}),{width:w,height:h}=r.getViewbox(),o=g.getBBox(),k=(w-o.width)/2,C=(h-o.height)/2;return g.translateTo(k,C),g}}class Er{constructor({position:e,selection:r,dataProxy:a,createNode:u}){b(this,"position");b(this,"selection");b(this,"dataProxy");b(this,"createNode");b(this,"changeFather",({newFather:e,direction:r,nodes:a,childIndex:u})=>{this.dataProxy.addSnapshot();const g=a.map(h=>this.cloneNode(h,e,r)),w=u===void 0?e.getDirectionChildren(r).length:u;e.spliceChild(w,0,r,g),e.changeExpand(!0),a.forEach(h=>h.remove()),this.selection.select(g),this.position.reset(),this.dataProxy.resetData()});this.position=e,this.selection=r,this.dataProxy=a,this.createNode=u}cloneNode(e,r,a){const u=this.createNode({id:ri(),depth:r.depth+1,label:e.label,direction:a,father:r,isExpand:e.isExpand,imageData:e.imageData||void 0,link:e.link});return e.children.forEach(g=>{const w=this.cloneNode(g,u,a);u.pushChild(w)}),u}}const Ci="Main Topic",Ni="Subtopic";class kr{constructor({root:e,selection:r,dataProxy:a,nodeCreator:u}){b(this,"position");b(this,"selection");b(this,"dataProxy");b(this,"nodeCreator");b(this,"changeFatherOperation");b(this,"changeFather",e=>{this.changeFatherOperation.changeFather(e)});this.position=new ni(e),this.dataProxy=a,this.selection=r,this.nodeCreator=u,this.changeFatherOperation=new Er({position:this.position,selection:r,dataProxy:a,createNode:this.nodeCreator.createNode})}addChildNode(){var g;const e=this.selection.getSingleSelectNode();if(!e)return;let r=e.direction;if(e.isRoot()){const w=(g=e.children)==null?void 0:g.reduce((h,o)=>(o.direction===wt.LEFT?h[0]+=1:h[1]+=1,h),[0,0]);r=w[1]>w[0]?wt.LEFT:wt.RIGHT}const a=e.depth+1,u=this.nodeCreator.createNode({depth:a,label:ae(a)===Ht.firstLevel?Ci:Ni,direction:r,father:e});this.dataProxy.addSnapshot(),e.pushChild(u),e.changeExpand(!0),this.position.reset(r),this.selection.select([u]),this.dataProxy.resetData()}addBrotherNode(){const e=this.selection.getSingleSelectNode();if(!e)return;if(e.isRoot()){this.addChildNode();return}const r=e.direction,a=e.father,u=e.depth,g=this.nodeCreator.createNode({depth:u,label:ae(u)===Ht.firstLevel?Ci:Ni,direction:r,father:a});this.dataProxy.addSnapshot(),a.insertAfterChild(e,g),this.position.reset(r),this.selection.select([g]),this.dataProxy.resetData()}removeNode(){const e=this.selection.getTopNodes();if(e.length===0)return;const r=this.selection.getRemoveNextNode();this.dataProxy.addSnapshot(),e.forEach(a=>{a.remove()}),this.position.reset(),this.selection.select(r!==null?[r]:[]),this.dataProxy.resetData()}}var ji={exports:{}};(function(B){var e=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function u(o,k,C){this.fn=o,this.context=k,this.once=C||!1}function g(o,k,C,X,V){if(typeof C!="function")throw new TypeError("The listener must be a function");var J=new u(C,X||o,V),K=r?r+k:k;return o._events[K]?o._events[K].fn?o._events[K]=[o._events[K],J]:o._events[K].push(J):(o._events[K]=J,o._eventsCount++),o}function w(o,k){--o._eventsCount===0?o._events=new a:delete o._events[k]}function h(){this._events=new a,this._eventsCount=0}h.prototype.eventNames=function(){var k=[],C,X;if(this._eventsCount===0)return k;for(X in C=this._events)e.call(C,X)&&k.push(r?X.slice(1):X);return Object.getOwnPropertySymbols?k.concat(Object.getOwnPropertySymbols(C)):k},h.prototype.listeners=function(k){var C=r?r+k:k,X=this._events[C];if(!X)return[];if(X.fn)return[X.fn];for(var V=0,J=X.length,K=new Array(J);V<J;V++)K[V]=X[V].fn;return K},h.prototype.listenerCount=function(k){var C=r?r+k:k,X=this._events[C];return X?X.fn?1:X.length:0},h.prototype.emit=function(k,C,X,V,J,K){var j=r?r+k:k;if(!this._events[j])return!1;var tt=this._events[j],bt=arguments.length,U,M;if(tt.fn){switch(tt.once&&this.removeListener(k,tt.fn,void 0,!0),bt){case 1:return tt.fn.call(tt.context),!0;case 2:return tt.fn.call(tt.context,C),!0;case 3:return tt.fn.call(tt.context,C,X),!0;case 4:return tt.fn.call(tt.context,C,X,V),!0;case 5:return tt.fn.call(tt.context,C,X,V,J),!0;case 6:return tt.fn.call(tt.context,C,X,V,J,K),!0}for(M=1,U=new Array(bt-1);M<bt;M++)U[M-1]=arguments[M];tt.fn.apply(tt.context,U)}else{var ct=tt.length,st;for(M=0;M<ct;M++)switch(tt[M].once&&this.removeListener(k,tt[M].fn,void 0,!0),bt){case 1:tt[M].fn.call(tt[M].context);break;case 2:tt[M].fn.call(tt[M].context,C);break;case 3:tt[M].fn.call(tt[M].context,C,X);break;case 4:tt[M].fn.call(tt[M].context,C,X,V);break;default:if(!U)for(st=1,U=new Array(bt-1);st<bt;st++)U[st-1]=arguments[st];tt[M].fn.apply(tt[M].context,U)}}return!0},h.prototype.on=function(k,C,X){return g(this,k,C,X,!1)},h.prototype.once=function(k,C,X){return g(this,k,C,X,!0)},h.prototype.removeListener=function(k,C,X,V){var J=r?r+k:k;if(!this._events[J])return this;if(!C)return w(this,J),this;var K=this._events[J];if(K.fn)K.fn===C&&(!V||K.once)&&(!X||K.context===X)&&w(this,J);else{for(var j=0,tt=[],bt=K.length;j<bt;j++)(K[j].fn!==C||V&&!K[j].once||X&&K[j].context!==X)&&tt.push(K[j]);tt.length?this._events[J]=tt.length===1?tt[0]:tt:w(this,J)}return this},h.prototype.removeAllListeners=function(k){var C;return k?(C=r?r+k:k,this._events[C]&&w(this,C)):(this._events=new a,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=r,h.EventEmitter=h,B.exports=h})(ji);var _r=ji.exports;const Se=Yi(_r);class qi{constructor(e){b(this,"eventArgs",{});this.shape=e}on(e,...r){e&&(this.eventArgs[e]===void 0&&(this.eventArgs[e]=[]),this.eventArgs[e].push(r),this.shape[e](...r))}removeAllListeners(){Object.keys(this.eventArgs).forEach(r=>{const a=this.eventArgs[r];a==null||a.forEach(u=>{this.shape[`un${r}`](...u)})})}}const Te=Rt?7:5,Oe=Te*.6,ti=Rt?3:2,Bi=Te*2+ti+3;class Cr{constructor({paper:e,nodeBBox:r,isExpand:a,direction:u}){b(this,"paper");b(this,"circleShape");b(this,"horizontalShape");b(this,"verticalShape");b(this,"shapeSet");b(this,"shapeEventEmitter");b(this,"isExpand");this.paper=e,this.isExpand=a,this.shapeSet=e.set();const{x:g,y:w}=this.getPosition(r,u);this.circleShape=e.circle(g,w,Te),this.circleShape.attr({fill:"#fff","fill-opacity":1}),this.circleShape.node.style.cursor="pointer";const{cx:h,cy:o}=this.circleShape.getBBox();this.horizontalShape=e.path([`M${h-Oe} ${o}`,`L${h+Oe} ${o}`].join(" ")),this.verticalShape=this.paper.path([`M${h} ${o-Oe}`,`L${h} ${o+Oe}`].join(" ")),this.shapeSet.push(this.circleShape).push(this.horizontalShape).push(this.verticalShape),a&&this.verticalShape.hide(),this.shapeSet.attr({stroke:"#000","stroke-opacity":.7}),this.shapeSet.toFront(),this.shapeEventEmitter=new qi(this.shapeSet),this.initHover()}on(e,...r){this.shapeEventEmitter.on(e,...r)}changeExpand(e){this.isExpand!==e&&(e?this.verticalShape.hide():this.verticalShape.show(),this.isExpand=e)}translateTo(e,r){const{x:a,y:u}=this.getPosition(e,r),{cx:g,cy:w}=this.getBBox(),h=a-g,o=u-w;h===0&&o===0||this.shapeSet.translate(h,o)}getBBox(){return this.circleShape.getBBox()}remove(){this.shapeSet.remove(),this.shapeEventEmitter.removeAllListeners()}setStyle(e){switch(e){case"disable":{this.setStyle("base"),this.shapeSet.attr({opacity:.4});break}case"hover":{this.setStyle("base"),this.circleShape.attr({fill:"#E7E7E7","fill-opacity":1});break}case"base":default:{this.shapeSet.attr({opacity:1}),this.circleShape.attr({fill:"#fff","fill-opacity":1});break}}}getPosition(e,r){let a=0;const u=e.cy;return r===wt.RIGHT?a=e.x2+Te+ti:a=e.x-Te-ti,{x:a,y:u}}initHover(){this.shapeEventEmitter.on("hover",()=>{this.setStyle("hover")},()=>{this.setStyle("base")})}}class Nr{constructor({paper:e,position:r,node:a,nodeShape:u,isExpand:g,traverse:w}){b(this,"paper");b(this,"position");b(this,"node");b(this,"nodeShape");b(this,"eventEmitter");b(this,"traverse");b(this,"expanderShape",null);b(this,"isExpand");this.paper=e,this.position=r,this.node=a,this.nodeShape=u,this.isExpand=g,this.traverse=w,this.eventEmitter=new Se}getIsExpand(){return this.isExpand}changeExpand(e,r=!0){var a;if(this.isExpand!==e){if(this.node.children.length===0){this.remove();return}(a=this.expanderShape)==null||a.changeExpand(e),this.isExpand=e,e||this.node.children.forEach(u=>{this.traverse(u,this.hideNode)}),r&&this.position.reset(this.node.direction)}}create(){this.createShape(),this.translateShape()}remove(){var e;(e=this.expanderShape)==null||e.remove(),this.expanderShape=null,this.eventEmitter.removeAllListeners()}on(e,r){this.eventEmitter.on(e,r)}setStyle(e){var r;(r=this.expanderShape)==null||r.setStyle(e)}createShape(){var r;if(this.node.isRoot()||this.expanderShape!==null||this.node.children.length===0||this.nodeShape.getIsHide())return;this.expanderShape=new Cr({paper:this.paper,nodeBBox:this.node.getBBox(),isExpand:this.isExpand,direction:this.node.direction});const e=Rt?"touchstart":"mousedown";(r=this.expanderShape)==null||r.on(e,a=>{a.stopPropagation();const u=!this.isExpand;this.changeExpand(u),this.eventEmitter.emit("mousedownExpander",u)})}translateShape(){var e;(e=this.expanderShape)==null||e.translateTo(this.node.getBBox(),this.node.direction)}hideNode({nodeShape:e,expander:r,removeEdgeShape:a}){e.hide(),r.remove(),a()}}const Ki=({paper:B,sourceBBox:e,targetBBox:r,direction:a})=>{const u=e.cx,g=e.cy,w=a===wt.LEFT?r.x2:r.x,h=r.cy,o=.8,k=.2,C=w-o*(w-u),X=h-k*(h-g);return B.path(`M${u} ${g}Q${C} ${X} ${w} ${h}`)},Ui=({paper:B,sourceBBox:e,targetBBox:r,direction:a,targetDepth:u,hasUnder:g=!1})=>{let w=0,h=0,o=0,k=0,C=0,X=0,V=0,J=0;a===wt.RIGHT?(w=e.x2,o=w+Bi,C=r.x,V=r.x2):(w=e.x,o=w-Bi,C=r.x2,V=r.x),u===2?h=e.cy:h=e.y2,k=h,X=g?r.y2:r.cy,J=X;const K=Br(o,k,C,X);let j=`M${w} ${h} L${o} ${k} ${K}`;return g&&(j+=` M ${C} ${X} L${V} ${J}`),B.path(j)},Br=(B,e,r,a)=>{const w=B+.3*(r-B),h=e+.76*(a-e),o=.5,k=0,C=r-o*(r-B),X=a-k*(a-e);return`M${B} ${e}C${w} ${h} ${C} ${X} ${r} ${a}`},Lr=55,Dr=14,Qe=50,Li=13,Di=3;class Ti{constructor({paper:e,sourceBBox:r,targetBBox1:a,targetBBox2:u,targetDepth:g,direction:w}){b(this,"paper");b(this,"shapeSet");this.paper=e;const h=a||u,o=g===1?Lr:Dr;let k=0;if(h!==null)k=w===wt.RIGHT?h.x:h.x2-Qe;else{const K=Wi(g);k=w===wt.RIGHT?r.x2+K:r.x-K-Qe}let C=0;a!==null&&u!==null?C=(u.y+a.y2)/2:a!==null&&u===null?(C=a.y2+o,g>1&&(C+=Di)):a===null&&u!==null?(C=u.y-o,g>1&&(C+=Di)):C=r.cy;const X=C-Li/2,V=this.drawRect({x:k,y:X}),J=this.drawPath({sourceBBox:r,targetBBox:V.getBBox(),targetDepth:g,direction:w});this.shapeSet=e.set().push(V).push(J)}remove(){this.shapeSet.remove()}drawRect({x:e,y:r}){const a=this.paper.rect(e,r,Qe,Li,6);return a.attr({fill:"#E74C3C","stroke-opacity":0,opacity:.8}),a}drawPath({sourceBBox:e,targetBBox:r,targetDepth:a,direction:u}){const g=a===1?Ki({paper:this.paper,sourceBBox:e,targetBBox:r,direction:u}):Ui({paper:this.paper,sourceBBox:e,targetBBox:r,direction:u,targetDepth:a});return g.attr({stroke:"#E74C3C","stroke-width":2,opacity:.6}),g}}class Tr{constructor(e,r){b(this,"shape",null);this.paper=e,this.node=r}draw(e){var r,a,u;if((r=this.shape)==null||r.remove(),e===null)this.shape=null;else{const{father:g,childIndex:w,isOwnArea:h,direction:o}=e,k=this.node.getBBox(),C=g.getBBox();if(h)this.shape=new Ti({paper:this.paper,sourceBBox:C,targetBBox1:k,targetBBox2:k,targetDepth:g.depth+1,direction:o});else{const X=g.getDirectionChildren(o);let V=((a=X[w-1])==null?void 0:a.getBBox())||null,J=((u=X[w])==null?void 0:u.getBBox())||null;g.isExpand||(V=null,J=null),this.shape=new Ti({paper:this.paper,sourceBBox:C,targetBBox1:V,targetBBox2:J,targetDepth:g.depth+1,direction:o})}g.isRoot()&&g.nodeShapeToFront()}}clear(){var e;(e=this.shape)==null||e.remove(),this.shape=null}}let ei={isDebug:!1};const Ir=B=>{ei={...ei,...B}},Ii=()=>ei;class Mr{constructor(e){b(this,"shapeSet",null);this.paper=e}draw(e){const{isDebug:r}=Ii();r&&(this.shapeSet=this.paper.set(),e.forEach(({node:a,areaBox:u,childrenYList:g})=>{var V,J;let w="green";a.children.length===0?w="red":a.depth===0&&(w="orange");const{x:h,y:o,x2:k,y2:C}=u,X=this.paper.rect(h,o,k-h,C-o).attr({"stroke-opacity":0,fill:w,opacity:.2});(V=this.shapeSet)==null||V.push(X),g==null||g.forEach(K=>{var tt;const j=this.paper.path(`M${h} ${K}L${k} ${K}`).attr({stroke:w,opacity:.6});(tt=this.shapeSet)==null||tt.push(j)}),(J=this.shapeSet)==null||J.toBack()}))}clear(){var r;const{isDebug:e}=Ii();e&&((r=this.shapeSet)==null||r.remove())}}const Rr=80,Mi=100;class Ar{constructor(e,r){b(this,"root");b(this,"drawDragArea",null);b(this,"dragTemp");b(this,"areaList",[]);b(this,"hitArea",null);this.node=r,this.dragTemp=new Tr(e,r),this.drawDragArea=new Mr(e),this.root=r.getRoot()}drawTemp(e,r){const a=this.getHitArea(e,r);this.isSameHitArea(this.hitArea,a)||(this.dragTemp.draw(a),this.hitArea=a)}init(){var e;this.areaList=this.getAreaList(this.root),(e=this.drawDragArea)==null||e.draw(this.areaList)}clear(){var e;this.areaList=[],(e=this.drawDragArea)==null||e.clear(),this.dragTemp.clear()}getCurrentHitArea(){return this.hitArea}getHitArea(e,r){for(let a=0;a<this.areaList.length;a++){const{node:u,areaBox:g,childrenYList:w,direction:h}=this.areaList[a];if(e>=g.x&&e<=g.x2&&r>=g.y&&r<=g.y2){if(!w||w.length===0||u.isExpand===!1)return{father:u,childIndex:0,isOwnArea:this.isOwnArea(u,0,h),direction:h};for(let o=0;o<w.length-1;o++)if(r>=w[o]&&r<w[o+1])return{father:u,childIndex:o,isOwnArea:this.isOwnArea(u,o,h),direction:h}}}return null}isOwnArea(e,r,a){var w,h;const u=(w=this.node.father)==null?void 0:w.getDirectionChildren(a),g=u==null?void 0:u.findIndex(o=>o.id===this.node.id);return(e==null?void 0:e.id)===((h=this.node.father)==null?void 0:h.id)&&g!==void 0&&g>-1&&(r===g||r===g+1)}isSameHitArea(e,r){return(e==null?void 0:e.father.id)===(r==null?void 0:r.father.id)&&(e==null?void 0:e.childIndex)===(r==null?void 0:r.childIndex)&&(e==null?void 0:e.direction)===(r==null?void 0:r.direction)}getAreaList(e){var u;const r=[],a=[{node:e,direction:wt.RIGHT},{node:e,direction:wt.LEFT}];for(;a.length>0;){const g=a.length;for(let w=0;w<g;w++){const{node:h,direction:o}=a.shift();if(this.node.id===h.id||((u=h.father)==null?void 0:u.isExpand)===!1)continue;const k=this.getArea(h,o);r.unshift(k),h.getDirectionChildren(o).forEach(C=>a.push({node:C,direction:o}))}}return r}getArea(e,r){const a={x:0,y:0,x2:0,y2:0},u=e.getBBox(),g=e.getDirectionChildren(r);let w=0,h=0;if(g.length===0||!e.isExpand)w=u.y,h=u.y2;else{const X=g[0],V=g[g.length-1];w=X.getBBox().y,h=V.getBBox().y2}const o=this.getNodeYGap(e);w-=o,h+=o;const k=this.getChildBoundaryX(e,r);a.y=w,a.y2=h,e.isRoot()?(a.x=r===wt.RIGHT?u.cx:k,a.x2=r===wt.RIGHT?k:u.cx):(a.x=r===wt.RIGHT?u.x2:k,a.x2=r===wt.RIGHT?k:u.x);const C=this.getChildrenYList(g,a);return{node:e,areaBox:a,direction:r,childrenYList:C}}getChildrenYList(e,r){const a=[r.y];return e.forEach(u=>{const g=u.getBBox();a.push(g.cy)}),a.push(r.y2),a}getNodeYGap(e){const r=e.isRoot()?Rr:0;return(si(e.depth)+r)/2}getChildBoundaryX(e,r){const a=e.getDirectionChildren(r);if(a.length===0||e.isExpand===!1){const h=e.getBBox();return r===wt.RIGHT?h.x2+Mi:h.x-Mi}let u=a[0],g=u.getBBox().width;for(let h=1;h<a.length;h++){const o=a[h],k=o.getBBox();k.width>g&&(g=k.width,u=o)}const w=u.getBBox();return r===wt.RIGHT?w.x2:w.x}}class Pr{constructor(e){b(this,"clonedNodeShape",null);this.originNodeShape=e}init(){this.clonedNodeShape=this.originNodeShape.clone(),this.clonedNodeShape.setStyle("disable")}translate(e,r){var a;(a=this.clonedNodeShape)==null||a.translate(e,r)}clear(){var e;(e=this.clonedNodeShape)==null||e.remove()}}const Ri=2;class zr{constructor({paper:e,node:r,nodeShape:a,viewport:u,traverse:g}){b(this,"node");b(this,"viewport");b(this,"paper");b(this,"dragArea");b(this,"dragClonedNode");b(this,"eventEmitter");b(this,"hitFather",null);b(this,"traverse");b(this,"isStart",!1);b(this,"isMoveInited",!1);b(this,"startX",0);b(this,"startY",0);b(this,"lastDx",0);b(this,"lastDy",0);b(this,"styleTypeMap",{});b(this,"start",(e,r,a)=>{a.stopPropagation(),this.isStart=!0;const u=this.viewport.getViewportPosition(e,r);this.startX=u.x,this.startY=u.y});b(this,"move",(e,r)=>{var w,h;const a=this.viewport.getScale(),u=e/a,g=r/a;if(this.isStart){if(!this.isMoveInited&&(Math.abs(e)>Ri||Math.abs(r)>Ri)&&(this.dragArea.init(),this.dragClonedNode.init(),this.dragClonedNode.translate(this.lastDx,this.lastDy),this.traverse(this.node,({node:o,nodeShape:k,expander:C,edgeShape:X})=>{this.styleTypeMap[o.id]=k.getStyle(),k.setStyle("disable"),C.setStyle("disable"),X==null||X.setStyle("disable")}),document.body.style.cursor="grabbing",this.isMoveInited=!0),this.isMoveInited){const o=this.startX+u,k=this.startY+g;this.dragArea.drawTemp(o,k);const C=u-this.lastDx,X=g-this.lastDy;this.dragClonedNode.translate(C,X);const V=this.dragArea.getCurrentHitArea();(V==null?void 0:V.father.id)!==((w=this.hitFather)==null?void 0:w.id)&&(V==null||V.father.setStyle("overlay"),(h=this.hitFather)==null||h.setStyle("base")),this.hitFather=(V==null?void 0:V.father)||null}this.lastDx=u,this.lastDy=g}});b(this,"end",()=>{var r;if(this.isStart=!1,this.startX=0,this.startY=0,!this.isMoveInited)return;this.isMoveInited=!1,this.lastDx=0,this.lastDy=0,(r=this.hitFather)==null||r.setStyle("base"),this.hitFather=null;const e=this.dragArea.getCurrentHitArea();this.eventEmitter.emit("dragEnd",e),this.dragArea.clear(),this.dragClonedNode.clear(),document.body.style.cursor="default",this.traverse(this.node,({node:a,nodeShape:u,expander:g,edgeShape:w})=>{const h=this.styleTypeMap[a.id];u.setStyle(h),g.setStyle("base"),w==null||w.setStyle("base")}),this.styleTypeMap={}});this.paper=e,this.node=r,this.viewport=u,this.traverse=g,this.dragArea=new Ar(this.paper,r),this.dragClonedNode=new Pr(a),this.eventEmitter=new Se,Rt||a.on("drag",this.move,this.start,this.end)}clear(){this.eventEmitter.removeAllListeners()}on(e,r){this.eventEmitter.on(e,r)}}const Hr={"font-size":16,fill:"#000",opacity:1},Fr={"fill-opacity":0,stroke:"#808080","stroke-opacity":1,opacity:1},Or={stroke:"#fff","stroke-width":2,fill:"#fff","fill-opacity":0,opacity:0};class $r{constructor({shapeSet:e,labelShape:r,borderShape:a,rectShape:u,labelBaseAttr:g,rectBaseAttr:w,borderBaseAttr:h}){b(this,"shapeSet");b(this,"borderShape");b(this,"labelShape");b(this,"rectShape");b(this,"labelBaseAttr");b(this,"rectBaseAttr");b(this,"borderBaseAttr");b(this,"styleType","base");this.shapeSet=e,this.labelShape=r,this.borderShape=a,this.rectShape=u,this.labelBaseAttr={...Hr,...g},this.rectBaseAttr={...Fr,...w},this.borderBaseAttr={...Or,...h}}setBaseStyle(){this.labelShape.attr(this.labelBaseAttr),this.borderShape.attr(this.borderBaseAttr),this.rectShape.attr(this.rectBaseAttr)}setStyle(e){switch(e){case"select":{this.setBaseStyle(),this.borderShape.attr({stroke:"#3498DB",opacity:1});break}case"overlay":{this.setBaseStyle(),this.borderShape.attr({stroke:"#E74C3C",opacity:.8});break}case"disable":{this.shapeSet.attr({opacity:.4});break}case"hover":{this.setBaseStyle(),this.borderShape.attr({stroke:"#3498DB",opacity:.5});break}case"base":default:{this.setBaseStyle();break}}this.styleType=e}getStyle(){return this.styleType}getBaseAttr(){return{labelBaseAttr:this.labelBaseAttr,borderBaseAttr:this.borderBaseAttr,rectBaseAttr:this.rectBaseAttr}}}const Ai=-999999,Pi=-999999,Yr=40,Xr=37,$e=6;class Ie{constructor({paper:e,x:r,y:a,label:u,paddingWidth:g=Yr,rectHeight:w=Xr,labelBaseAttr:h,rectBaseAttr:o,borderBaseAttr:k,imageData:C,link:X}){b(this,"paper");b(this,"shapeSet");b(this,"borderShape");b(this,"labelShape");b(this,"rectShape");b(this,"imageShape",null);b(this,"paddingWidth");b(this,"rectHeight");b(this,"shapeEventEmitter");b(this,"nodeShapeStyle");b(this,"imageData",null);b(this,"label");b(this,"isHide",!1);b(this,"isHoverInCalled",!1);this.paper=e,this.label=u,this.paddingWidth=g,this.rectHeight=w;const V=r!==void 0&&a!==void 0,J=V?r:Ai,K=V?a:Pi;if(this.labelShape=e.text(J,K,u),this.borderShape=e.rect(J,K,0,0,4),this.rectShape=e.rect(J,K,0,0,4),this.shapeSet=e.set().push(this.labelShape).push(this.borderShape).push(this.rectShape),C&&(this.imageShape=e.image(C.src,J,K,C.width,C.height),this.shapeSet.push(this.imageShape)),this.imageData=C||null,X){const j=Rt?"touchstart":"mousedown";this.labelShape[j](()=>{window.location.href=X}),this.labelShape.attr({stroke:"#3498DB"}),this.labelShape.node.style.cursor="pointer"}this.nodeShapeStyle=new $r({shapeSet:this.shapeSet,labelShape:this.labelShape,borderShape:this.borderShape,rectShape:this.rectShape,labelBaseAttr:h,rectBaseAttr:o,borderBaseAttr:k}),this.nodeShapeStyle.setBaseStyle(),this.labelShape.toFront(),this.labelShape.node.style["user-select"]="none",this.setPosition(J,K),this.shapeEventEmitter=new qi(this.shapeSet),V||this.hide(),this.initHover()}getBBox(){return this.rectShape.getBBox()}getLabelBBox(){return this.labelShape.getBBox()}setLabel(e,r){const a=this.labelShape.getBBox();this.labelShape.attr({text:e});const u=this.labelShape.getBBox(),g=this.getBBox(),w=u.width-a.width;this.setPosition(g.x,g.y),r!==wt.RIGHT&&r!==wt.LEFT&&this.shapeSet.translate(-w/2,0),this.label=e}translateTo(e,r){const{x:a,y:u}=this.getBBox(),g=e-a,w=r-u;this.show(),!(g===0&&w===0)&&this.shapeSet.translate(g,w)}translate(e,r){this.shapeSet.translate(e,r)}setStyle(e){this.nodeShapeStyle.setStyle(e)}getStyle(){return this.nodeShapeStyle.getStyle()}clone(){const{x:e,y:r}=this.getBBox();return new Ie({paper:this.paper,x:e,y:r,label:this.label,paddingWidth:this.paddingWidth,rectHeight:this.rectHeight,...this.nodeShapeStyle.getBaseAttr()})}remove(){this.shapeSet.remove(),this.shapeEventEmitter.removeAllListeners()}on(e,...r){this.shapeEventEmitter.on(e,...r)}show(){this.shapeSet.show(),this.isHide=!1}hide(){this.shapeSet.hide(),this.isHide=!0}getIsHide(){return this.isHide}toFront(){this.borderShape.toFront(),this.rectShape.toFront(),this.labelShape.toFront()}isInvisible(){const e=this.getBBox();return e.x===Ai&&e.y===Pi}shapeTranslateTo(e,r,a){const{x:u,y:g}=e.getBBox(),w=r-u,h=a-g;w===0&&h===0||e.translate(w,h)}setPosition(e,r){const{labelShape:a,borderShape:u,rectShape:g,imageShape:w,paddingWidth:h,rectHeight:o,imageData:k}=this,C=a.getBBox(),X=o-C.height,V=(k==null?void 0:k.toward)==="right"?a:w,J=(k==null?void 0:k.toward)==="right"?w:a,K={x:0,y:0,width:0,height:0},j=(V==null?void 0:V.getBBox())||K,tt=(J==null?void 0:J.getBBox())||K;let bt=0;w&&(bt=(k==null?void 0:k.gap)!==void 0&&(k==null?void 0:k.gap)>=0?k==null?void 0:k.gap:8);const U=j.width+tt.width+h+bt,M=X+Math.max(j.height,tt.height);g.attr({width:U,height:M}),u.attr({width:U+$e,height:M+$e});const ct=e+h/2,st=r+(M-j.height)/2,dt=ct+j.width+bt,Y=r+(M-tt.height)/2;this.shapeTranslateTo(u,e-$e/2,r-$e/2),V&&this.shapeTranslateTo(V,ct,st),J&&this.shapeTranslateTo(J,dt,Y)}initHover(){Rt||this.shapeEventEmitter.on("hover",()=>{const e=this.nodeShapeStyle.getStyle();e!=="select"&&e!=="disable"&&(this.nodeShapeStyle.setStyle("hover"),this.isHoverInCalled=!0)},()=>{const e=this.nodeShapeStyle.getStyle();this.isHoverInCalled&&e!=="select"&&e!=="disable"&&(this.nodeShapeStyle.setStyle("base"),this.isHoverInCalled=!1)})}}const Zi=16,Gr=40,Vr=37;function Wr(B){return new Ie({...B,labelBaseAttr:{"font-size":Zi},rectBaseAttr:{fill:"#eee","fill-opacity":1,stroke:"#808080","stroke-opacity":0},paddingWidth:Gr,rectHeight:Vr})}const Qi=13,jr=20,qr=21;function Kr(B){return new Ie({...B,labelBaseAttr:{"font-size":Qi},rectBaseAttr:{"stroke-opacity":0},paddingWidth:jr,rectHeight:qr})}const Ji=25,Ur=42,Zr=52;function Qr(B){return new Ie({...B,labelBaseAttr:{"font-size":Ji,fill:"#fff","fill-opacity":1},rectBaseAttr:{fill:"#3F89DE","fill-opacity":1,"stroke-opacity":0},paddingWidth:Ur,rectHeight:Zr})}class Jr{constructor({paper:e,sourceBBox:r,targetBBox:a,direction:u}){b(this,"shape");this.shape=Ki({paper:e,sourceBBox:r,targetBBox:a,direction:u}),this.shape.attr({stroke:"#000","stroke-width":2}),this.shape.toBack()}setStyle(e){switch(e){case"disable":{this.shape.attr({opacity:.4});break}case"base":default:{this.shape.attr({opacity:1});break}}}remove(){this.shape.remove()}}function ts(B){return new Jr(B)}class es{constructor({paper:e,sourceBBox:r,targetBBox:a,direction:u,targetDepth:g}){b(this,"shape");this.shape=Ui({paper:e,sourceBBox:r,targetBBox:a,direction:u,targetDepth:g,hasUnder:!0}),this.shape.attr({stroke:"#000","stroke-width":1.5}),this.shape.toBack()}setStyle(e){switch(e){case"disable":{this.shape.attr({opacity:.4});break}case"base":default:{this.shape.attr({opacity:1});break}}}remove(){this.shape.remove()}}function is(B){return new es(B)}class rs{constructor({paper:e,depth:r,label:a,direction:u,father:g,imageData:w,link:h}){b(this,"paper");b(this,"depth");b(this,"label");b(this,"father",null);b(this,"direction");b(this,"imageData",null);b(this,"link","");this.paper=e,this.depth=r,this.label=a,this.father=g,this.direction=u,this.imageData=w||null,this.link=h||""}createNode(e,r){const{paper:a,depth:u,label:g,imageData:w,link:h}=this,o={paper:a,x:e,y:r,label:g,imageData:w,link:h},k=ae(u);return k===Ht.root?Qr(o):k===Ht.firstLevel?Wr(o):Kr(o)}createEdge(e){const{father:r,direction:a,depth:u}=this;if(!r||!a)return null;const g=ae(u);return g===Ht.firstLevel?ts({paper:this.paper,sourceBBox:r.getBBox(),targetBBox:e.getBBox(),direction:a}):g===Ht.grandchild?is({paper:this.paper,sourceBBox:r.getBBox(),targetBBox:e.getBBox(),direction:a,targetDepth:this.depth}):null}}class ss{constructor({paper:e,id:r,depth:a,label:u,direction:g,x:w,y:h,father:o=null,isExpand:k,viewport:C,imageData:X,link:V}){b(this,"position");b(this,"shapeGenerator");b(this,"_id");b(this,"_depth");b(this,"_direction");b(this,"_father",null);b(this,"nodeShape");b(this,"expander");b(this,"drag",null);b(this,"_imageData",null);b(this,"_link","");b(this,"_label");b(this,"_children");b(this,"edgeShape",null);b(this,"removeEdgeShape",()=>{var e;(e=this.edgeShape)==null||e.remove(),this.edgeShape=null});this._id=r,this._depth=a,this._direction=g,this._father=o||null,this._label=u,this._children=[],this._imageData=X||null,this._link=V||"",this.shapeGenerator=new rs({paper:e,depth:a,label:u,direction:g,father:o,imageData:X,link:V}),this.nodeShape=this.shapeGenerator.createNode(w,h),(w!==void 0||h!==void 0)&&(this.edgeShape=this.shapeGenerator.createEdge(this.nodeShape)),this.isRoot()||(this.drag=new zr({paper:e,node:this,viewport:C,nodeShape:this.nodeShape,traverse:this.traverse})),this.position=new ni(this.getRoot()),this.expander=new Nr({paper:e,position:this.position,node:this,nodeShape:this.nodeShape,isExpand:k===void 0?!0:k,traverse:this.traverse})}get id(){return this._id}get depth(){return this._depth}get direction(){return this._direction}get father(){return this._father}get label(){return this._label}get children(){return this._children}get isExpand(){return this.expander.getIsExpand()}get imageData(){return this._imageData}get link(){return this._link}getDirectionChildren(e){var r;return((r=this.children)==null?void 0:r.filter(a=>a.direction===e))||[]}getBBox(){return this.nodeShape.getBBox()}getLabelBBox(){return this.nodeShape.getLabelBBox()}getDepthType(){return ae(this.depth)}getRoot(){let e=this;for(;e&&e.getDepthType()!==Ht.root;)e=e.father;return e}isRoot(){return this.getDepthType()===Ht.root}on(e,...r){var w;const a=["mousedown","click","dblclick","drag","touchstart"],u=["mousedownExpander"],g=["dragEnd"];if(a.includes(e)){if(e==="drag"&&!this.isRoot())return;this.nodeShape.on(e,...r)}else u.includes(e)?this.expander.on(e,...r):g.includes(e)&&((w=this.drag)==null||w.on(e,...r))}clearChild(){this._children=[]}pushChild(e){this.children.push(e)}insertAfterChild(e,r){const a=this.children.findIndex(u=>u.id===e.id);a>-1&&this.children.splice(a+1,0,r)}spliceChild(e,r,a,u){if(this.isRoot()){let g=-1,w=0,h=0;for(h=0;h<this.children.length;h++)if(this.children[h].direction===a){if(e===w){g=h;break}w++}g===-1&&(g=h),this.children.splice(g,r,...u)}else this.children.splice(e,r,...u)}changeExpand(e,r=!0){e!==void 0&&this.expander.changeExpand(e,r)}translateTo(e,r){var a;this.nodeShape.translateTo(e,r),this.removeEdgeShape(),this.edgeShape=this.shapeGenerator.createEdge(this.nodeShape),(a=this.father)==null||a.expander.create(),this.expander.create()}remove(){var e,r;if(!this.isRoot()){const a=(e=this.father)==null?void 0:e.children;if(!a)return;const u=a==null?void 0:a.findIndex(g=>this.id===g.id);u>-1&&a.splice(u,1),a.length===0&&((r=this.father)==null||r.expander.remove())}this.traverse(this,({node:a})=>{var u;a.nodeShape.remove(),a.removeEdgeShape(),a.expander.remove(),(u=a.drag)==null||u.clear()})}setLabel(e,r=!0){this._label=e,this.nodeShape.setLabel(e,this.direction),r&&this.position.reset(this.direction)}setStyle(e){this.nodeShape.setStyle(e)}nodeShapeToFront(){this.nodeShape.toFront()}isInvisible(){return this.nodeShape.isInvisible()}traverse(e,r){r({node:e,nodeShape:e.nodeShape,expander:e.expander,edgeShape:e.edgeShape,removeEdgeShape:e.removeEdgeShape}),e.children.forEach(a=>this.traverse(a,r))}}const ns=["mousedown","click","dblclick","touchstart","mousedownExpander","dragEnd"];class os{constructor({paper:e,viewport:r}){b(this,"paper");b(this,"viewport");b(this,"eventEmitter");b(this,"createNode",({id:e,depth:r,label:a,direction:u,x:g,y:w,father:h,isExpand:o,imageData:k,link:C})=>{const X=new ss({paper:this.paper,id:e||ri(),depth:r,label:a,direction:u,x:g,y:w,father:h,isExpand:o,viewport:this.viewport,imageData:k,link:C});return ns.forEach(V=>{X.on(V,(...J)=>{this.eventEmitter.emit(V,X,...J)})}),X});this.paper=e,this.viewport=r,this.eventEmitter=new Se}on(e,r){this.eventEmitter.on(e,r)}clear(){this.eventEmitter.removeAllListeners()}}class as{constructor({nodeCreator:e,selection:r,textEditor:a,dataProxy:u,treeOperation:g}){const w=Rt?"touchstart":"mousedown";e.on(w,(h,o)=>{o.stopPropagation(),r.selectSingle(h)}),e.on("dblclick",()=>{a.showBySelectionLabel()}),e.on("dragEnd",(h,o)=>{var k;o!==null&&!o.isOwnArea&&((k=g.changeFather)==null||k.call(g,{newFather:o.father,direction:o.direction,nodes:[h],childIndex:o.childIndex}))}),e.on("mousedownExpander",(h,o)=>{u.setData(h.id,{isExpand:o}),r.select([h])})}}const Ye=3,Xe=.25;class hs{constructor(e,r){b(this,"paper");b(this,"eventEmitter");b(this,"viewbox",{x:0,y:0,width:0,height:0});b(this,"wrapperWidth");b(this,"wrapperHeight");b(this,"scale",1);this.paperWrapper=e,r&&Number.isFinite(r)&&(this.scale=r),this.paper=this.paperWrapper.getPaper();const a=this.paperWrapper.getSize();this.wrapperWidth=a.width,this.wrapperHeight=a.height,this.eventEmitter=new Se,this.scale>Ye?this.scale=Ye:this.scale<Xe&&(this.scale=Xe),this.setScale(this.scale)}getViewbox(){return this.viewbox}getScale(){return this.scale}setScale(e){e>Ye?e=Ye:e<Xe&&(e=Xe);const r=this.viewbox;r.width=this.wrapperWidth/e,r.height=this.wrapperHeight/e,r.x=this.getScalePosition(this.scale,e,r.x,this.wrapperWidth),r.y=this.getScalePosition(this.scale,e,r.y,this.wrapperHeight),this.scale=e,this.setViewBox(),this.eventEmitter.emit("changeScale",this.scale)}addScale(e){const r=this.scale+e;this.setScale(r)}on(e,r){this.eventEmitter.on(e,r)}translate(e,r){const a=this.viewbox;a.x=a.x+e/this.scale,a.y=a.y+r/this.scale,this.setViewBox()}translateTo(e,r){const a=this.viewbox;a.x=e,a.y=r,this.setViewBox()}resize(e,r){const a=this.viewbox;a.width=e/this.wrapperWidth*a.width,a.height=r/this.wrapperHeight*a.height,this.setViewBox(),this.wrapperWidth=e,this.wrapperHeight=r}getViewportPosition(e,r){const u=this.paperWrapper.getWrapperDom().getBoundingClientRect();return{x:this.viewbox.x+(e-u.x)/this.scale,y:this.viewbox.y+(r-u.y)/this.scale}}getOffsetPosition(e,r){return{offsetX:(e-this.viewbox.x)*this.scale,offsetY:(r-this.viewbox.y)*this.scale}}getScalePosition(e,r,a,u){return a+u*(1/e-1/r)/2}setViewBox(){const e=this.viewbox;this.paper.setViewBox(e.x,e.y,e.width,e.height,!0)}}const zi=2;class ls{constructor(e){b(this,"isStart",!1);b(this,"lastClientX",0);b(this,"lastClientY",0);b(this,"isMoveInited",!1);b(this,"handleMousedown",(e,r)=>{this.isStart=!0,this.lastClientX=e,this.lastClientY=r});b(this,"handleMousemove",(e,r)=>{if(!this.isStart)return;const a=this.lastClientX-e,u=this.lastClientY-r;!this.isMoveInited&&(Math.abs(a)>zi||Math.abs(u)>zi)&&(document.body.style.cursor="grabbing",this.isMoveInited=!0),this.isMoveInited&&this.viewport.translate(a,u),this.lastClientX=e,this.lastClientY=r});b(this,"handleMouseup",()=>{this.isStart=!1,this.isMoveInited=!1,this.lastClientX=0,this.lastClientY=0,document.body.style.cursor="default"});this.viewport=e}}class cs{constructor(e,r){b(this,"isStart",!1);b(this,"start",(e,r,a)=>{a.stopPropagation(),this.isStart=!0,this.dragViewportHandler.handleMousedown.call(this.dragViewportHandler,e,r)});b(this,"move",(e,r,a,u)=>{this.isStart&&this.dragViewportHandler.handleMousemove.call(this.dragViewportHandler,a,u)});b(this,"end",()=>{this.isStart=!1,this.dragViewportHandler.handleMouseup.call(this.dragViewportHandler)});this.root=e,this.dragViewportHandler=r,e.on("drag",this.move,this.start,this.end),this.dragViewportHandler=r}}class ds{constructor(e,r,a){b(this,"handleMousedown",e=>{if(!this.able)return;let r=0,a=0;if(Rt){const u=e;r=u.touches[0].clientX,a=u.touches[0].clientY,e.preventDefault()}else{const u=e;r=u.clientX,a=u.clientY}this.dragViewportHandler.handleMousedown(r,a)});b(this,"handleMousemove",e=>{let r=0,a=0;if(Rt){const u=e;r=u.touches[0].clientX,a=u.touches[0].clientY}else{const u=e;r=u.clientX,a=u.clientY}this.dragViewportHandler.handleMousemove(r,a)});b(this,"handleMouseup",()=>{this.dragViewportHandler.handleMouseup()});var u,g,w,h,o,k;this.svgDom=e,this.dragViewportHandler=r,this.able=a,this.svgDom=e,Rt?((u=this.svgDom)==null||u.addEventListener("touchstart",this.handleMousedown),(g=this.svgDom)==null||g.addEventListener("touchmove",this.handleMousemove),(w=this.svgDom)==null||w.addEventListener("touchend",this.handleMouseup)):((h=this.svgDom)==null||h.addEventListener("mousedown",this.handleMousedown),(o=this.svgDom)==null||o.addEventListener("mousemove",this.handleMousemove),(k=this.svgDom)==null||k.addEventListener("mouseup",this.handleMouseup))}disable(){this.able=!1}enable(){this.able=!0}clear(){var e,r,a;(e=this.svgDom)==null||e.removeEventListener("mousedown",this.handleMousedown),(r=this.svgDom)==null||r.removeEventListener("mousemove",this.handleMousemove),(a=this.svgDom)==null||a.removeEventListener("mouseup",this.handleMouseup)}}class us{constructor(e,r){b(this,"isMoveZoom",!1);b(this,"wheelCallback",e=>{if(e.preventDefault(),e.stopPropagation(),e.ctrlKey||this.isMoveZoom){const a=-Math.floor(e.deltaY)*.02;this.viewport.addScale(a)}else{const a=e.deltaX*.6,u=e.deltaY*.6;this.viewport.translate(a,u)}});this.viewport=e,this.wrapperDom=r,r.addEventListener("wheel",this.wheelCallback)}clear(){this.wrapperDom.removeEventListener("wheel",this.wheelCallback)}enableMoveScale(){this.isMoveZoom=!0}disableMoveScale(){this.isMoveZoom=!1}}class ps{constructor(e,r){b(this,"resizeObserver");b(this,"wrapperDom");const a=e.getWrapperDom(),u=e.getSvgDom();this.wrapperDom=a,this.resizeObserver=new ResizeObserver(g=>{for(const w of g)if(w.target.className.includes(Vi)){const{clientWidth:h,clientHeight:o}=w.target;u==null||u.setAttribute("width",`${h}`),u==null||u.setAttribute("height",`${o}`),r.resize(h,o);break}}),this.resizeObserver.observe(a)}clear(){this.resizeObserver.unobserve(this.wrapperDom)}}const Hi=.25;class fs{constructor(e){b(this,"viewport");b(this,"root");b(this,"dragBackground");b(this,"viewportWheel");b(this,"viewportResize");b(this,"disableBackgroundDrag",()=>this.dragBackground.disable());b(this,"enableBackgroundDrag",()=>this.dragBackground.enable());b(this,"enableMoveScale",()=>this.viewportWheel.enableMoveScale());b(this,"disableMoveScale",()=>this.viewportWheel.disableMoveScale());const{paperWrapper:r,viewport:a,root:u}=e;this.viewport=a,this.root=u;const g=this.initDrag(e);this.dragBackground=g.dragBackground;const w=r.getWrapperDom();this.viewportWheel=new us(a,w),this.viewportResize=new ps(r,a)}zoomIn(){this.viewport.addScale(Hi)}zoomOut(){this.viewport.addScale(-Hi)}translateToCenter(){const e=this.root.getBBox(),r=this.viewport.getViewbox(),a=e.cx-r.width/2,u=e.cy-r.height/2;this.viewport.translateTo(a,u)}clear(){this.dragBackground.clear(),this.viewportWheel.clear(),this.viewportResize.clear()}initDrag({paperWrapper:e,viewport:r,root:a}){const u=new ls(r),g=e.getSvgDom(),w=new cs(a,u),h=new ds(g,u,Rt);return{dragRoot:w,dragBackground:h}}}const Fi={[Ht.root]:Ji,[Ht.firstLevel]:Zi,[Ht.grandchild]:Qi};class gs{constructor({viewport:e,selection:r,dataProxy:a,paperWrapper:u}){b(this,"editorWrapperDom");b(this,"editorDom");b(this,"viewport");b(this,"dataProxy");b(this,"node",null);b(this,"isShow",!1);b(this,"isComposition",!1);this.viewport=e,this.dataProxy=a;const g=this.initTextEditorElement(u);this.editorWrapperDom=g.editorWrapperDom,this.editorDom=g.editorDom,!Rt&&(r.on("select",()=>{var h;const w=r.getSelectNodes();w.length===1&&((h=this.node)==null?void 0:h.id)!==w[0].id?(this.setLabel(),this.editorDom.focus(),this.hide(),this.node=w[0],this.translate()):this.node!==null&&(w.length!==1||w[0].id!==this.node.id)&&(this.setLabel(),this.editorDom.blur(),this.hide(),this.node=null)}),this.editorDom.addEventListener("compositionstart",()=>{this.isShow||this.show(),this.isComposition=!0}),this.editorDom.addEventListener("compositionend",()=>{this.isComposition=!1}),this.editorDom.addEventListener("input",w=>{const h=w.data;this.isShow||(/\s/.test(h)?this.showBySelectionLabel():this.isEditableKey(h)?this.show():this.editorDom.innerText="")}))}showBySelectionLabel(){var e;this.show(),this.editorDom.innerText=((e=this.node)==null?void 0:e.label)||"",document.execCommand("selectAll",!1,null),document.getSelection().collapseToEnd()}isShowing(){return this.isShow}finishEdit(){this.isComposition||(this.setLabel(),this.hide())}hide(){this.editorWrapperDom.style.zIndex="-9999",this.editorDom.innerText="",this.isShow=!1}show(){if(this.node===null)return;const e=this.viewport.getScale(),r=Fi[this.node.getDepthType()]*e;this.editorWrapperDom.style.zIndex="3",this.editorDom.style.fontSize=`${r}px`,this.translate(),this.editorDom.focus(),this.isShow=!0}initTextEditorElement(e){const r=document.createElement("div");r.className="node-edit-text-wrapper";const a=document.createElement("div");a.className="node-edit-text",a.setAttribute("contenteditable","true");const u=e.getContainerDom();return r.appendChild(a),u.appendChild(r),{editorWrapperDom:r,editorDom:a}}isEditableKey(e){const r=["`","-","=","[","]","\\",";","'",",",".","/"];return/^[\w]$/.test(e)||r.includes(e)}translate(){if(this.node===null)return;const{cx:e,cy:r}=this.node.getLabelBBox(),{offsetX:a,offsetY:u}=this.viewport.getOffsetPosition(e,r),g=this.viewport.getScale(),h=(1.4*Fi[this.node.getDepthType()]+6)*g;this.editorWrapperDom.style.left=`${a-300}px`,this.editorWrapperDom.style.top=`${u-h/2}px`}setLabel(){const e=this.editorDom.innerText;this.node!==null&&this.isShow&&e!==this.node.label&&(this.node.setLabel(e),this.dataProxy.setData(this.node.id,{label:e},[this.node.id]))}}class vs{constructor(){}getArrowNextNode(e,r){let a=null;switch(r){case"ArrowUp":{a=this.getVeriticalNext(e,!0);break}case"ArrowRight":{a=this.getHorizontal(e,wt.RIGHT);break}case"ArrowDown":{a=this.getVeriticalNext(e,!1);break}case"ArrowLeft":{a=this.getHorizontal(e,wt.LEFT);break}}return a}getHorizontal(e,r){if(e.direction!==wt.NONE&&e.direction!==r)return e.father;const u=e.getDirectionChildren(r),g=Math.floor((u.length-1)/2);return u[g]||null}getVeriticalNext(e,r){if(e.isRoot()){const w=e.getDirectionChildren(wt.RIGHT),h=e.getDirectionChildren(wt.LEFT),o=w.length>0?w:h,k=o[0]||null,C=o[o.length-1]||null;return r?k:C}let a=0,u=e,g=null;for(;u!==null&&!(u!=null&&u.isRoot());){const w=this.getNextBrothers(u,r);for(let h=0;h<w.length;h++){const o=this.findTargetDepthNode(w[h],a,0,r);if(o){g=o;break}}if(g)break;u=u==null?void 0:u.father,a+=1}return g}findTargetDepthNode(e,r,a,u){if(r===a)return e;let g=null,w=e.getDirectionChildren(e.direction);u&&(w=w.reverse());for(let h=0;h<w.length;h++){const o=w[h],k=this.findTargetDepthNode(o,r,a+1,u);if(k){g=k;break}}return g}getNextBrothers(e,r){var w;const a=[];let u=((w=e==null?void 0:e.father)==null?void 0:w.getDirectionChildren(e.direction))||[];r&&(u=u.reverse());let g=!1;for(let h=0;h<u.length;h++)g&&a.push(u[h]),u[h].id===e.id&&(g=!0);return a}}class ms{constructor(){}getRemoveNextNode(e){if(e.length===0)return null;for(let r=e.length-1;r>=0;r--){const a=e[r],u=this.getTopNode(a,e);if(u.isRoot())return null;const g=u.father.getDirectionChildren(u.direction),w=g.findIndex(V=>V.id===u.id);let h=w-1,o=g[h];for(;e.includes(o)&&o;)h-=1,o=g[h];if(o)return o;let k=w+1,C=g[k];for(;e.includes(C)&&C;)k+=1,C=g[k];if(C)return C;if(u.getDepthType()===Ht.firstLevel){const V=u.direction===wt.RIGHT?wt.LEFT:wt.RIGHT,J=u.father.getDirectionChildren(V),K=J[J.length-1];if(K&&!e.includes(K))return K}const X=u.father;if(!X.isRoot())return X}return null}getTopNode(e,r){let a=e,u=e;for(;u!==null;)r.includes(u)&&(a=u),u=u.father;return a}}class ys{constructor(){b(this,"selectNodes",[]);b(this,"selectionArrowNext");b(this,"selectionRemoveNext");b(this,"eventEmitter");b(this,"isMultiClickMode",!1);b(this,"getTopNodes",()=>{if(this.selectNodes.length===0)return[];const e=this.selectNodes.reduce((a,u)=>(a[u.id]=u,a),{}),r=this.selectNodes[0].getRoot();return!r||e[r.id]?[]:this.getTopNodesInner(r,e)});this.selectionArrowNext=new vs,this.selectionRemoveNext=new ms,this.eventEmitter=new Se}setIsMultiClickMode(e){this.isMultiClickMode=e}select(e){const r=[...e];this.selectNodes.forEach(a=>a.setStyle("base")),r.forEach(a=>a.setStyle("select")),this.selectNodes=r,this.eventEmitter.emit("select",this.selectNodes)}selectSingle(e){if(!this.isMultiClickMode){this.select([e]);return}const r=this.selectNodes.findIndex(a=>a.id===e.id);r>=0?(e.setStyle("base"),this.selectNodes.splice(r,1)):(e.setStyle("select"),this.selectNodes.push(e)),this.eventEmitter.emit("select",this.selectNodes)}selectArrowNext(e){const r=this.selectNodes[this.selectNodes.length-1];if(!r)return;const a=this.selectionArrowNext.getArrowNextNode(r,e);a&&this.select([a])}empty(){this.select([])}on(e,r){this.eventEmitter.on(e,r)}getSelectNodes(){return this.selectNodes}getSelectIds(){return this.selectNodes.map(e=>e.id)}getSingleSelectNode(){return this.selectNodes.length!==1?null:this.selectNodes[0]}getRemoveNextNode(){return this.selectionRemoveNext.getRemoveNextNode(this.selectNodes)}getTopNodesInner(e,r){if(!e.isRoot()&&r[e.id])return[e];let a=[];return e.children&&e.children.forEach(u=>{const g=this.getTopNodesInner(u,r);g.length>0&&(a=a.concat(g))}),a}}class xs{constructor(e){b(this,"startX",0);b(this,"startY",0);b(this,"isInit",!1);b(this,"rectShape",null);this.paper=e}init(e,r){this.startX=e,this.startY=r,this.isInit=!0}resize(e,r){if(!this.isInit)return;const{startX:a,startY:u}=this,g=a<e?a:e,w=u<r?u:r,h=Math.abs(a-e),o=Math.abs(u-r);this.rectShape===null?(this.rectShape=this.paper.rect(g,w,h,o),this.rectShape.attr({stroke:"#73a1bf",fill:"rgba(153,124,255,0.1)",opacity:.8})):this.rectShape.attr({x:g,y:w,width:h,height:o})}hide(){var e;this.isInit=!1,(e=this.rectShape)==null||e.remove(),this.rectShape=null}getBBox(){var e;return(e=this.rectShape)==null?void 0:e.getBBox()}}const Oi=2;class bs{constructor({paperWrapper:e,viewport:r,toolOperation:a,selection:u}){b(this,"multiSelectShape");b(this,"viewport");b(this,"selection");b(this,"svgDom");b(this,"toolOperation");b(this,"allNodes",[]);b(this,"preSelectNodes",[]);b(this,"able",!0);b(this,"isStart",!1);b(this,"isMoveInited",!1);b(this,"lastClientX",0);b(this,"lastClientY",0);b(this,"handleTouchstart",()=>{this.selection.empty()});b(this,"handleMousedown",e=>{this.able&&(this.isStart=!0,this.lastClientX=e.clientX,this.lastClientY=e.clientY,this.selection.empty())});b(this,"handleMousemove",e=>{if(!this.isStart)return;const{clientX:r,clientY:a}=e,u=this.lastClientX-r,g=this.lastClientY-a;if(!this.isMoveInited&&(Math.abs(u)>Oi||Math.abs(g)>Oi)){const w=this.viewport.getViewportPosition(e.clientX,e.clientY);this.multiSelectShape.init(w.x,w.y);const h=this.toolOperation.getNodeMap();this.allNodes=Object.keys(h).map(o=>h[o]),this.isMoveInited=!0}if(this.isMoveInited){const w=this.viewport.getViewportPosition(e.clientX,e.clientY);this.multiSelectShape.resize(w.x,w.y);const h=this.allNodes.filter(k=>Gi.isBBoxIntersect(this.multiSelectShape.getBBox(),k.getBBox()))||[],o=[];for(let k=0;k<this.preSelectNodes.length;k++)h.includes(this.preSelectNodes[k])&&o.push(this.preSelectNodes[k]);for(let k=0;k<h.length;k++)o.includes(h[k])||o.push(h[k]);this.selection.select(o),this.preSelectNodes=o}this.lastClientX=r,this.lastClientY=a});b(this,"handleMouseup",()=>{this.isStart&&(this.multiSelectShape.hide(),this.allNodes=[],this.preSelectNodes=[],this.isStart=!1,this.isMoveInited=!1,this.lastClientX=0,this.lastClientY=0)});var w,h,o,k;const g=e.getPaper();this.svgDom=e.getSvgDom(),this.multiSelectShape=new xs(g),this.viewport=r,this.selection=u,this.toolOperation=a,Rt?(w=this.svgDom)==null||w.addEventListener("touchstart",this.handleTouchstart,!1):((h=this.svgDom)==null||h.addEventListener("mousedown",this.handleMousedown),(o=this.svgDom)==null||o.addEventListener("mousemove",this.handleMousemove),(k=this.svgDom)==null||k.addEventListener("mouseup",this.handleMouseup))}disable(){this.able=!1}enable(){this.able=!0}clear(){var e,r,a,u;Rt?(e=this.svgDom)==null||e.removeEventListener("touchstart",this.handleTouchstart,!1):((r=this.svgDom)==null||r.removeEventListener("mousedown",this.handleMousedown),(a=this.svgDom)==null||a.removeEventListener("mousemove",this.handleMousemove),(u=this.svgDom)==null||u.removeEventListener("mouseup",this.handleMouseup))}}class ws{constructor(){b(this,"allKeydownCallback");b(this,"allKeyupCallback");b(this,"allKeypressCallback");b(this,"keydownCallbacks",[]);b(this,"keyupCallbacks",[]);b(this,"keypressCallbacks",[]);this.allKeydownCallback=e=>{this.keydownCallbacks.forEach(r=>r(e))},document.addEventListener("keydown",this.allKeydownCallback),this.allKeyupCallback=e=>{this.keyupCallbacks.forEach(r=>r(e))},document.addEventListener("keyup",this.allKeyupCallback),this.allKeypressCallback=e=>{this.keypressCallbacks.forEach(r=>r(e))},document.addEventListener("keypress",this.allKeypressCallback)}on(e,r){e==="keydown"?this.keydownCallbacks.push(r):e==="keyup"?this.keyupCallbacks.push(r):e==="keypress"&&this.keypressCallbacks.push(r)}off(e,r){e==="keydown"?this.removeCallback(this.keydownCallbacks,r):e==="keyup"?this.removeCallback(this.keyupCallbacks,r):e==="keypress"&&this.removeCallback(this.keypressCallbacks,r)}clear(){document.removeEventListener("keydown",this.allKeydownCallback),document.removeEventListener("keyup",this.allKeyupCallback),document.removeEventListener("keypress",this.allKeypressCallback)}removeCallback(e,r){const a=e.findIndex(u=>u===r);a>-1&&e.splice(a,1)}}class Ss{constructor(e){b(this,"keyboardEvents");b(this,"handleKeydown",(e,{toolOperation:r,textEditor:a,selection:u,multiSelect:g,viewportInteraction:w})=>{const{key:h,ctrlKey:o,shiftKey:k,metaKey:C}=e;if(a.isShowing()){switch(h){case"Escape":{a.hide();break}case"Tab":case"Enter":{a.finishEdit();break}}return}const X=fr()?o:C;if(X&&k)switch(h){case"z":{r.redo();break}}else if(X&&!k)switch(h){case"z":{r.undo();break}case"=":{e.preventDefault(),w.zoomIn();break}case"-":{e.preventDefault(),w.zoomOut();break}case"Meta":case"Alt":{u.setIsMultiClickMode(!0),g.disable(),w.enableBackgroundDrag(),w.enableMoveScale();break}}else if(!C&&!k&&!o)switch(h){case"Enter":{r.addBrotherNode();break}case"Tab":{u.getSelectNodes().length>0&&e.preventDefault(),r.addChildNode();break}case"Backspace":{r.removeNode();break}case"ArrowUp":case"ArrowRight":case"ArrowDown":case"ArrowLeft":{u.selectArrowNext(h);break}}});b(this,"handleKeyup",(e,{selection:r,multiSelect:a,viewportInteraction:u})=>{switch(e.key){case"Meta":case"Alt":{r.setIsMultiClickMode(!1),a.enable(),u.disableBackgroundDrag(),u.disableMoveScale();break}}});this.keyboardEvents=new ws,this.keyboardEvents.on("keydown",r=>{this.handleKeydown(r,e)}),this.keyboardEvents.on("keyup",r=>{this.handleKeyup(r,e)})}clear(){this.keyboardEvents.clear()}}const Es=100;class ks{constructor(){b(this,"past",[]);b(this,"future",[])}add(e){this.past.length>=Es&&this.past.shift(),this.past.push(JSON.stringify(e)),this.future=[]}canUndo(){return this.past.length>0}canRedo(){return this.future.length>0}undo(e){return this.canUndo()?(this.future.unshift(JSON.stringify(e)),JSON.parse(this.past.pop())):null}redo(e){return this.canRedo()?(this.past.push(JSON.stringify(e)),JSON.parse(this.future.shift())):null}}const tr=B=>{const e=B||{[ri()]:{children:[],label:"Central Topic",direction:wt.NONE,isRoot:!0}};return Object.keys(e).forEach(r=>{const a=e[r].isExpand;e[r].isExpand=a===void 0?!0:a}),e};class _s{constructor({data:e,selection:r,root:a}){b(this,"snapshot");b(this,"selection");b(this,"root");b(this,"eventEmitter");b(this,"data");b(this,"canUndo",()=>this.snapshot.canUndo());b(this,"canRedo",()=>this.snapshot.canRedo());b(this,"getData",()=>this.data);this.snapshot=new ks,this.root=a,this.selection=r,this.data=tr(e),this.eventEmitter=new Se}undo(){if(!this.snapshot.canUndo())return null;const e=this.snapshot.undo({data:this.data,selectIds:this.selection.getSelectIds()});return this.data=e.data,this.eventEmitter.emit("data",this.data),e}redo(){if(!this.snapshot.canRedo())return null;const e=this.snapshot.redo({data:this.data,selectIds:this.selection.getSelectIds()});return this.data=e.data,this.eventEmitter.emit("data",this.data),e}on(e,r){this.eventEmitter.on(e,r)}setData(e,r,a){this.data[e]&&(this.addSnapshot(a),this.data[e]={...this.data[e],...r},this.eventEmitter.emit("data",this.data))}resetData(){const e={};this.resetDataInner(this.root,e),this.data=e,this.eventEmitter.emit("data",this.data)}addSnapshot(e){this.snapshot.add({data:this.data,selectIds:e||this.selection.getSelectIds()})}resetDataInner(e,r){r[e.id]={children:e.children.map(a=>a.id),label:e.label,direction:e.direction,isRoot:e.isRoot(),isExpand:e.isExpand},e.imageData&&(r[e.id].imageData=e.imageData),e.link&&(r[e.id].link=e.link),e.children.forEach(a=>{this.resetDataInner(a,r)})}}class Cs{constructor({root:e,tree:r,selection:a,dataProxy:u,treeOperation:g}){b(this,"root");b(this,"tree");b(this,"selection");b(this,"dataProxy");b(this,"treeOperation");this.root=e,this.tree=r,this.selection=a,this.dataProxy=u,this.treeOperation=g}undo(){const{data:e,selectIds:r}=this.dataProxy.undo()||{};this.tree.render(e),this.selectByIds(r)}redo(){const{data:e,selectIds:r}=this.dataProxy.redo()||{};this.tree.render(e),this.selectByIds(r)}addChildNode(){this.treeOperation.addChildNode()}addBrotherNode(){this.treeOperation.addBrotherNode()}removeNode(){this.treeOperation.removeNode()}getNodeMap(){const e={};return this.setNodeMapInner(this.root,e),e}selectByIds(e){if(!e)return;const r=this.getNodeMap(),a=e.reduce((u,g)=>(r[g]&&u.push(r[g]),u),[]);this.selection.select(a)}setNodeMapInner(e,r){r[e.id]=e,e.children.forEach(a=>this.setNodeMapInner(a,r))}}class Ns{constructor(e,r=""){b(this,"dom");typeof e=="string"?(this.dom=document.createElement(e),this.dom.className=r):this.dom=e}getDom(){return this.dom}setChildren(...e){return e.forEach(r=>this.setChild(r)),this}setChild(e){const r=typeof e=="string"?document.createTextNode(e):e.dom;return this.dom.appendChild(r),this}setClassName(e){return this.dom.className=e,this}addClass(e){return this.dom.classList.add(e),this}hasClass(e){return this.dom.classList.contains(e)}removeClass(e){return this.dom.classList.remove(e),this}setHtml(e){return this.dom.innerHTML=e,this}setCss(e){return Object.keys(e).forEach(r=>{this.dom.style[r]=e[r]}),this}addEventListener(...e){this.dom.addEventListener(...e)}removeEventListener(...e){this.dom.removeEventListener(...e)}}const Xt=(B,e="")=>new Ns(B,e),he=({iconName:B,tipLabel:e,isDisabled:r=!0})=>{const a=Xt("div",`toolbar-btn${r?" disabled":""}`).setChild(Xt("div",`toolbar-icon ${B}-icon`));return{el:Xt("div","toolbar-item").setChildren(a,Xt("div","toolbar-tip").setChild(e)),btnEl:a}};class Bs{constructor({dataProxy:e,toolOperation:r}){b(this,"el");b(this,"btnEl");b(this,"toolOperation");b(this,"dataProxy");this.dataProxy=e,this.toolOperation=r;const a=this.element();this.el=a.el,this.btnEl=a.btnEl}setState(){this.dataProxy.canUndo()?this.btnEl.removeClass("disabled"):this.btnEl.addClass("disabled")}element(){const{el:e,btnEl:r}=he({iconName:"undo",tipLabel:"Undo"});return r.addEventListener("click",()=>{this.toolOperation.undo()},!1),{el:e,btnEl:r}}}class Ls{constructor({toolOperation:e,dataProxy:r}){b(this,"el");b(this,"btnEl");b(this,"dataProxy");b(this,"toolOperation");this.toolOperation=e,this.dataProxy=r;const a=this.element();this.el=a.el,this.btnEl=a.btnEl}setState(){this.dataProxy.canRedo()?this.btnEl.removeClass("disabled"):this.btnEl.addClass("disabled")}element(){const{el:e,btnEl:r}=he({iconName:"redo",tipLabel:"Redo"});return r.addEventListener("click",()=>{this.toolOperation.redo()},!1),{el:e,btnEl:r}}}let Ds=class{constructor({toolOperation:e,selection:r}){b(this,"el");b(this,"btnEl");b(this,"toolOperation");b(this,"selection");this.toolOperation=e,this.selection=r;const a=this.element();this.el=a.el,this.btnEl=a.btnEl}setState(){this.selection.getSelectNodes().length===1?this.btnEl.removeClass("disabled"):this.btnEl.addClass("disabled")}element(){const{el:e,btnEl:r}=he({iconName:"add-child",tipLabel:"Add Subtopic"});return r.addEventListener("click",()=>{this.toolOperation.addChildNode()},!1),{el:e,btnEl:r}}};class Ts{constructor({toolOperation:e,selection:r}){b(this,"el");b(this,"btnEl");b(this,"toolOperation");b(this,"selection");this.toolOperation=e,this.selection=r;const a=this.element();this.el=a.el,this.btnEl=a.btnEl}setState(){this.selection.getSelectNodes().length===1?this.btnEl.removeClass("disabled"):this.btnEl.addClass("disabled")}element(){const{el:e,btnEl:r}=he({iconName:"add-brother",tipLabel:"Add Topic"});return r.addEventListener("click",()=>{this.toolOperation.addBrotherNode()},!1),{el:e,btnEl:r}}}class Is{constructor({textEditor:e,selection:r}){b(this,"el");b(this,"btnEl");b(this,"textEditor");b(this,"selection");this.textEditor=e,this.selection=r;const a=this.element();this.el=a.el,this.btnEl=a.btnEl}setState(){this.selection.getSelectNodes().length===1?this.btnEl.removeClass("disabled"):this.btnEl.addClass("disabled")}element(){const{el:e,btnEl:r}=he({iconName:"edit",tipLabel:"Edit Text"});return r.addEventListener("click",()=>{this.textEditor.showBySelectionLabel()},!1),{el:e,btnEl:r}}}class Ms{constructor({toolOperation:e,selection:r}){b(this,"el");b(this,"btnEl");b(this,"toolOperation");b(this,"selection");this.toolOperation=e,this.selection=r;const a=this.element();this.el=a.el,this.btnEl=a.btnEl}setState(){this.selection.getTopNodes().length>0?this.btnEl.removeClass("disabled"):this.btnEl.addClass("disabled")}element(){const{el:e,btnEl:r}=he({iconName:"delete",tipLabel:"Delete"});return r.addEventListener("click",()=>{this.toolOperation.removeNode()},!1),{el:e,btnEl:r}}}class Rs{constructor({viewportInteraction:e}){b(this,"el");b(this,"btnEl");b(this,"viewportInteraction");this.viewportInteraction=e;const r=this.element();this.el=r.el,this.btnEl=r.btnEl}element(){const{el:e,btnEl:r}=he({iconName:"target",tipLabel:"Locate to center",isDisabled:!1});return r.addEventListener("click",()=>{this.viewportInteraction.translateToCenter()},!1),{el:e,btnEl:r}}}class As{constructor({paperWrapper:e,toolOperation:r,selection:a,dataProxy:u,textEditor:g,viewportInteraction:w}){b(this,"undo");b(this,"redo");b(this,"addChildNode");b(this,"addBrotherNode");b(this,"edit");b(this,"delete");b(this,"target");this.undo=new Bs({toolOperation:r,dataProxy:u}),this.redo=new Ls({toolOperation:r,dataProxy:u}),this.addChildNode=new Ds({toolOperation:r,selection:a}),this.addBrotherNode=new Ts({toolOperation:r,selection:a}),this.edit=new Is({textEditor:g,selection:a}),this.delete=new Ms({toolOperation:r,selection:a}),this.target=new Rs({viewportInteraction:w});const h=Xt("div"),o=[this.undo.el,this.redo.el,this.buildDivider(),this.addChildNode.el,this.addBrotherNode.el,this.buildDivider(),Rt?h:this.edit.el,this.delete.el,this.buildDivider(),this.target.el],k=e.getWrapperDom(),C=Xt("div","toolbar");o.forEach(X=>{C.setChildren(X)}),k.appendChild(C.getDom()),a.on("select",()=>{this.setState()}),u.on("data",()=>{this.setState()})}buildDivider(){return Xt("div","toolbar-divider")}setState(){this.undo.setState(),this.redo.setState(),this.addChildNode.setState(),this.addBrotherNode.setState(),this.edit.setState(),this.delete.setState()}}const $i=.25;class Ps{constructor({paperWrapper:e,viewport:r}){b(this,"viewport");b(this,"el");b(this,"scaleLabelEl");this.viewport=r;const a=this.element();this.el=a.el,this.scaleLabelEl=a.scaleLabelEl,e.getWrapperDom().appendChild(this.el.getDom()),r.on("changeScale",g=>{this.scaleLabelEl.setHtml(this.getScalePercent(g))})}element(){const e=this.viewport.getScale(),r=Xt("div","scale-btn").setChild(Xt("div","scale-btn-icon zoom-out")),a=Xt("div","scale-btn").setChild(Xt("div","scale-btn-icon zoom-in")),u=Xt("div","scale-label").setChild(this.getScalePercent(e)),g=Xt("div","viewport-scale-controller").setChildren(r,u,a);return r.addEventListener("click",()=>{this.viewport.addScale(-$i)},!1),a.addEventListener("click",()=>{this.viewport.addScale($i)},!1),u.addEventListener("click",()=>{this.viewport.setScale(1)},!1),{el:g,scaleLabelEl:u}}getScalePercent(e){return`${Math.floor(e*100)}%`}}class zs{constructor(e,r){b(this,"selectNodes");this.selectNodes=e.getSelectNodes(),e.on("select",a=>{var C;const u=this.selectNodes;this.selectNodes=a;const g=a[0];if(a.length!==1||g.isInvisible()||this.selectNodes[0].id&&this.selectNodes[0].id===((C=u[0])==null?void 0:C.id))return;const w=g.getBBox(),h=r.getViewbox();let o=h.x,k=h.y;w.x<h.x?o=w.x-15:w.x2>h.x+h.width&&(o=w.x2-h.width+15),w.y<h.y?k=w.y-15:w.y2>h.y+h.height&&(k=w.y2-h.height+15),!(o===h.x&&k===h.y)&&r.translateTo(o,k)})}}class Hs{constructor({container:e,data:r,isDebug:a=!1,scale:u}){b(this,"paperWrapper");b(this,"viewportInteraction");b(this,"tree");b(this,"keyboard");b(this,"multiSelect");b(this,"nodeCreator");b(this,"dataProxy");Ir({isDebug:a}),this.paperWrapper=new gr(e);const g=this.paperWrapper.getPaper(),w=new hs(this.paperWrapper,u);this.nodeCreator=new os({paper:g,viewport:w});const h=tr(r);this.tree=new Sr({viewport:w,data:h,nodeCreator:this.nodeCreator});const o=this.tree.getRoot(),k=new ys,C=new _s({data:h,selection:k,root:o});this.dataProxy=C;const X=new kr({root:o,selection:k,dataProxy:C,nodeCreator:this.nodeCreator});new zs(k,w);const V=new gs({viewport:w,selection:k,dataProxy:C,paperWrapper:this.paperWrapper});new as({nodeCreator:this.nodeCreator,selection:k,textEditor:V,dataProxy:C,treeOperation:X}),this.viewportInteraction=new fs({paperWrapper:this.paperWrapper,viewport:w,root:o});const J=new Cs({root:o,tree:this.tree,selection:k,dataProxy:C,treeOperation:X});this.multiSelect=new bs({paperWrapper:this.paperWrapper,viewport:w,selection:k,toolOperation:J}),this.keyboard=new Ss({toolOperation:J,selection:k,textEditor:V,multiSelect:this.multiSelect,viewportInteraction:this.viewportInteraction}),new As({paperWrapper:this.paperWrapper,toolOperation:J,selection:k,dataProxy:C,textEditor:V,viewportInteraction:this.viewportInteraction}),new Ps({paperWrapper:this.paperWrapper,viewport:w})}on(e,r){e==="data"&&this.dataProxy.on(e,r)}clear(){this.paperWrapper.clear(),this.nodeCreator.clear(),this.tree.clear(),this.viewportInteraction.clear(),this.multiSelect.clear(),this.keyboard.clear()}}const ii=B=>{const e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries())[B]||""},Fs=()=>{const B=document.createElement("div");B.classList.add("github-link");const e=document.createElement("a");e.classList.add("github-icon"),e.href="https://github.com/RockyRen/mindmaptree",Rt&&B.classList.add("mobile"),B.appendChild(e),document.body.appendChild(B)},Je=ii("id");class Os{constructor(e){b(this,"data",null);b(this,"pageKey","page");if(e&&(this.pageKey=e),Je){const r=localStorage.getItem(`${this.pageKey}-${Je}`)||"";r&&(this.data=JSON.parse(r))}}getData(){return this.data}save(e){const r=JSON.stringify(e);localStorage.setItem(`${this.pageKey}-${Je}`,r),console.log("save",r)}}const Xs=({pageName:B,options:e})=>{Fs();const r=new Os(B),a=r.getData()||(e==null?void 0:e.data);new Hs({container:"#container",isDebug:ii("debug")==="1",scale:parseFloat(ii("scale")),...e,data:a}).on("data",g=>{r.save(g)})};export{Rt as a,Xs as i};
